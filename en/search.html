<!DOCTYPE html>

<html lang=" dir="ltr class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <title>Paged.js — Looking for something?</title>
        <script type="module">
        document.documentElement.classList.remove('no-js'); 
        document.documentElement.classList.add('js'); 
        </script>
        <meta name="description" content="">
        <meta property="og:title" content="Looking for something? — ">
        <meta property="og:description" content="">
        <meta property="og:image" content="">
        <meta property="og:image:alt" content="Image description">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta name="twitter:card" content="summary_large_image">
        <meta property="og:url" content="site.url">
        <link rel="canonical" href="https://www.mywebsite.com/page">
        <link rel="icon" href="/favicon.ico">
        <link rel="icon" href="/favicon.svg" type="image/svg+xml">
        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
        <link rel="manifest" href="/my.webmanifest">
        <meta name="theme-color" content="NaN">
        
        <meta name="twitter:dnt" content="on">
        
        <link rel="stylesheet" href="/css/main.css">
        <link href="https://unpkg.com/prismjs@1.20.0/themes/prism.css"
              rel="stylesheet">
        <script>
        // if there is a dark mode in the storage, use that
        if (localStorage.getItem('Nightmode') == "true") {
        document
        .documentElement
        .classList
        .add('nightmode')
        }
        </script>
        
            <script>

  if (window.location.href.includes("?night")) {
    document.documentElement.classList.add("nightmode");
  }

function start() {

    document.querySelectorAll("a").forEach((a) => {
      if (a.href.includes(`?day`)) {
        // add the infor mation in the url of each link
        a.href = `${a.href.replace("?day", "?night")}`;
      } else if (a.href.includes("#")) {
        a.href = a.href.replace("#", "index.html?night#");
      } else {
        a.href = `${a.href}?night`;
      }
    });
};

start()
</script>
        
    </head>
    <body class="search "
          style="">
        <div class="crop-marks">
    <div class="crop-mark vertical"></div>
    <div class="crop-mark horizontal"></div>
    <div class="paper"></div>
</div>
        
        
            
<div class="running-head">
    
        
            <a class="back-home" href="/">
    <svg id="paged-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 213 52" fill="none" id="paged-logo"><path fill="var(--color-body)" d="M69.1 34.7c0 1.3-.5 2.7-1.6 2.7s-1.6-1.1-1.6-4.6v-7.1c0-7.3-1.5-13.5-12.1-13.5-6.5.0-13.4 2.2-13.4 8.4.0 4.7 6.9 6.1 9.9 2.6-1-1.3-1.7-3-1.7-4.5.0-2.9 2.2-3.5 4.4-3.5 2.4.0 3.9 1.4 3.9 8.6v1.3l-4.1 1.1c-7.9 2.2-12.9 4.9-12.9 9.1.0 3.9 2.2 6 7.1 6 4.6.0 8.7-2.4 11-7.7h.5c.9 5 2.4 7.7 6.8 7.7 3.1.0 6.6-1.5 6.1-6.7h-2.3v.1zm-17.8 1.8c-1.7.0-2.6-.9-2.6-2.1.0-3.2 2.3-4.7 8.2-6.5.1 4-2.5 8.6-5.6 8.6zM24.8 12.3c-3.6.0-9.6 1.2-10.6 9.1h-.9v-9.1L.9 15.2v2.4h6v31l-5.4.4v2.4h20.2V49l-6.2-.5V37.3c1.3 1.9 4 4.2 8.7 4.2 5.1.0 12.3-4.4 12.3-14.2.0-9.2-5.1-15-11.7-15zm-2.4 25.2c-2.8.0-5.3-1.5-6.5-5.7v-8.9c.1-1.3 1.5-5.4 5-5.4 4.4.0 7 5.1 7 10.5-.1 4.7-2 9.5-5.5 9.5zm155-21.6h5.8v32c0 3.4-4.3.4-5.1-3.1H177c-1.3 3.5-.2 6.9 3.1 6.9 3.2.0 7.4-1.7 7.4-8.9l.1-30.6-10.2 1.4v2.3zm-6 17.9c-2.4.0-3.7 1.3-3.7 3.7.0 2.4 1.3 3.7 3.7 3.7 2.4.0 3.7-1.3 3.7-3.7.0-2.4-1.4-3.7-3.7-3.7zM95.8 37.4c-4.9-1.1-12.3-1.1-15.9-1.6l1.2-2.4c1.4.4 3.1.6 5 .6 8.6.0 13.3-4.9 13.3-11.3.0-4.4-3-8-7.8-9.6l.2-.6c1.9.4 3.9.7 5.4.7 2.3.0 4-.8 4-3.4.0-1.8-1.3-4.1-3.3-6.2-3.3 3.6-6.2 7.3-10.7 8.7-.2-.1-.4-.1-.6-.1-8.6.0-13 4.8-13 11.3.0 4 1.8 7.4 5.7 9.2l-5.5 4.6c.4.8 1.7 2.9 6.5 4.4v.7c-4.4.6-7 1.9-7 3.7.0 3.8 7 5.7 12.3 5.7 9.1.0 16.6-2.3 16.9-7.9.0-3.6-1.6-5.4-6.7-6.5zm-10-22.2c3.3.0 4.8 2.4 4.8 7.4.0 5.7-1.1 8.5-4 8.5-3.4.0-4.8-2.9-4.8-8.4.1-5.3 1.2-7.5 4-7.5zm5.1 32.5c-6.2.0-10.5-1.5-10.5-3.2.0-.6.6-1.3 1.8-2.2l.9.2c9.4 1.8 14.8 1.3 14.8 3 .1 1.4-2.5 2.2-7 2.2zM199 21.5c-2.3-1.4-3.3-2.6-3.3-4 0-1.6 1.1-3.3 4-3.3 4.3.0 8.1 3.6 10.6 8.9h1.1v-8.4c-3-1.6-6.4-2.4-9.5-2.4-5.3.0-9.8 2.4-9.8 7.3.0 3.9 3.1 6.7 6.2 8.4 5.8 3.2 11 4.4 11 7.8.0 2.3-2.2 3.6-4.7 3.6-5.2.0-8.9-2.7-10.9-10.2h-1.1v9.4c2.7 1.8 6.5 2.8 10.1 2.8 5.4.0 10.2-2.2 10.2-7.7.1-6.5-7.5-8.3-13.9-12.2zM185.7 1.8c-2 0-2.9 1.1-2.9 2.9.0 1.9 1 2.9 2.9 2.9 1.8.0 2.9-1 2.9-2.9s-1.1-2.9-2.9-2.9zM126.1 29.1c.1.4.1.7.1 1.1.0 3.9-2.8 6.1-6.8 6.1-3.9.0-6.7-2.8-7.7-8.5l17.2-4.3c-.2-7.7-4.7-11.3-12.9-11.3-6.2.0-13 4.5-13 14.4.0 7.5 4.9 14.6 13.9 14.6 8 0 12.3-5.3 12.3-11.2.0-.5-.1-1-.1-1.5l-3 .6zm-14.7-5.8c0-5.2 2.2-8 5.3-8 2.9.0 3.8 3.2 3.8 5.6.0 1.5-1.9 1.8-5.1 2.9l-4 1.3v-1.8zM147 4.7l6.2.5v10.6c-1.5-2.1-4-3.6-8.4-3.6-5.1.0-12.3 4.4-12.3 14.2.0 9.1 5.1 14.9 11.7 14.9 3.6.0 9.6-1.2 10.6-9.1h1l1.9 8.3h4V.8l-14.8 1.5v2.4h.1zm6.2 26c-.1 1.2-1.1 5.4-5.9 5.4-4 0-6-4.9-6-10.5.0-4.7 1.9-9.5 5.4-9.5 2.8.0 5.3 1.5 6.5 5.7v8.9z"></path></svg>    
</a>
        
    
    <button class="menu-call">MENU</button>
    <nav class="menu hide" role="main">
        <ul>
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
                    
                        <li class="">
                            <a href="/en/about.html">about</a>
                        </li>
                    
                
            
                
                    
                        <li class="">
                            <a href="/en/faq.html">FAQ</a>
                        </li>
                    
                
            
                
                    
                        
                        
                        
                            
                                
                            
                        
                        
                    
                
            
                
            
                
                    
                        <li class="">
                            <a href="/en/documentation/">documentation</a>
                        </li>
                    
                
            
                
                    
                        <li class="">
                            <a href="/en/examples.html">examples</a>
                        </li>
                    
                
            
                
            
                
            
                
                    
                        <li class="">
                            <a href="/en/posts/">journal</a>
                        </li>
                    
                
            
                
                    
                        
                        
                        
                            
                                
                            
                        
                        
                    
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            <li>
                <a class=github-link"
                href="https://github.com/pagedjs/pagedjs/">github</a>
            </li>
        </ul>
    </nav>
</div>

        
        
        
<article>
  <header>
    <h1 id="title">Looking for something?</h1>
  </header>


  <aside class="inputblock">
    <input id="searchInput" type="text"/>
    <button id="searchIcon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                                                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"></circle>
        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </button>
    <div class="andor">
      <input type="radio" id="and" name="andor" value="and" checked>
      <label for="and">and</label>
      <input type="radio" id="or" name="andor" value="or">
      <label for="or">or</label>
    </div>
    <div class="previousSearch">
      <button class="clearPrevious">clear previous queries</button>
    </div>
  </aside>

  <ul id="results">
  </ul>

  <template class="searchspace">
    <main class="content">
      
      <section class="data" id="the-big-picture" >
        <h1></h1>
        <h2 id="what-is-paged.js%3F" tabindex="-1">What is Paged.js?</h2>
<p>Paged.js is a free and open-source library that paginates any HTML content to produce beautiful print-ready PDF.<br>
The library fragments the content, reads your CSS print declarations and presents a paginated preview in your browser that you can save as PDF.</p>
<p>By paginating content in the browser, Paged.js shows a preview of the PDF output in web browsers. This allows designers to use browsers dev tools (eg. the inspection console built into most browsers) to make changes on the fly and control the rendering of the typesetting.</p>
<p>It's also possible to use Paged.js within other tools and to extend rendering by adding plugins.</p>
<p>As Paged.js follows the W3C standards, it can easily be a part of a automated workflows thanks to the command line interface version (using an headless browser) that can generate a PDF from scriptable automated commands.</p>
<h2 id="w3c-specifications" tabindex="-1">W3C specifications</h2>
<p>Paged.js is based on the CSS standards written by the World Wide Web Consortium (W3C). Paged.js is a <span class="dt">polyfill<span class="dd">A <a href="https://en.wikipedia.org/wiki/Polyfill_(programming))">polyfill</a> is a bit of code that implements a feature on web browsers that do not support the feature</span></span> for some CSS properties made to print HTML from the browser. It can parse CSS stylesheets, and translate the declarations in HTML and CSS that a browser can understand. The print declarations (by updating them with supported styles or replacing them with JavaScript implementations) and present a paginated rendering of the HTML document using the fragmentation provided by CSS columns.</p>
<p>The W3C CSS modules that Paged.js aims to implement are the following:</p>
<ul>
<li><a href="https://www.w3.org/TR/css3-page/">CSS Paged Media Module Level 3</a></li>
<li><a href="https://www.w3.org/TR/css-gcpm-3/">CSS Generated Content for Paged Media Module</a></li>
<li><a href="https://www.w3.org/TR/css-break-3/">CSS Fragmentation Module Level 3</a></li>
</ul>
<h2 id="a-community" tabindex="-1">A community</h2>
<p>The code of Paged.js is open-source with a MIT license and the development is community-driven. Everyone is invited to join us! You can find the source code of Paged.js on the repo of our self-hosted gitlab: <a href="https://gitlab.coko.foundation/pagedjs/pagedjs">https://gitlab.coko.foundation/pagedjs/pagedjs</a></p>
<p>We’re relying on designers and developers who want to discuss new features, ideas and bug fixes. If you’d like to participate in the conversation, you can add issues to the repo. But the easiest way is to go to <a href="https://mattermost.coko.foundation/">our self-hosted chat</a> and join the conversation.</p>

      </section>
      
      <section class="data" id="getting-started-with-paged.js" >
        <h1></h1>
        <h2 id="starting-paged.js" tabindex="-1">Starting Paged.js</h2>
<p>Paged.js comes in two flavours: a polyfill that will automatically run when you starts the browser, a npm module that you can run or a command line that uses a headless browser. All can be adapted to your need pretty easily, but feel free to use what’s the more convenient for you.</p>
<h3 id="using-paged.js-as-a-polyfill-in-web-browsers" tabindex="-1">Using Paged.js as a polyfill in web browsers</h3>
<p>To be able to run Paged.js on your document, you will need the following:</p>
<ul>
<li>The html and css files you want to transform into a book;</li>
<li>Paged.js script (either locally, or using our CDN link);</li>
<li>A web server to let the polyfill access your CSS file;</li>
<li>a web browser to see the magic in the screen.</li>
</ul>
<h4 id="getting-the-script" tabindex="-1">Getting the script</h4>
<p>To download the polyfill, go to <a href="https://unpkg.com/pagedjs/dist/">https://unpkg.com/pagedjs/dist/</a>. From there, you can choose the latest or older versions of <code>paged.polyfill.js</code>.</p>
<p>Copy the script in a file and call it from the head of your HTML file:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/paged.polyfill.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<p>If you prefer, ou can use the hosted version of the script on <a href="https://unpkg.com/pagedjs">unpkg.com/pagedjs</a> by copying the line of code below in the <code>head</code> of your document. If you need a previous version of Paged.js you can check the releases on <a href="https://unpkg.com/browse/pagedjs/">unpgk.com/browse/pagedjs</a>. Please notice the button top right to get to older versions.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/pagedjs/dist/paged.polyfill.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<p>As soon as your browser has loaded everything your HTML needs to be shown on screen (including images, font files, etc.), the script will start paginating the content and pages will appear on your screen.</p>
<h4 id="preview-your-work-(interface)" tabindex="-1">Preview your work (interface)</h4>
<p>Paged.js will manipulate the DOM so the browser can understand the css rules you wrote. On screen, pages will be shown from top to bottom on the left side of the page. To have a better understanding of what’s happening on the page, we made a small CSS file call interface that defines the layout to show your book on screen. Since we’re using <code>@media screen</code>, page borders and shadow won’t appear on paper when printed. To download the file of the interface go to the <a href="https://gitlab.coko.foundation/pagedjs/interface-polyfill">repo on gitlab</a>, download the <code>interface.css</code> file and link it to your document in the <code>&lt;head&gt;</code>. Please check the file, as it already offers options to show facing pages, recto/verso, baseline, etc.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>path/to/file/interface.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>
<h4 id="generate-your-first-pdf-from-the-browser" tabindex="-1">Generate your first PDF from the browser</h4>
<p>Once Paged.js has done its work, you can generate the PDF using the Save as PDF function your browser is using.</p>
<ol>
<li>
<p>Click on the “Print” button of your browser. (It will most likely be in <code>File &gt; Print</code> or, on your keyboard, <code>CTRL/CMD + P</code>)</p>
</li>
<li>
<p>Change the <em>Destination</em> to &quot;Save as a PDF file”.</p>
</li>
<li>
<p>In the advanced settings, as Paged.js is not using any of those options, you need to be sure the that the following statements are right:</p>
<ul>
<li><em>Margins</em> are set to “none”,</li>
<li>“Headers and footers” is unchecked or set to none,</li>
<li>“Background graphics” is checked.</li>
</ul>
</li>
</ol>
<p>You can then open your PDF in your favorite PDF reading tool.</p>
<h3 id="command-line-version" tabindex="-1">Command line version</h3>
<p>The command line version of Paged.js uses a headless browser (a browser without any graphical interface) to generate a PDF. It can be run on the server to launch a headless Chromium in fully automated workflows. With the command line version, you don't need to call the Paged.js script in your document: it will be done automatically.</p>
<p>First, download and install <code>pagedjs-cli</code> with your terminal (you need to have <code>git</code>, <code>node</code> and <code>npm</code> installed):</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> pagedjs-cli pagedjs</code></pre>
<p>Then, in a new terminal window, go to the folder where the code of your document is located (use the <code>cd</code> command) and generate your PDF with the following command:</p>
<pre class="language-bash"><code class="language-bash">$ pagedjs-cli index.html <span class="token parameter variable">-o</span> result.pdf</code></pre>
<p>Some options to generate the PDF:</p>
<pre class="language-bash"><code class="language-bash">-h, <span class="token parameter variable">--help</span>                  output usage information<br>-V, <span class="token parameter variable">--version</span>               output the version number<br>-i, <span class="token parameter variable">--inputs</span> <span class="token punctuation">[</span>inputs<span class="token punctuation">]</span>       Inputs<br>-o, <span class="token parameter variable">--output</span> <span class="token punctuation">[</span>output<span class="token punctuation">]</span>       Output<br>-d, <span class="token parameter variable">--debug</span>                 Show Electron Window to Debug<br>-l, <span class="token parameter variable">--landscape</span>             Landscape printing<br>-s, --page-size <span class="token punctuation">[</span>size<span class="token punctuation">]</span>      Print to Page Size <span class="token punctuation">[</span>size<span class="token punctuation">]</span><br>-w, <span class="token parameter variable">--width</span> <span class="token punctuation">[</span>size<span class="token punctuation">]</span>          Print to Page Width <span class="token punctuation">[</span>width<span class="token punctuation">]</span><br><span class="token parameter variable">-h</span> <span class="token parameter variable">--height</span> <span class="token punctuation">[</span>size<span class="token punctuation">]</span>          Print to Page Height <span class="token punctuation">[</span>weight<span class="token punctuation">]</span><br>-m, --page-margin <span class="token punctuation">[</span>margin<span class="token punctuation">]</span>  Print with margin <span class="token punctuation">[</span>margin<span class="token punctuation">]</span><br>-n, <span class="token parameter variable">--hyphenate</span> <span class="token punctuation">[</span>lang<span class="token punctuation">]</span>      Hyphenate with language <span class="token punctuation">[</span>language<span class="token punctuation">]</span>, defaults to <span class="token string">"en-us"</span><br>-hi, <span class="token parameter variable">--hypher_ignore</span> <span class="token punctuation">[</span>str<span class="token punctuation">]</span>  Ignore passed element selectors, such as <span class="token string">".class_to_ignore, h1"</span><br>-ho, <span class="token parameter variable">--hypher_only</span> <span class="token punctuation">[</span>str<span class="token punctuation">]</span>    Only hyphenate passed elements selector, such as <span class="token string">".hyphenate, aside"</span><br>-e, <span class="token parameter variable">--encoding</span> <span class="token punctuation">[</span>type<span class="token punctuation">]</span>       Set the encoding of the input html, defaults to <span class="token string">"utf-8"</span><br>-t, <span class="token parameter variable">--timeout</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span>          Set a max <span class="token function">timeout</span> of <span class="token punctuation">[</span>ms<span class="token punctuation">]</span></code></pre>

      </section>
      
      <section class="data" id="how-paged.js-works" >
        <h1></h1>
        <figure> <img src="/images/flux-page.png"  /></figure>
<p>Paged.js is made of three modules, each one has a very precise task:</p>
<ul>
<li>the <strong>chunker</strong> fragments the content into discrete pages;</li>
<li>the <strong>polisher</strong> transforms the CSS declarations into ones that the browser can understand;</li>
<li>and the <strong>previewer</strong> creates the preview of your book in the browser.</li>
</ul>
<p>To start using Paged.js, all you have to do is to write the standardized CSS declarations and call the script. The library will interpret the declarations either by converting them to CSS styles natively supportted by the browser or replacing them with JavaScript implementations.</p>
<h2 id="the-chunker%3A-fragmenting-the-content" tabindex="-1">The Chunker: fragmenting the content</h2>
<p>The chunker takes all your rendered content, with all the design rules applied to it, puts as much possible of it in a first box and looks for the overflowing content.</p>
<!-- ![The chunker puts all your rendered content in a box and checks the overflow](/images/chuncker-1.png) -->
<p>After that, the script creates a new box, puts as much as possible of the overflowing content in it looks for the next overflow, and again and again, until there is no content left to put in the boxes. Paged.js does this repeatedly until the book is done.</p>
<!-- ![The chunker creates a new box and puts the overflow content in it]() -->
<figure> <img src="/images/chuncker-2.png"  /></figure>
<p>To do so, we use the mighty CSS columns properties: each page is a column. This offers us an easy access to some of the properties already implemented in browsers, such as column-breaks, element(), or widows and orphans.</p>
<p>PS. This doesn't prevent you from using the CSS column property in your content</p>
<p>Since the content on each page is then fixed, you’ll need to refresh the page to repeat the process anytime something changes in your HTML or CSS.</p>
<p>We will see that it is possible to control page breaks and change the size of the content area by changing the margins from one page to another using a page master layout.</p>
<h2 id="the-polisher%3A-polyfilling-the-print-declarations" tabindex="-1">The Polisher: polyfilling the print declarations</h2>
<p>The Polisher is the part of Paged.js that translate the CSS rules for each of your page. It builds new boxes to create page layouts and places your content in these pages. We use the CSS tree library to parse the CSS from text and replace <code>@page</code> rules with classes. The polisher also replaces calls such as running headers, page counters, or CSS generated content functions with variables from the DOM.</p>
<figure> <img src="/images/div-pages.png"  /></figure>
<p>Let's take the following CSS as an example:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token property">size</span><span class="token punctuation">:</span> 148mm 210mm<span class="token punctuation">;</span><br>  <span class="token property">margin-top</span><span class="token punctuation">:</span> 10mm<span class="token punctuation">;</span><br>  <span class="token property">margin-right</span><span class="token punctuation">:</span> 20mm<span class="token punctuation">;</span><br>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 25mm<span class="token punctuation">;</span><br>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 15mm<span class="token punctuation">;</span><br><br>  <span class="token atrule"><span class="token rule">@bottom-left</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token atrule"><span class="token rule">@bottom-center</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">string</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercase<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br><span class="token punctuation">}</span><br><br><span class="token selector">h1#title</span> <span class="token punctuation">{</span><br>  &lt;!-- <span class="token string">"Moby Dick"</span> --><br>  <span class="token property">string-set</span><span class="token punctuation">:</span> title <span class="token function">content</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Paged.js transforms this into CSS that is understandable to the browser:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.pagedjs_page</span> <span class="token punctuation">{</span><br>  <span class="token property">--pagedjs-string-title</span><span class="token punctuation">:</span> <span class="token string">"Moby Dick"</span><span class="token punctuation">;</span><br>  <span class="token property">margin-top</span><span class="token punctuation">:</span> 10mm<span class="token punctuation">;</span><br>  <span class="token property">margin-right</span><span class="token punctuation">:</span> 20mm<span class="token punctuation">;</span><br>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 25mm<span class="token punctuation">;</span><br>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 15mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pagedjs_page .pagedjs_margin-bottom-left::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">string</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pagedjs_page .pagedjs_margin-bottom-center::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-string-title<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercase<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>This will apply to the transformed DOM (this is a simplified version of what Paged.js generates):</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>page-1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_pagebox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_margin pagedjs_margin-bottom-left hasContent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_margin-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>          <span class="token comment">&lt;!-- ::after --></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_margin pagedjs_margin-bottom-center hasContent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_margin-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>          <span class="token comment">&lt;!-- ::after --></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_area<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>			<span class="token comment">&lt;!-- content of the page --></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>Across this documentation, we will specify the CSS properties we implement and the one we use instead so that they can be interpreted by the browser.</p>
<h2 id="the-previewer%3A-rendering-the-paginated-document" tabindex="-1">The Previewer: rendering the paginated document</h2>
<p>The preview module of Paged.js loads the modules, uses the polisher and the chunker to layout the content. It builds the preview of your document in your browser, so you can see exactly how things are going to look and then adjust your content accordingly.</p>
<p>Behind the curtains, Paged.js modifies the DOM structure by adding some HTML elements to build and render your layout. Those modifications are made during the rendering, there is no modification of your original HTML document.</p>
<p>It also adds references to every node (for example, it adds classes to differentiate right or left pages). This gives us complete control over the page layout without any hacks.</p>
<p>This documentation will specify for each CSS property, the modifications of the DOM needed to build and render your book. You can also access these elements in Javascript directly with their classes if you want to go further with Paged.js and add your own functions.</p>

      </section>
      
      <section class="data" id="web-design-for-print" >
        <h1></h1>
        <h2 id="the-%40media-print-query" tabindex="-1">The <code>@media print</code> query</h2>
<p>Responsive design is made possible by the use of media queries: a set of CSS properties that you can use to define the styles when your web page is rendered on a tablet terminal, a phone, a TV screen, etc. One of those media queries, the <code>@media print</code> was specifically made to print a webpage. For example, you can remove menu, icons, change the way the hyperlinks will appear, etc. As a polyfill, Paged.js will use the CSS rules under that media queries to define the styles of your book:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> print</span> <span class="token punctuation">{</span><br>  <span class="token comment">/* All your print styles go here */</span><br><span class="token punctuation">}</span></code></pre>
<p>If you don’t use Paged.js, the styles declared in this media query will only be applied when the web page is printed (or saved as PDF) from the browser print dialog. For example, the font-size may vary from the screens to the printer or images might be removed (with <code>display:none</code>) to save some ink. If you use Paged.js, you’ll be able to see in your browser a preview of how your styles will appear when printing.</p>
<h2 id="%40page-rule" tabindex="-1">@page rule</h2>
<p>The @page rule lets you specify various aspects of your page model such as dimensions, orientation, background, margins, cropping, registration marks, and so on. All the CSS properties that affect the layout of your page must be declared inside.</p>
<h3 id="page-size-property" tabindex="-1">Page size property</h3>
<p>The <code>size</code> property specifies the size of your page (excluding bleeds). This fixed size can be declared by length units in centimeters (<code>cm</code>) millimeters (<code>mm</code>) or inches (<code>in</code>). The first number is the width of your document and the second number is the height. By default, Paged.js uses the letter size (8.5in × 11in).<br>
It's also possible to specify the page size by using keywords that can be combined with page orientation (<code>portrait</code> or <code>landscape</code>). By default, your page will always be printed as portrait.</p>
<pre class="language-css"><code class="language-css"><br><span class="token comment">/* Define a custom page size */</span><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>    <span class="token property">size</span><span class="token punctuation">:</span> 140mm 200mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Use A5 paper */</span><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token property">size</span><span class="token punctuation">:</span> A5<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Use A4 paper in landscape orientation */</span><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token property">size</span><span class="token punctuation">:</span> A4 landscape<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<table>
<thead>
<tr>
<th style="text-align:left">Page size keyword</th>
<th style="text-align:right">Size</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">A0</td>
<td style="text-align:right">841 × 1189 mm</td>
</tr>
<tr>
<td style="text-align:left">A1</td>
<td style="text-align:right">594 × 841 mm</td>
</tr>
<tr>
<td style="text-align:left">A2</td>
<td style="text-align:right">420 × 594 mm</td>
</tr>
<tr>
<td style="text-align:left">A3</td>
<td style="text-align:right">297 × 420 mm</td>
</tr>
<tr>
<td style="text-align:left">A4</td>
<td style="text-align:right">210 × 297 mm</td>
</tr>
<tr>
<td style="text-align:left">A5</td>
<td style="text-align:right">148 × 210 mm</td>
</tr>
<tr>
<td style="text-align:left">A6</td>
<td style="text-align:right">105 × 148 mm</td>
</tr>
<tr>
<td style="text-align:left">A7</td>
<td style="text-align:right">74 × 105 mm</td>
</tr>
<tr>
<td style="text-align:left">A10</td>
<td style="text-align:right">26 × 37 mm</td>
</tr>
<tr>
<td style="text-align:left">B4</td>
<td style="text-align:right">250 × 353 mm</td>
</tr>
<tr>
<td style="text-align:left">B5</td>
<td style="text-align:right">176 × 250 mm</td>
</tr>
<tr>
<td style="text-align:left">letter</td>
<td style="text-align:right">8.5 × 11 in</td>
</tr>
<tr>
<td style="text-align:left">legal</td>
<td style="text-align:right">8.5 × 14 in</td>
</tr>
<tr>
<td style="text-align:left">ledger</td>
<td style="text-align:right">11 × 17 in</td>
</tr>
</tbody>
</table>
<h3 id="css-variables" tabindex="-1">CSS variables</h3>
<p>You can’t use CSS variables to define the page size because as browsers do not support it.</p>
<!-- Unfortunately, the `@page { size }` property is the only thing we can't polyfill that we need to print (to generate the PDF). -->
<p>However, Paged.js create a set of custom properties from your declaration and use them to layout. You can therefore reuse them in your document if you need them for your calculations:</p>
<ul>
<li><code>var(--pagedjs-pagebox-width)</code> for the width of your page</li>
<li><code>var(--pagedjs-pagebox-height)</code> for the height of your page</li>
</ul>
<pre class="language-md"><code class="language-md">TODO: This needs to be updated as it’s not true anymore!<br>Warning: the browser can only understand one page size for your document. If you need to create a document with different page sizes, you will need to create two separate HTML files and generate two PDFs.</code></pre>
<h2 id="margin-size-property" tabindex="-1">Margin size property</h2>
<p>The margins of your pages needs to be declared in the <code>@page</code> rule with the same syntax you usually use for the margins. You can use length units like centimeters (<code>cm</code>) millimeters (<code>mm</code>), inches (<code>in</code>) or pixels (<code>px</code>).</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token property">margin</span><span class="token punctuation">:</span> 20mm 30mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>By default, the margins are set to 1 inch.</p>
<p>Other examples with different syntaxes:</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* All margins are 30mm */</span><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token property">margin</span><span class="token punctuation">:</span> 30mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Top and bottom margins are 3in,<br>left and right margins are 2in */</span><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token property">margin</span><span class="token punctuation">:</span> 3in 4in<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* All margins are different */</span><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token property">margin-top</span><span class="token punctuation">:</span> 20mm<span class="token punctuation">;</span><br>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 25mm<span class="token punctuation">;</span><br>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 10mm<span class="token punctuation">;</span><br>  <span class="token property">margin-right</span><span class="token punctuation">:</span> 35mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="facing-pages-or-recto%2Fverso" tabindex="-1">Facing pages or recto/verso</h2>
<p>Since Gutemberg, books are designed with facing pages in mind: the left and right pages are generally symmetrical to each other, using the fold as the axis.<br>
y change, you can use <code>:left</code> and <code>:right</code> pseudo-selectors on <code>@page</code> rules and style your pages differently.</p>
<p>Let's look at an example with different margins: outside margins are bigger than inside onex.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span><span class="token punctuation">:</span>left</span> <span class="token punctuation">{</span><br>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 25mm<span class="token punctuation">;</span><br>  <span class="token property">margin-right</span><span class="token punctuation">:</span> 10mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@page</span><span class="token punctuation">:</span>right</span> <span class="token punctuation">{</span><br>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 10mm<span class="token punctuation">;</span><br>  <span class="token property">margin-right</span><span class="token punctuation">:</span> 25mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>If your document is a recto/verso book (ie has no need for facing pages), you can use <code>:recto</code> and <code>:verso</code> page selectors the same way.</p>
<h2 id="page-breaks" tabindex="-1">Page breaks</h2>
<p>Paged.js automatically creates a page break when your content doesn't fit into a page. However, you may need to control this fragmentation. Typically, in a book, you may want to start all of the chapters of the book on a right page. There are a few properties to help you do that.</p>
<!-- In this part, we only talk about breaks from the point of view of global layout. Controlling the breaks inside paragraphs (widows or orphans) or avoiding fragmenting specific elements will be discussed in another part. -->
<p>The <code>break-before</code> property indicates that your element should start on a new page that can be:</p>
<ul>
<li>with <code>break-before: page</code>, element can start on any new page;</li>
</ul>
<ul>
<li>
<p>with <code>break-before: right</code> or <code>break-before: left</code>, the element starts on the next right or on the next left page (a <code>blank</code> page will be automatically created if needed);</p>
</li>
<li>
<p>with <code>break-before: recto</code> or <code>break-before: verso</code> are an alternative for <code>break-before: right</code>or <code>break-before: left</code>;</p>
</li>
</ul>
<p>Let's imagine you have all your book chapters in <code>&lt;section&gt;</code> elements with a <code>chapter</code> class and you want your chapter to always start on the right page. You would write it like this:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.chapter</span> <span class="token punctuation">{</span><br>  <span class="token property">break-before</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>You can also use page breaks on inline-element. For exemple, the following code forces the level 2 titles to always start on a new page:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">h2</span> <span class="token punctuation">{</span><br>  <span class="token property">break-before</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>If you prefer, you can also use <code>break-after</code> the same way:</p>
<ul>
<li><code>break-after: page</code> will push the content after the element to the next page;</li>
</ul>
<ul>
<li>
<p><code>break-after: right</code> or <code>break-after: left</code> will push the content after the element on the next right or left page;</p>
</li>
<li>
<p><code>break-after: recto</code> or <code>break-after: verso</code> will push the content after the element on the next recto or verso page;</p>
</li>
</ul>
<h2 id="pseudo-class-selectors-for-pages" tabindex="-1">Pseudo class selectors for pages</h2>
<p>The W3C has defined Pseudo class selectors for specific pages. We have already met the <code>:left</code> and <code>:right</code> selector. But there are some useful other ones:</p>
<ul>
<li><code>:first</code>, select the first page of you document,</li>
<li><code>nth()</code>, let you specify the page you want to select by writing its number (ex: <code>@page:nth(3)</code> selects the third page),</li>
<li><code>:blank</code>, select all the blank pages of your document (blank pages are a result of a forced page break right or left).</li>
</ul>
<p>A page matched by a pseudo class selector can also be matched by other page pseudo-classes. The rules that apply are defined following the CSS cascade principles.</p>
<h2 id="bleeds" tabindex="-1">Bleeds</h2>
<p>To be sure that there won’t be any white paper visible while printing, we use the <code>bleed</code> property. It specifies the size of the bleed area outside the page box. It won’t affect the space on the page for your content</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span>  <span class="token punctuation">{</span><br>  <span class="token property">bleed</span><span class="token punctuation">:</span> 6mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="crop-and-cross-marks" tabindex="-1">Crop and cross marks</h2>
<p>You can add crop marks outside the page box to facilitate the trimming. For professional printing, it's also possible to add registration marks. These are used to align sheets of paper during the printing process.</p>
<p>This two type of marks must be added in the same <code>marks</code> property, you can use either or both of them.</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* To set crop and cross marks */</span><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token property">marks</span><span class="token punctuation">:</span> crop cross<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* To set only crop marks */</span><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token property">marks</span><span class="token punctuation">:</span> crop<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="code-review-for-a-chapter" tabindex="-1">Code Review for a chapter</h2>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> print</span><span class="token punctuation">{</span><br>    <span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>        <span class="token property">size</span><span class="token punctuation">:</span> 140mm 200mm<span class="token punctuation">;</span><br>        <span class="token property">margin</span><span class="token punctuation">:</span> 10mm 15mm<span class="token punctuation">;</span><br>        <span class="token property">bleed</span><span class="token punctuation">:</span> 6mm<span class="token punctuation">;</span><br>        <span class="token property">marks</span><span class="token punctuation">:</span> crop cross<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token atrule"><span class="token rule">@page</span><span class="token punctuation">:</span>left</span> <span class="token punctuation">{</span><br>        <span class="token property">margin-left</span><span class="token punctuation">:</span> 35mm<span class="token punctuation">;</span><br>        <span class="token property">margin-right</span><span class="token punctuation">:</span> 15mm<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token atrule"><span class="token rule">@page</span><span class="token punctuation">:</span>right</span> <span class="token punctuation">{</span><br>        <span class="token property">margin-left</span><span class="token punctuation">:</span> 15mm<span class="token punctuation">;</span><br>        <span class="token property">margin-right</span><span class="token punctuation">:</span> 35mm<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token selector">.chapter</span><span class="token punctuation">{</span><br>        <span class="token property">break-before</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>

      </section>
      
      <section class="data" id="generated-content" >
        <h1></h1>
        <p>One of the important advantages of CSS is that it helps you to separate a document’s style from its content. The separation of HTML from CSS makes it easier to maintain sites, share style sheets across pages, and display documents to different environments. In some case, some elements are not part of the content itself, but are help to read in different environnements. This can be auxiliary information like inserting the word &quot;Figure&quot; before the caption of a figure, or &quot;Chapter 7&quot; before the seventh chapter title.</p>
<p>Those are usually made using CSS <em>generated content</em> properties. That will avoid problems with numbering figures when one is added in the middle of your content. Or if you want to reuse the chapter in another book, and have a new way to number figures.</p>
<p>In technical terms, generated content exists only in the layout of the web document: they are not part of the DOM tree.</p>
<h2 id="the-content-property" tabindex="-1">The content property</h2>
<p>The <code>content</code> property is used within <code>::before</code> and <code>::after</code> pseudo-elements. In the declaration, specify the <code>content</code> property what you want to generate automatically as its value. For example, the following rule inserts the string &quot;Note: &quot; before the every element whose class attribute contains &quot;note&quot;:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.note::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"Note: "</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>You can style the element right where it’s set, like this:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.note::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"Note: "</span><span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><br>  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="generated-text" tabindex="-1">Generated text</h2>
<p>You can directly declare your text in the CSS (like above) but you can also use text specified in a <code>data-</code> custom attribute.</p>
<p>In your HTML:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ref<span class="token punctuation">"</span></span> <span class="token attr-name">data-ref-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0215<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Some blabla as a reference<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<p>In your CSS:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">p.ref::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">attr</span><span class="token punctuation">(</span>data-ref-id<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>It's also possible to combine elements in the content property:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">p.ref::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"Reference "</span> <span class="token function">attr</span><span class="token punctuation">(</span>data-ref-id<span class="token punctuation">)</span> <span class="token string">": "</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Once displayed you will have this text:</p>
<blockquote>
<p><code>Reference 0215: Some blabla as a reference</code></p>
</blockquote>
<h2 id="generated-counters" tabindex="-1">Generated counters</h2>
<p><code>css-counter</code> is a CSS property that lets you count elements within your content. For example, you might want to add a number before each figure caption. To do so, you would reset the counter in the <code>&lt;body&gt;</code> selector, increment it any time a caption appears in the content, and display that number in a <code>::before</code> pseudo-element.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span><br>  <span class="token property">counter-reset</span><span class="token punctuation">:</span> figureNumber<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">figcaption</span> <span class="token punctuation">{</span><br>  <span class="token property">counter-increment</span><span class="token punctuation">:</span> figureNumber<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">figcaption::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>figureNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="generated-images" tabindex="-1">Generated images</h2>
<p>If you need to have an image in your generated content, you can do it like this:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.glossary::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">" "</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"/images/glossary-icon.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="generated-links" tabindex="-1">Generated links</h2>
<p>It can be useful to display the actual links of your content as a long URL when you want to print your webpage. The following example inserts the value of the href attribute in parentheses after each <code>&lt;a&gt;</code> element:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">a::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">" ("</span> <span class="token function">attr</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span> <span class="token string">")"</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="generated-content-for-paged-media" tabindex="-1">Generated content for paged media</h2>
<p>The use of generated content is possible without Paged.js; <code>content</code> is a CSS property implemented in all browsers.</p>
<p>But to design a book (or a paginated content) you need some elements added to help readers navigate between pages: running heads and footers, page numbers, table of content, index, cross-references, etc.</p>
<p>These elements don’t exist in the HTML as a content, you need to create them automatically. To do that you can use a combination of syntaxes and properties that Paged.js implements called Generated Content for Paged Media.</p>

      </section>
      
      <section class="data" id="generated-content-in-margin-boxes" >
        <h1></h1>
        <h2 id="margin-boxes-of-a-page" tabindex="-1">Margin boxes of a page</h2>
<p>A page box consists of two types of area: page area and page margin boxes.</p>
<p>The <strong>page area</strong> is the content area of a page box. It is the space into which all your HTML content will flow. When this content runs out of room, another page will be automatically created. It's what the chunker part of Paged.js do.</p>
<p>The margins of a page are divided into sixteen boxes where you can put generated content like page number and running heads. These boxes are called <strong>margin boxes</strong>.</p>
<p>Each have its own margin, border, padding, and content areas. By default, their sizes are determined by the margin of the page box.</p>
<p>The figure bellow represent the sixteen margin boxes of a page defined by the W3C:</p>
<figure> <img src="/images/margin-boxes.png"  /></figure>
<p>You can select this margins boxes in the <code>@page</code> rules with rules such as <code>@top-left</code>, <code>@bottom-right-corner</code>, <code>@left-middle</code>, etc. You add content in a page-margin box with the <code>content</code> property.</p>
<p>The code below put your title in the <code>@top-right</code> margin box of all right pages:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span><span class="token punctuation">:</span> right</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@top-right</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"My title"</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span> <span class="token punctuation">;</span></code></pre>
<p>List of the margin boxes:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@top-left-corner</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@top-left</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@top-center</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@top-right</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@top-right-corner</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@left-top</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@left-middle</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@left-bottom</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@right-top</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@right-middle</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@right-bottom</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@bottom-left-corner</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@bottom-left</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@bottom-center</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@bottom-right</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@bottom-right-corner</span></span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="page-counter" tabindex="-1">Page Counter</h2>
<p>To define page numbers, Paged.js uses a CSS counter that gets incremented for each new page.</p>
<p>To insert a page number on a page or retrieve the total number of pages in a document, the W3C proposes a specific counter named <code>page</code>. The counters declaration must be used within a <code>content</code> property in the margin-boxes declaration. The following example declares the page number in the bottom-left box:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@bottom-left</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>You can also add a bit of text before the page number:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@bottom-left</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"page "</span> <span class="token function">counter</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>To tally the total number of pages in your document, you can write this:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@bottom-left</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"Page "</span> <span class="token function">counter</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token string">" of "</span> <span class="token function">counter</span><span class="token punctuation">(</span>pages<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p><strong>Reset the page counter</strong></p>
<p>Right now, reseting the page count to 1 is the only possible options. Check <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/91">Issue #31</a> to keep track of that option.</p>
<h2 id="named-string%3A-classical-running-headers%2Ffooters" tabindex="-1">Named String: classical running headers/footers</h2>
<p>The fastest way to create running headers/footers is to use what is already in your content. <strong>Named strings</strong> are used to create running headers and footers: they copy text for reuse in margin boxes.</p>
<p>First, the text content of the selected element is cloned into a named string using <code>string-set</code> with a custom identifier (in the code below we call it “title”, but you can name it whatever makes sense as a variable). In the following example, each time a new <code>&lt;h2&gt;</code> appears in the HTML, the content of the named string gets updated with the text of that <code>&lt;h2&gt;</code>. (It also can be selected with a class if you prefer).</p>
<pre class="language-css"><code class="language-css"><span class="token selector">h2</span> <span class="token punctuation">{</span><br>  <span class="token property">string-set</span><span class="token punctuation">:</span> title <span class="token function">content</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Next, the <code>string()</code> function copies the value of a named string to the margin boxes, via the <code>content</code> property.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@bottom-center</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">string</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>The string property act like a variable. It read your DOM and each time a new title level 2 is encountered, it change the variable from the page where that title appears. This variable is passed into the margin boxes of the page and into all the following margin boxesuntil there is a new title.</p>
<figure> <img src="/images/string-set.png"  /></figure>
<h3 id="select-content-of-string-set" tabindex="-1">Select content of string-set</h3>
<p>This part don't work correctly in Paged.js for now. Issues <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/45">#45</a>, <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/42">#42</a></p>
<p>The documentation need to be finish.</p>
<p>You can specify which part of the element you want to select to construct the value of the named string. This argument is obligatory.</p>
<ul>
<li><code>string-set: &lt;identifier&gt; content(text)</code>: <br> string value of the element (default value)</li>
<li><code>string-set: &lt;identifier&gt; content(first-letter)</code>: <br> first letter of the element (as defined for the <code>::first-letter</code> pseudo-element )</li>
<li><code>string-set: &lt;identifier&gt; content(before)</code>: <br> string value of the <code>::before</code> pseudo-element</li>
<li><code>string-set: &lt;identifier&gt; content(after)</code>:<br> string value of the <code>::after</code> pseudo-element</li>
<li><code>string-set: &lt;identifier&gt; attr(&lt;identifier-attr&gt;)</code>: <br> returns the string value of the attribute define by an attribute identidier (<code>data-attribute</code>, <code>href</code>, <code>title</code>...)</li>
</ul>
<p>It's possible to define multiple value in the same <code>string-set</code>.</p>
<p>Sample:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">h2::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"Chapter "</span> <span class="token function">counter</span><span class="token punctuation">(</span>countChapter<span class="token punctuation">,</span> upper-roman<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">h2</span> <span class="token punctuation">{</span><br>  <span class="token property">string-set</span><span class="token punctuation">:</span> titleBefore <span class="token function">content</span><span class="token punctuation">(</span>before<span class="token punctuation">)</span><span class="token punctuation">,</span> title <span class="token function">content</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@bottom-center</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">string</span><span class="token punctuation">(</span>titleBefore<span class="token punctuation">)</span> <span class="token string">". "</span> <span class="token function">string</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="styling-named-string" tabindex="-1">Styling named string</h3>
<p>The content is copied, so to stylize it you have to apply the styles directly in the margin box.</p>
<p>For example, if you want to capitalize your title and give it a size of 11px:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@bottom-center</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">string</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercasse<span class="token punctuation">;</span><br>    <span class="token property">font-size</span><span class="token punctuation">:</span> 11px<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>This is the DOM created when a named string is &quot;called&quot; into a margin box:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_margin pagedjs_margin-bottom-center hasContent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_margin-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>::after<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>The content of the margin box is insert into the <code>content</code>property of the <code>::after</code> pseudo-element of the <code>div </code> element with “pagedjs_margin-content” class.</p>
<p>You can also use this class and <code>::after</code> pseudo element for styling.</p>
<h2 id="running-elements%3A-headers%2Ffooter-with-specific-(complex)-content" tabindex="-1">Running elements: headers/footer with specific (complex) content</h2>
<p>There are cases where the use of string-set is not suitable for specific or complex running headers and footer. For example, if you need:</p>
<ul>
<li>to keep the HTML tags contained in the header/footer ( <code>&lt;em&gt;</code>, <code>&lt;span&gt;</code>, <code>&lt;br&gt;</code>…),</li>
<li>to insert images or pictograms in the header/footer (with <code>&lt;img&gt;</code> or <code>&lt;svg&gt;</code>),</li>
<li>to shorten a title that is too long and do that in semantically way (do not use the <code>text-overflow: ellipsis;</code> property but replace the title with a piece that means),</li>
<li>to repeat complex elements (adress, contact…) on all pages for document like invoices or reports.</li>
</ul>
<p>For this you can use <strong>running elements</strong> with <code>position</code> property and <code>element()</code> function. The <code>position</code> property removes the element from the normal flow (instead of copying it like <code>string-set</code> property) and moves it to the margin boxes using the <code>element()</code> function.</p>
<p>This technique allows you to keep all the HTML structuring of the element. But you must add dedicated elements in your HTML.</p>
<p>In the following example, we want to keep the italics contains in the title.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chapitre-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>The protagonist of <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span>Macbeth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span>Macbeth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">></span></span> is a tragedy by William Shakespeare; it is thought to have been first performed in 1606. It dramatises the damaging physical and psychological effects of political ambition on those who seek power for its own sake...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre>
<p>First, add dedicated element for running title in your HTML (just after the title) and copy your title inside. Here, it is a paragraph with the class <code>.title</code>.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chapitre-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>The protagonist of <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span>Macbeth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>The protagonist of <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span>Macbeth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span>Macbeth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">></span></span> is a tragedy by William Shakespeare; it is thought to have been first performed in 1606. It dramatises the damaging physical and psychological effects of political ambition on those who seek power for its own sake...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre>
<p>After, set the element’s <code>position</code> to running. Here, “titleRunning” is a custom identifier, you can name it whatever makes sense to you.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.title</span> <span class="token punctuation">{</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">running</span><span class="token punctuation">(</span>titleRunning<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Then, place the element into a margin box with the <code>element()</code> function via the <code>content</code> property:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@top-center</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>titleRunning<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>The <code>.title</code> element is now removed from you flow and repeted into top-center margins of pages. It's act like the named string, if a new <code>.title</code> element is encountered in the the DOM, the element is changed in the new page and the next ones.</p>
<p>Note: The <code>element()</code> function cannot be combined with other possible values for the <code>content</code> property.</p>
<h3 id="styling-running-elements" tabindex="-1">Styling running elements</h3>
<p>Since the element is copied, all styles are copied with it. That is, if you have stylized your <code>.title</code> element, the styles will be kept in the margins.</p>
<p>With the following code, your running header will appear in capital letters and with a size of 11px:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.title</span> <span class="token punctuation">{</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">running</span><span class="token punctuation">(</span>titleRunning<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercasse<span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 11px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@top-center</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>titleRunning<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>This is the DOM created when you move a running element into a margin:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_margin pagedjs_margin-top-center hasContent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagedjs_margin-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>The protagonist of <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span>Macbeth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>You can see that the paragraph is kept in the margin as well as all its content. You can apply styles on the paragraphe or on the margins because of cascading.</p>
<h2 id="select-element-of-the-page-for-running-title%2Fheaders" tabindex="-1">Select element of the page for running title/headers</h2>
<p>The value of a named string or the value of a running element may change several times on a page (for exemple if you have multiple title of the same level in the same page). You can add a second optional argument on the <code>string()</code> function or on the <code>element()</code> function to indicates which element of the page should be used if there is multiple. This argument specify the value of the named string. Can be combined with other possible values for the content property.</p>
<ul>
<li><code>string(&lt;identifier&gt;, first)</code>: <br> Use the value of the first assignment on the page (default)</li>
<li><code>string(&lt;identifier&gt;, start)</code>: <br> Use the value assigned at the start of the page. If the element is the first element on the page, it's this one. If not, it's the element of the previous page.</li>
<li><code>string(&lt;identifier&gt;, last)</code>: <br> Use the value of the last element on the page.</li>
<li><code>string(&lt;identifier&gt;, first-except)</code>: <br> If the value is assigned on the page, the running element don't appears on this page but appears on next pages.</li>
</ul>
<p>The first three argument are usefull for dicitonnary or glossary. The figure below shows which value appears according to the argument:</p>
<figure> <img src="/images/string-argument.png"  /></figure>
<h2 id="delete-generated-content-in-blank-page" tabindex="-1">Delete generated content in blank page</h2>
<p>Forced page breaks can create blank page, e.g., pages automatically added to make sure a new chapter begins on the desired left or right page. The <code>:blank</code> pseudo class selector selects pages that have no content from the flow. To delete the generated content in blank page, simply use <code>content: none</code> in selected margin boxes of the blank pages.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span><span class="token punctuation">:</span> blank</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@top-left</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span> <span class="token punctuation">;</span></code></pre>
<h2 id="styling-margin-boxes-and-generated-content" tabindex="-1">Styling margin boxes and generated content</h2>
<p>You can stylize the margin-boxes by applying styles directly into the at-rules for page-margin boxes.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@top-left</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"My title"</span><span class="token punctuation">;</span><br>    <span class="token property">padding-left</span><span class="token punctuation">:</span> 15mm<span class="token punctuation">;</span><br>    <span class="token property">color</span><span class="token punctuation">:</span> #ff5733<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="default-alignement-of-generated-content" tabindex="-1">Default alignement of generated content</h3>
<p>Each margin box have default alignements for the content (show in the following table). You can easy change it by using <code>text-align</code> and <code>vertical-align</code> properties into at-rules for page-margin boxes.</p>
<h4 id="table-of-default-alignment" tabindex="-1">table of default alignment</h4>
<table>
<thead>
<tr>
<th>Margin box</th>
<th><code>text-align</code></th>
<th><code>vertical-align</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>@top-left-corner</td>
<td>right</td>
<td>middle</td>
</tr>
<tr>
<td>@top-left</td>
<td>left</td>
<td>middle</td>
</tr>
<tr>
<td>@top-center</td>
<td>center</td>
<td>middle</td>
</tr>
<tr>
<td>@top-right</td>
<td>right</td>
<td>middle</td>
</tr>
<tr>
<td>@top-right-corner</td>
<td>left</td>
<td>middle</td>
</tr>
<tr>
<td>@left-top</td>
<td>center</td>
<td>top</td>
</tr>
<tr>
<td>@left-middle</td>
<td>center</td>
<td>middle</td>
</tr>
<tr>
<td>@left-bottom</td>
<td>center</td>
<td>bottom</td>
</tr>
<tr>
<td>@right-top</td>
<td>center</td>
<td>top</td>
</tr>
<tr>
<td>@right-middle</td>
<td>center</td>
<td>middle</td>
</tr>
<tr>
<td>@right-bottom</td>
<td>center</td>
<td>bottom</td>
</tr>
<tr>
<td>@bottom-left-corner</td>
<td>right</td>
<td>middle</td>
</tr>
<tr>
<td>@bottom-left</td>
<td>left</td>
<td>middle</td>
</tr>
<tr>
<td>@bottom-center</td>
<td>center</td>
<td>middle</td>
</tr>
<tr>
<td>@bottom-right</td>
<td>right</td>
<td>middle</td>
</tr>
<tr>
<td>@bottom-right-corner</td>
<td>left</td>
<td>middle</td>
</tr>
</tbody>
</table>
<h3 id="applying-style-on-generated-content" tabindex="-1">Applying style on generated content</h3>
<p>You can specify that some CSS rules only apply to your margin box while others apply to your generated content. It depends on how you created your generated content.</p>
<p><strong>With position: running()</strong></p>
<p>If you have used <code>position: running</code>, the styles applying to the generated content must be declared in the running element and the styles applying to the margin box in the at-rules for page-margin boxes.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.running</span> <span class="token punctuation">{</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">running</span><span class="token punctuation">(</span>chapTitle<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span><br>  <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercase<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@page</span><span class="token punctuation">:</span> left</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@top-left</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>chapTitle<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span><br>    <span class="token property">padding-top</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span> <span class="token punctuation">;</span></code></pre>
<p><strong>With string-set</strong></p>
<p>If you have used <code>string-set</code>, all styles are declared in the margin box and therefore applied to the margin box. If you want certain rules to apply only to the text and not to the entire margin box, you will have to use the classes created by Paged.js to reach the text.</p>
<p>For example, if you use background-color and padding into the at-rules for page-margin box, the style are applied on the margin box.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span><span class="token punctuation">:</span> left</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@top-left</span></span> <span class="token punctuation">{</span><br>    <span class="token property">background-color</span><span class="token punctuation">:</span> #ffd2b5<span class="token punctuation">;</span><br>    <span class="token property">color</span><span class="token punctuation">:</span> #fe4017<span class="token punctuation">;</span><br>    <span class="token property">padding</span><span class="token punctuation">:</span> 2mm 5mm<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span> <span class="token punctuation">;</span></code></pre>
<p>Result:</p>
<figure> <img src="/images/marginbox-style-01.png"  /></figure>
<p>If you want to applied this background-color and padding only on the generated content, you need to applied the style on a special div create by Paged.js: <code>pagedjs_margin-content</code>.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.pagedjs_left_page .pagedjs_margin-top-left .pagedjs_margin-content</span> <span class="token punctuation">{</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> #ffd2b5<span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> #fe4017<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 2mm 5mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Result:</p>
<figure> <img src="/images/marginbox-style-02.png"  /></figure>
<h3 id="define-width-and-height-of-margin-boxes" tabindex="-1">Define width and height of margin boxes</h3>
<p>The height and width of the margin boxes are automatically computed by Paged.js (see &quot;Rendering of margin boxes&quot; below) but you can easily define the size you want using relative (<code>%</code>) or absolute values (<code>mm</code>, <code>in</code>, <code>px</code>).</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@left-top</span></span> <span class="token punctuation">{</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> 28mm<span class="token punctuation">;</span><br>    <span class="token property">height</span><span class="token punctuation">:</span> 10mm<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="rotate-margin-boxes" tabindex="-1">Rotate margin boxes</h3>
<p>By using the <code>tranfsorm()</code> property you can easily rotate the margin-boxes of your document</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@left-top</span></span> <span class="token punctuation">{</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> 28mm<span class="token punctuation">;</span><br>    <span class="token property">height</span><span class="token punctuation">:</span> 10mm<span class="token punctuation">;</span><br>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-90deg<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">transform-origin</span><span class="token punctuation">:</span> top left<span class="token punctuation">;</span><br>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><br>    <span class="token property">top</span><span class="token punctuation">:</span> 28mm<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Result:</p>
<figure> <img src="/images/marginbox-style-03.png"  /></figure>
<h2 id="rendering-of-margin-boxes-with-paged.js" tabindex="-1">Rendering of margin boxes with Paged.js</h2>
<p>Paged.js use CSS grid and flexbox to create the margin boxes of the page. The figures below represent how margin boxes are placed with the div classes used.</p>
<h3 id="margin-boxes-on-the-page" tabindex="-1">Margin boxes on the page</h3>
<figure> <img src="/images/margin-boxes_grid_01.png"  /></figure>
<p>The page consists of four corner margins and four groups of margins placed on a grid with three columns and three rows. The grid use margin variables created by Paged.js based on your margin and page size declarations to set the size of items.</p>
<p><strong>Template of the grid</strong></p>
<pre class="language-css"><code class="language-css"><span class="token selector">.pagedjs_pagebox</span> <span class="token punctuation">{</span><br>  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span><br>    [left] <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-margin-left<span class="token punctuation">)</span><br>    [center] <span class="token function">calc</span><span class="token punctuation">(</span><br>      <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-pagebox-width<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-margin-left<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-margin-right<span class="token punctuation">)</span><br>    <span class="token punctuation">)</span><br>    [right] <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-margin-right<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">grid-template-rows</span><span class="token punctuation">:</span><br>    [header] <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-margin-top<span class="token punctuation">)</span><br>    [page] <span class="token function">calc</span><span class="token punctuation">(</span><br>      <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-pagebox-height<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-margin-top<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-margin-bottom<span class="token punctuation">)</span><br>    <span class="token punctuation">)</span><br>    [footer] <span class="token function">var</span><span class="token punctuation">(</span>--pagedjs-margin-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p><strong>Classes of the corner margins (and position on the page grid)</strong></p>
<ul>
<li>
<p><code>div.pagedjs_margin-top-left-corner-holder</code> (grid-column: <code>left</code> / grid-row: <code>header</code>)</p>
</li>
<li>
<p><code>div.pagedjs_margin-top-right-corner-holder</code> (grid-column: <code>right</code> / grid-row: <code>header</code>)</p>
</li>
<li>
<p><code>div.pagedjs_margin-bottom-left-corner-holder</code> (grid-column: <code>left</code> / grid-row: <code>footer</code>)</p>
</li>
<li>
<p><code>div.pagedjs_margin-bottom-right-corner-holder</code> (grid-column: <code>right</code> / grid-row: <code>header</code>)</p>
</li>
</ul>
<p><strong>Classes of the groups of margins (and position on the page grid)</strong></p>
<ul>
<li>top page margins: <code>div.pagedjs_margin-top</code> (grid-column: <code>center</code> / grid-row: <code>header</code>)</li>
<li>bottom page margins: <code>div.pagedjs_margin-bottom</code> (grid-column: <code>center</code> / grid-row: <code>bottom</code>)</li>
<li>left page margins: <code>div.pagedjs_margin-left</code> (grid-column: <code>left</code> / grid-row: <code>page</code>)</li>
<li>right page margins: <code>div.pagedjs_margin-right</code> (grid-column: <code>right</code> / grid-row: <code>page</code>)</li>
</ul>
<h3 id="group-of-margin-boxes" tabindex="-1">Group of margin boxes</h3>
<p>Each margin group contains three margin boxes contained in a single direction grid (horizontal for top page and bottom page margins; vertical for left page and right page margins).</p>
<figure> <img src="/images/margin-boxes_grid_02.png"  /></figure>
<p><strong>Top page margins</strong></p>
<ul>
<li><code>div.pagedjs_margin-top-left</code> (A)</li>
<li><code>div.pagedjs_margin-top-center</code> (B)</li>
<li><code>div.pagedjs_margin-top-right</code> (C)</li>
</ul>
<p><strong>Bottom page margins</strong></p>
<ul>
<li><code>div.pagedjs_margin-bottom-left</code> (A)</li>
<li><code>div.pagedjs_margin-bottom-center</code> (B)</li>
<li><code>div.pagedjs_margin-bottom-right</code> (C)</li>
</ul>
<p><strong>Left page margins</strong></p>
<ul>
<li><code>div.pagedjs_margin-left-top</code> (A)</li>
<li><code>div.pagedjs_margin-left-middle</code> (B)</li>
<li><code>div.pagedjs_margin-left-bottom</code> (C)</li>
</ul>
<p><strong>Right page margins</strong></p>
<ul>
<li><code>div.pagedjs_margin-right-top</code> (A)</li>
<li><code>div.pagedjs_margin-right-middle</code> (B)</li>
<li><code>div.pagedjs_margin-right-bottom</code> (C)</li>
</ul>
<h3 id="generated-content-into-the-margin-boxes" tabindex="-1">Generated content into the margin boxes</h3>
<p>Each margin box is display with<code>flex</code> and contains a <code>div </code> element with <code>pagedjs_margin-content</code> class in which the generated content will be put. For more details see the two parts above: “Styling named string” and “Styling running elements”.</p>
<h3 id="computation-rules-for-group-of-margin-boxes" tabindex="-1">Computation Rules for group of margin boxes</h3>
<p>If no definited margin boxes size is set in your stylesheet, the boxes of each margin group are automatically calculated according to the following rules.</p>
<ul>
<li>For top and bottom page margins, the height is 100% of the margin box group.</li>
<li>For left and right page margins, the width is 100% of the margin box group.</li>
</ul>
<p>Concerning the width of top and bottom page margins and the height of left and right page margins, the computation rules follows the same patterns. This patterns depends on how many margins are generated (populated) in the group – e.g. if <code>content</code> have been set in the at-rules for page-margin boxes.</p>
<p>Here, to explain this computation rules patterns, we use letters corresponding to the three boxes of each group. “Size” correspond to “width” for top and bottom page margins and the “height” for left and right page margins.</p>
<h4 id="if-only-one-margin-box-are-generated" tabindex="-1">If only one margin box are generated</h4>
<p>If only one of the margin boxes is generate, the margin box will take the full width/height of the margin group.</p>
<figure> <img src="/images/margin-boxes_size_sample-01.png"  /></figure>
<h4 id="if-two-margin-box-are-generated" tabindex="-1">If two margin box are generated</h4>
<p><strong>If A and C are generated</strong></p>
<p>With no size set: the size of B is <code>0</code>, A and C are extended over the size of the margin group. Their size is relative to the length of the generated content.</p>
<figure> <img src="/images/margin-boxes_size_sample-02.png"  /></figure>
<p>With one size set (A or C): he size of B is <code>0</code>. A and C are spread over the size of the margin group. The margin box whose size is not set fills the remaining space in the margin group.</p>
<figure> <img src="/images/margin-boxes_size_sample-03.png"  /></figure>
<p>With the two size set (A and C): A is aligned on the left of the margin group, C is aligned with the right of the margin group. B takes the remaining space but has no content.</p>
<figure> <img src="/images/margin-boxes_size_sample-04.png"  /></figure>
<p><strong>If A and B or B and C are generated</strong></p>
<p>With no size set: the size of the margin-boxes will be relative to the length of the generated content. The one in the center will always be in the middle (“center rule”), i.e. the size of A will always be equal to the size of C.</p>
<figure> <img src="/images/margin-boxes_size_sample-05.png"  /></figure>
<p>With one size set (A, B or C): the other two margins bowes (with no size set) will extent the remaining space. The “center rule” remains valid, so the automatic sizes of the two margin-boxes will be distributed according to this rule.</p>
<figure> <img src="/images/margin-boxes_size_sample-06.png"  /></figure>
<p>With two size set: the two margin boxes with size set will have the declared size. The third margin box (which has no content) will take the size of the remaining space in the group.</p>
<figure> <img src="/images/margin-boxes_size_sample-07.png"  /></figure>
<h4 id="if-all-margin-box-are-generated" tabindex="-1">If all margin box are generated</h4>
<p>If no size set: the size of the margin-boxes will be relative to the length of the generated content. The one in the center will always be in the middle (“center rule”), i.e. the size of A will always be equal to the size of C.</p>
<figure> <img src="/images/margin-boxes_size_sample-08.png"  /></figure>
<p>If one size set (A, B or C): the other two margins bowes (with no size set) will extent the remaining space. The “center rule” remains valid, so the automatic sizes of the two margin-boxes will be distributed according to this rule.</p>
<figure> <img src="/images/margin-boxes_size_sample-09.png"  /></figure>
<p>If two size set: the two margin boxes with size set will have the declared size. The third margin box (which has no content) will take the size of the remaining space in the group.</p>
<figure> <img src="/images/margin-boxes_size_sample-10.png"  /></figure>
<p>If all sizes set: all margins box have the declared size. They will be aligned on the left for top/bottom page margins and on top for left/right margins.</p>
<figure> <img src="/images/margin-boxes_size_sample-11.png"  /></figure>

      </section>
      
      <section class="data" id="supported-feature-of-the-w3c-specifications" >
        <h1></h1>
        <h3>CSS Paged Media Module Level 3</h3>
<p><a href="href="https://www.w3.org/TR/css3-page/">W3C Working Draft 14 March 2013</a></p>
<p><a href="https://drafts.csswg.org/css-page/#marks">Editor’s Draft, 9 November 2017</a></p>
<table class="specs">
<thead>
<tr>
<th colspan="4"><b>@page rules</b></th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="3">Size</td>
<td>size: &lt;length&gt;{1,2} ;</td>
<td><a href="https://s3.amazonaws.com/pagedmedia/pagedjs/specs/page-rules/size/length/length.html">HTML</a></td>
<td><a href="https://s3.amazonaws.com/pagedmedia/pagedjs/specs/page-rules/size/length/length.pdf">PDF</a></td>
</tr>
<tr>
<td>size: A5 | A4 | A3 | B5 | B4 | letter | legal | ledger ;</td>
<td rowspan="1"><a href="https://s3.amazonaws.com/pagedmedia/pagedjs/specs/page-rules/size/page-size/page-size.html">HTML</a></td>
<td><a href="https://s3.amazonaws.com/pagedmedia/pagedjs/specs/page-rules/size/page-size/page-size.pdf">PDF</a></td>
</tr>
<tr>
<td>size: portrait | landscape ;</td>
<td><a href="https://s3.amazonaws.com/pagedmedia/pagedjs/specs/page-rules/size/landscape/landscape.html">HTML</a></td>
<td><a href="https://s3.amazonaws.com/pagedmedia/pagedjs/specs/page-rules/size/landscape/landscape.pdf">PDF</a></td>
</tr>
<tr>
<td>Marks</td>
<td>marks: none | [ crop || cross ] ; </td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/blob/master/specs/marks/marks.html">HTML</a></td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/blob/master/specs/marks/__image_snapshots_linux__/marks-spec-js-marks-should-create-a-pdf-1-snap.png">Screenshot</a></td>
</tr>
<tr>
<td>Bleed</td>
<td>bleed: &lt;length&gt; ;</td>
<td> <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/blob/master/specs/bleed/bleed.html">HTML</a>  </td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/blob/master/specs/bleed/__image_snapshots_mac__/bleed-spec-js-bleed-should-create-a-pdf-1-snap.png">screenshot</a></td>
</tr>
<tr>
<td rowspan="3">Margins</td>
<td>margin: &lt;length&gt;{1,2} ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page/margins/two-lenghts/margins-2-lenghts.html">HTML</a></td>
<td><a href="/uploads/cc36931bb78fe4c5343130a2d9ae64d1/margins-2-lenghts.pdf">PDF</a></td>
</tr>
<tr>
<td>margin-top: &lt;length&gt; ;<br>      margin-bottom: &lt;length&gt; ;<br>      margin-left: &lt;length&gt; ;<br>      margin-right: &lt;length&gt; ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page/margins/four-lenghts/margins-4-lenghts.html">HTML</a></td>
<td><a href="/uploads/d8516dfa7c5a1d14088fd131f563fb40/margins-4-lenghts.pdf">PDF</a></td>
</tr>
<tr>
<td>margin-inside: &lt;length&gt; ;<br>      margin-outside: &lt;length&gt; ;</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td rowspan="3">Background</td>
<td>background-color: ... ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page/background/background-color/background-color.html">HTML</a></td>
<td><a href="/uploads/d535bf49ee2d6fe7b4f0974a941665a2/background-color.pdf">PDF</a></td>
</tr>
<tr>
<td>background-image: url(&lt;url&gt;) ;</td>
<td rowspan="1"><a https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page/background/background-image/background-image.html">HTML</a></td>
<td><a href="/uploads/4223661b63f2c361456cb5a942a12779/background-image.pdf">PDF</a></td>
</tr>
<tr>
<td>background-size: ... ;<br/>background-repeat: ... ;<br/>background-position: ... ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page/background/background-values/background-values.html">HTML</a></td>
<td><a href="/uploads/d7b9c1bdad9709cbdb459ebdc45095cd/background-values.pdf">PDF</a></td>
</tr>
</tbody>
<thead>
<tr>
<th colspan="4"><b>Page selectors</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>Spread</td>
<td>@page :left { }<br>      @page :right { }</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page-selector/page-spread/page-spread.html">HTML</a></td>
<td><a href="/uploads/6d59efe3792651070194cd6fd713ae49/page-spread.pdf">PDF</a></td>
</tr>
<tr>
<td>First page</td>
<td>@page :first { }</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page-selector/first-page/first-page.html">HTML</a></td>
<td><a href="/uploads/cb4c3e06b08905db83cd6cb583173da4/first-page.pdf">PDF</a></td>
</tr>
<tr>
<td>Blank page</td>
<td>@page :blank { }</td>
<td><a https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page-selector/blank-page/blank-page.html">HTML</a></td>
<td><a href="/uploads/014c511eb3b555bf3c46fdbaf50aceb1/blank-page.pdf">PDF</a></td>
</tr>
<tr>
<td><i>n</i>th page</td>
<td>@page :nth(<i>n</i>) { }</td>
<td><a https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page-selector/page-nth/page-nth.html">HTML</a></td>
<td><a href="/uploads/09d3b67b50b393aa87e193779e4703ef/page-nth.pdf">PDF</a></td>
</tr>
</tbody>
<thead>
<tr>
<th colspan="4"><b>Margin boxes</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>Default</td>
<td></td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/margin-boxes/default-text-alignment/margin-boxes-default-text-alignment.html">HTML</a></td>
<td><a href="/uploads/b7dcbfb31bd02b585666daba8769ff14/margin-boxes-default-text-alignment.pdf">PDF</a></td>
</tr>
<tr>
<td>Styles</td>
<td>bakground: ... ;<br/>color: ... ;<br/>border:... ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/margin-boxes/style/margin-boxes-style.html">HTML</a></td>
<td><a href="/uploads/7a1f58ed55214e857cd20989e6fd7392/margin-boxes-style.pdf">PDF</a></td>
</tr>
<tr>
<td>Text alignment</td>
<td>text-align: left | center | right ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/margin-boxes/text-align/margin-boxes-text-align.html">HTML</a></td>
<td><a href="/uploads/8d87c106ebb3d737acb5d1023d0f0e62/margin-boxes-text-align.pdf">PDF</a></td>
</tr>
<tr>
<td>Vertical alignment</td>
<td>vertical-align: top | middle | bottom ;<br/><i>or </i>align-items: flex-start | center | flex-end ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/margin-boxes/vertical-align/margin-boxes-vertical-align.html">HTML</a></td>
<td><a href="/uploads/d7ee3b105bd8813a8f4e2799dbb7fab8/margin-boxes-vertical-align.pdf">PDF</a></td>
</tr>
<tr>
<td>Computed</td>
<td>...</td>
<td>in progress</td>
<td></td>
</tr>
</tbody>
<thead>
<tr>
<th colspan="4"><b>Page-based counters</b></th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="3">counter for page</td>
<td>content : counter(page) ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/counter-page/counter-page.html">HTML</a></td>
<td><a href="/uploads/22a0454f6d1925d89bd9baa7670d573b/counter-page.pdf">PDF</a></td>
</tr>
<tr>
<td>content : counter(pages) ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/counter-pages/counter-pages.html">HTML</a></td>
<td><a href="/uploads/f0d8cb270f4019dac4ad0963f5875857/counter-pages.pdf">PDF</a></td>
</tr>
</tbody>
<thead>
<tr>
<th colspan="4"><b>Named page</b></th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="2">named @page</td>
<td>@page &lt;name&gt; { } <br>section { page: &lt;name&gt; }</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/named-page/named-page/named-page.html">HTML</a></td>
<td><a href="/uploads/6135c29ed8733da2bd2e87717aca74ad/named-page.pdf">PDF</a></td>
</tr>
</tbody>
<thead>
<tr>
<th colspan="4"><b>Page group</b></th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="2">page group</td>
<td>@page &lt;name&gt; { } <br>section { page: &lt;name&gt; }</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/named-page/page-group/page-group.html">HTML</a></td>
<td><a href="/uploads/7cf2105a084ffdcc292e459dae39e797/page-group.pdf">PDF</a></td>
</tr>
</tbody>
<thead>
<tr>
<th colspan="4"><b>Page selectors for page group</b></th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="">Spread</td>
<td>@page &lt;name&gt;:left { }<br/>@page &lt;name&gt;:left { }</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page-selector/page-group/spread-of-page-group/spread-of-page-group.html">HTML</a></td>
<td><a href="/uploads/5218443c7f62008a5dd58ca6932dbfc2/spread-of-page-group.pdf">PDF</a></td>
</tr>
<tr>
<td>First page</td>
<td>@page &lt;name&gt;:first { }</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/page-selector/page-group/first-page-of-page-group/first-page-of-page-group.html">HTML</a></td>
<td><a href="/uploads/99407e57dc1da7a0a2a4e78e1d159781/first-page-of-page-group.pdf">PDF</a></td>
</tr>
<tr>
<td>Blank page</td>
<td>@page &lt;name&gt;:blank { }</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/30">issue#30</a></td>
<td></td>
</tr>
<tr>
<td><i>n</i>th page</td>
<td>@page &lt;name&gt;:nth(<i>n</i>) { }</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/29">issue#29</a></td>
<td></td>
</tr>
</tbody>
</table>
<h3>CSS Fragmentation Module Level 3</h3>
<p><a href="https://www.w3.org/TR/css-break-3/">W3C Candidate Recommendation, 9 February 2017</a></p>
<table>
<thead>
<tr>
<th colspan="4"><b>Breaks Between Boxes</b></th>
</tr>
<tr>
<td rowspan="7">Breaks before</td>
<td>break-before: avoid-page | avoid ;</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>break-before: page ; </td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-before/break-before-page/break-before-page.html">HTML</a></td>
<td><a href="/uploads/59e84cfeab36e16ff972ea2a7d531c6f/break-before-page.pdf">PDF</a></td>
</tr>
<tr>
<td>break-before: left ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-before/break-before-left/break-before-left.html">HTML</a></td>
<td><a href="/uploads/4db5e5f23488f4971436e7f81f9b1b53/break-before-left.pdf">PDF</a></td>
</tr>
<tr>
<td>break-before: right ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-before/break-before-right/break-before-right.html">HTML</a></td>
<td><a href="/uploads/e3b7e12f611c6986a991560c9a603ad6/break-before-right.pdf">PDF</a></td>
</tr>
<tr>
<td>break-before: recto ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-after/break-after-recto/break-after-recto.html">HTML</a></td>
<td><a href="/uploads/379f8598d66c3c233d9340eb415c07dd/break-before-recto.pdf">PDF</a></td>
</tr>
<tr>
<td>break-before: verso ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-after/break-after-verso/break-after-verso.html">HTML</a></td>
<td><a href="/uploads/35f6e1f5d4821eb584371b1baa48fbc6/break-before-verso.pdf">PDF</a></td>
</tr>
<tr>
<td>break-before: column | region;</td>
<td>?</td>
<td></td>
</tr>
<tr>
<td rowspan="7">Breaks after</td>
<td>break-after: avoid-page | avoid ; </td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>break-after: page ; </td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/tree/master/breaks/break-after/break-after-page">HTML</a></td>
<td><a href="/uploads/a6f8a23a94afa3c238aefd1b234f4be5/break-after-page.pdf">PDF</a></td>
</tr>
<tr>
<td>break-after: left ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-after/break-after-left/break-after-left.html">HTML</a></td>
<td><a href="/uploads/43ddeb6dccbb33258ea6ce350aa1bcb1/break-after-left.pdf">PDF</a></td>
</tr>
<tr>
<td>break-after: right ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-after/break-after-right/break-after-right.html">HTML</a></td>
<td><a href="/uploads/898ca2d4fe2c1952cb0c558e1bc73cd7/break-after-right.pdf">PDF</a></td>
</tr>
<tr>
<td>break-after: recto ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-after/break-after-recto/break-after-recto.html">HTML</a></td>
<td><a href="/uploads/75f1ea2d8279fdbbafc4c58dd06bb63e/break-after-recto.pdf">PDF</a></td>
</tr>
<tr>
<td>break-after: verso ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-after/break-after-verso/break-after-verso.html">HTML</a></td>
<td><a href="/uploads/eeac770f9d99b623a72aa62fffe906d2/break-after-verso.pdf">PDF</a></td>
</tr>
<tr>
<td>break-after: column | region ;</td>
<td>?</td>
<td></td>
</tr>
<tr>
<td rowspan="12">Avoid breaks inside</td>
<td>break-inside: avoid ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/breaks/break-inside/break-inside-avoid/break-inside-avoid.html">HTML</a></td>
<td><a href="/uploads/8e2763bb468daad880c75b2b534fba51/break-inside-avoid.pdf">PDF</a></td>
</tr>
<tr>
<td>break-inside: avoid-page ; </td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>break-inside: avoid-column; </td>
<td>?</td>
<td></td>
</tr>
<tr>
<td>break-inside: avoid-region ;</td>
<td>?</td>
<td></td>
</tr>
</thead>
<thead>
<tr>
<th colspan="4"><b>Breaks Between Lines</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>Orphans</td>
<td>orphans: &lt;integer&gt; ;</td>
<td colspan="2">Chrome and blink browsers supports <code>orphans</code> out of the box. Firefox doen't. Check support from <a href="https://caniuse.com/#search=widows">caniuse.com</a></td>
</tr>
<tr>
<td>Widows</td>
<td>widows: &lt;integer&gt; ;</td>
<td colspan="2">Chrome and blink browsers supports <code>widows</code> out of the box. Firefox doen't. Check support from <a href="https://caniuse.com/#search=widows">caniuse.com</a></td>
</tr>
</tbody>
<thead>
<tr>
<th colspan="4"><b>Fragmented Borders and Backgrounds</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>box-decorations</td>
<td>box-decoration-break: slice | clone ;</td>
<td>no</td>
<td></td>
</tr>
</tbody>
</table>
<h3>CSS Generated Content for Paged Media Module</h3>
<p><a href="https://www.w3.org/TR/css-gcpm-3/">W3C Working Draft, 13 May 2014</a></p>
<table>
<thead>
    <tr>
<th colspan="4"><b>Named strings</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>String-set() on elements</td>
<td colspan="3">string-set: [[&lt;custom-ident&gt; &lt;content-list&gt;][, &lt;custom-ident&gt; &lt;content-list&gt;]* ]</td>
</tr>
<tr>
<td rowspan="8"><i>&lt;content-list&gt;</i>=</td>
<td>&lt;string&gt;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/string-set/string/string.html">HTML</a></td>
<td><a href="/uploads/5d980da4c88b94645e4da4bb1fab9236/string.pdf">PDF</a></td>
</tr>
<tr>
<td>content(text)</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/string-set/content/content-text/content-text.html">HTML</a></td>
<td><a href="/uploads/65de35d6dc785600e285ff0e96f4ddf6/content-text.pdf">PDF</a></td>
</tr>
<tr>
<td>content(before)</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/45">Issue#45</a></td>
<td></td>
</tr>
<tr>
<td>content(after)</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/45">Issue#45</a></td>
<td></td>
</tr>
<tr>
<td>content(first-letter)</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/45">Issue#45</a></td>
<td></td>
</tr>
<tr>
<td>counter()</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>counters()</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>attr(&lt;identifier&gt;)</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>String in margin-boxes</td>
<td colspan="3">content: string( &lt;custom-ident&gt; [ , [ &lt;keyword&gt;] ]? )</td>
</tr>
<tr>
<td rowspan="4"><i>&lt;keyword&gt;</i>=</td>
<td>first</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/84">Pending merge request</a></td>
<td></td>
</tr>
<tr>
<td>start</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/84">Pending merge request</a></td>
<td></td>
</tr>
<tr>
<td>last</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/84">Pending merge request</a></td>
<td></td>
</tr>
<tr>
<td>first-except</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/string/first-except/first-except.html">HTML</a></td>
<td><a href="/uploads/835d25249e878e15b436288907d5ffba/first-except.pdf">PDF</a></td>
</tr>
</tbody>
<thead>
<tr>
<th colspan="4"><b>Running elements</b></th>
</tr>
<tr>
<td>Running value on elements</td>
<td> position: running(&lt;custom-ident&gt;) ;</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/running-element/running.html">HTML</a></td>
<td><a href="/uploads/3f21e22849812b0d25754cd9d5ec932d/running.pdf">PDF</a></td>
</tr>
<tr>
<td>Element value in margin boxes</td>
<td> content: element(...) ;<br><i>element( &lt;custom-ident&gt; [ , &lt;keyword&gt; ]? )</i></td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/running-element/running.html">HTML</a></td>
<td><a href="/uploads/3f21e22849812b0d25754cd9d5ec932d/running.pdf">PDF</a></td>
</tr>
<tr>
<td rowspan="4"><i>&lt;keyword&gt;</i>=</td>
<td>first</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>start</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>last</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>first-except</td>
<td>no</td>
<td></td>
</tr>
</thead>
<thead>
<tr>
<th colspan="4"><b>Footnotes</b></th>
</tr>
<tr>
<td>Footnotes area</td>
<td>@footnote{ float: bottom ; }</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>Footnote element</td>
<td>.note { float: footnote ; }</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>Footnote type</td>
<td>footnote-display: block | inline | compact ;</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>Rendering footnotes</td>
<td>footnote-policy: auto | line | block ;</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td rowspan="2">Footnotes counters</td>
<td>::footnote-call { }<br><i>::footnote-call { content: counter(footnote <br>[, &lt;counter-style&gt;, &lt;string&gt;] ; }</i></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>::footnote-marker { }<br><i>::footnote-marker { content: counter(footnote <br>[, &lt;counter-style&gt;, &lt;string&gt;] ; }</i></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>Reset footnotes</td>
<td>@page { counter-reset: footnote ; }</td>
<td>no</td>
<td></td>
</tr>
</thead>
<thead>
<tr>
<th colspan="4"><b>Leaders</b></th>
</tr>
<tr>
<td>leaders</td>
<td>content : leader(&lt;type&gt;) ;</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td rowspan="4"><i>&lt;type&gt;</i>=</td>
<td>dotted</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>solid</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>space</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>&lt;string&gt;</td>
<td>no</td>
<td></td>
</tr>
</thead>
<thead>
<tr>
<th colspan="4"><b>Cross-references</b></th>
</tr>
<tr>
<td rowspan="2">Counter type</td>
<td>content: target-counter(attr(href url), page) ;<br><i>target-counter( &lt;url&gt; , &lt;custom-ident&gt; [ , &lt;counter-style&gt; ]? )</i></td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/blob/master/target/target-counter/target-counter.html">HTML</a><br/>+ <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/46">Issue#46</a></td>
<td><a href="/uploads/5d09dcfac85707bdb2b30f591bed4c37/targer-counter-wrong.pdf">PDF</a></td>
</tr>
<tr>
<td><i>target-counters( &lt;url&gt; , &lt;custom-ident&gt; [ , &lt;counter-style&gt; ]? )</i></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>Text type</td>
<td>content: target-content(attr(href)) ;<br><i>target-text( &lt;url&gt; [ , &lt;keyword&gt; ]? )</i></td>
</tr>
<tr>
<td rowspan="4"><i>&lt;keyword&gt;</i>=</td>
<td>content</td>
<td><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/tree/master/target/target-text/target-text-content">HTML</a></td>
<td><a href="/uploads/8866ea1ba36d87f4c68f1b6c8d3c3747/target-text-content.pdf">PDF</a></td>
</tr>
<tr>
<td>before</td>
<td colspan="2"><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/tree/master/target/target-text/target-text-content">HTML</a></td>
</tr>
<tr>
<td>after</td>
<td colspan="2"><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/tree/master/target/target-text/target-text-content">HTML</a></td>
</tr>
<tr>
<td>first-letter</td>
<td colspan="2"><a href="https://gitlab.coko.foundation/pagedjs/refs-specifications/tree/master/target/target-text/target-text-content">HTML</a></td>
</tr>
</thead>
<thead>
<tr>
<th colspan="4"><b>PDF bookmarks</b></th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="3">Bookmarks</td>
<td>bookmark-level: &lt;integer&gt; ;
</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>bookmark-label: &lt;content-list&gt;
</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>bookmark-state: open | close ;</td>
<td>no</td>
<td></td>
</tr>
</tbody>
</table>

      </section>
      
      <section class="data" id="w3c-specifications-for-printing" >
        <h1></h1>
        <h2 id="w3c-css-modules" tabindex="-1">W3C CSS modules</h2>
<p>For printing pages you need very different rules from those used to display content in the browser. For example, you’ll want to declare fixed sized pages rather than lay out a continuous flow of text. Books also need many specific elements for the printed layout: margins, running headers, page numbers, a table of contents, and so on.</p>
<p>Fortunately the work on CSS at the W3C has resulted in special modules of the CSS standard for managing the layout of a HTML document during printing. These modules can be used in a print stylesheet with the media query <code>@media print{}</code> and will only be applied when<br>
the web page is printed from the browser print dialog to create a PDF.</p>
<ul>
<li><a href="https://www.w3.org/TR/css3-page/">CSS Paged Media Module Level 3</a> “describes the page model that partitions a flow into pages. (…) It adds functionality for pagination, page margins, page size and orientation, headers and footers, widows and orphans, and image orientation.”</li>
<li><a href="https://www.w3.org/TR/css-gcpm-3/">CSS Generated Content for Paged Media Module</a> defines many special requirements for the display of printed document content: running headers and footers, footnotes, generated text for cross-references or table of contents, PDF bookmarks, etc.</li>
<li><a href="https://www.w3.org/TR/css-break-3/">CSS Fragmentation Module Level 3</a> defines how and where CSS boxes can be fragmented, including across page breaks. (This module is not specific for print.)</li>
<li><a href="https://www.w3.org/TR/css-page-floats-3/"> CSS page floats</a> defines how an element is to be removed from the normal flow and instead be placed into a different place depends on page. (<a href="/journal/PagedMediaapproaches:pagefloats/">see the article “Page Media approaches: page floats”</a>)</li>
</ul>
<p>We try to respect the specifications as much as possible, but sometimes, they can be unclear or leave a certain degree of indeterminacy. Thus, Paged.js implementation is made of our own interpretation and when the rules will be implemented by the browsers, they may differ from what we would have built.</p>
<p>At some point, we’ll need things that are not yet thought of by the W3C. Therefore, we may develop our own rules, based on what the community of users needs. We’ll try to take the most appropriate technically to meet the expectations of typographers and designers. In that case, we’ll write down the specifications and share those with the other W3C members.</p>
<h2 id="support-of-w3c-specifications-in-browsers" tabindex="-1">Support of W3C specifications in browsers</h2>
<p>The previous CSS standard modules were written by the World Wide Web Consortium (W3C). W3C publishes documents that define Web technologies (including CSS) which are considered Web Standards. W3C modules are published publicly throughout the process of their development until they are finally released as a <a href="https://www.w3.org/2018/Process-20180201/#rec-publication">W3C Recommendation</a>. The modules we need for pagined media are at various stages of the process, but most are still in the <a href="https://www.w3.org/2018/Process-20180201/#revised-wd">Working Draft</a> stage.</p>
<p>Browser developers can start implementing these recommendations at any point, knowing they may change later, but the developers are not obliged to implement all the CSS specifications until they become W3C Recommendations.</p>
<p>Thankfully, browser developers have already taken some interest in implementing parts of the Paged Media Working Draft standards and <a href="https://caniuse.com/#search=%40page">@page rules have partial support</a> in Chrome, Firefox and IE. But it’s still difficult to use these browsers effectively for the output of paginated content.</p>
<p>So when it comes to producing paginated content from the browser, this is where we are today: the rules for printing web pages from a browser are written, and even standardised, but we can’t as yet use them effectively.</p>
<h3 id="which-browser-to-use%3F" tabindex="-1">Which browser to use?</h3>
<p>We really want Paged.js to work perfectly with all the browsers around, but as we’re writing those words, some are more suitable than others. It depends on the features you want to have for your documents (CSS flexbox, hyphens…). But you also maybe need a browser that take into account the size property to generate PDFs. Here are some explanations to help you choose.</p>
<h4 id="support-of-%40page-%7B-size-%7D" tabindex="-1">Support of @page { size }</h4>
<p>Paged.js acts like a sort of polyfill but there is one thing we can't manage that we need to print correctly: the support by the browser of the <code>@page { size }</code> property. This property will allow you to create a PDF at the right size when it is generated. These property is only supported in some browsers:</p>
<ul>
<li>Chromium</li>
<li>Google Chrome</li>
<li>Brave</li>
<li>Opera</li>
</ul>
<p>We know that many of you are attached to Mozilla Firefox (and so are we). It is still possible to use Paged.js with it but you will have to manually change the PDF size when you generate it (in the custom sizes). Be careful to calculate bleeds and crop marks if you need to add those.</p>
<h4 id="support-of-css-grid" tabindex="-1">Support of CSS grid</h4>
<p>You must also use a recent version of these browsers because we use some CSS grid module properties for the construction of the pages. CSS grid is supported in most browsers since mid-2017. You can see here if your browser supports CSS grid: <a href="https://caniuse.com/#feat=css-grid">https://caniuse.com/#feat=css-grid</a></p>
<h4 id="different-rendering-between-browsers" tabindex="-1">Different rendering between browsers</h4>
<p>The result will not always be the same from one browser to another because they don't use the same browser engine. For example, line-height is not managed in the same way on Firefox and Chrome. The result will also not be the same depending on the OS you are using. For example, hyphenation is managed in Chrome only on Apple OSX.</p>
<p>We recommend staying on the same browser and OS for the design and generation of the PDF to avoid unpleasant surprises.</p>

      </section>
      
      <section class="data" id="named-page" >
        <h1></h1>
        <p>There could be pages in your book that may need their own, more specific layout: different background, different margins, and even different styles from the main rule.<br>
You can use what is called “named pages” to define this. Based on your HTML, you can bind a specific layout to any content.</p>
<p><img src="/images/named-pages.png" alt="How named pages works"></p>
<p>Imagine you want a specific layout for the pages of your frontmatter.</p>
<p>The <code>page</code> property is used to specify a particular type of page. With this property, you define that all sections with the class <code>frontmatter</code> will have a page template named here <code>frontmatterLayout</code>. Note that, page type names are case-sensitive identifiers.</p>
<p>You create also a specific @page rule with the same page type name where you create new properties of the page.</p>
<p>That's how you will do with the code.:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.frontmatter</span> <span class="token punctuation">{</span><br>	<span class="token property">page</span><span class="token punctuation">:</span> frontmatterLayout<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@page</span> frontmatterLayout</span> <span class="token punctuation">{</span><br>	<span class="token comment">/* specifics rules for the frontmatter*/</span><br><span class="token punctuation">}</span></code></pre>
<p>With this rule, each element with the <code>frontmatter</code> class will have a page break by default. A <strong>page group</strong> is created at each instance of elements with the <code>frontmatter</code> class.</p>
<p>It's possible to bind different section to the same @page rule.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">#half-title,<br>#copyright,<br>#table-of-content,<br>#introduction</span> <span class="token punctuation">{</span><br>	<span class="token property">page</span><span class="token punctuation">:</span> frontmatterLayout<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="mix-page-selectors-and-named-pages" tabindex="-1">Mix page selectors and named pages</h2>
<p>You can mix page selectors and named pages.</p>
<p>For example, the first page of each chapter often requires special treatment. You can define a layout for all your chapters and select the first page of each chapter (of each page group).</p>
<p>In the code bellow, each first page of elements with a class <code>chapter</code> are selected:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.chapter</span> <span class="token punctuation">{</span><br>	<span class="token property">page</span><span class="token punctuation">:</span> chapter<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@page</span> <span class="token property">chapter</span><span class="token punctuation">:</span>first</span> <span class="token punctuation">{</span><br>    <span class="token comment">/* specifics rules for first page of each chapter */</span><br><span class="token punctuation">}</span></code></pre>
<p>You can also select the <code>:left</code> and the <code>:right</code> pages of named pages and page groups.</p>
<p>The <code>:nth()</code> and <code>:blank</code> selector doesn't work with named pages for now. But you can use this trick to select the blank pages of named pages:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.pagedjs_chapter_page + .pagedjs_blank_page</span> <span class="token punctuation">{</span><br>	<span class="token comment">/* specific rules for blank pages of named page called "chapter" */</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="priority-of-%40page-rules" tabindex="-1">Priority of @page rules</h2>
<p>In paged.js, the page rules do not apply quite in cascade. The rules are defined by the order of priority below (ranked from lowest to highest priority):</p>
<ul>
<li><code>@page { }</code></li>
<li><code>@page :left { }</code> or <code>@page :right { }</code></li>
<li><code>@page &lt;namedPage&gt; { }</code></li>
<li><code>@page &lt;namedPage&gt; :left { }</code> or <code>@page &lt;namedPage&gt; :right { }</code></li>
<li><code>@page :blank { }</code></li>
<li><code>@page :first { }</code></li>
</ul>
<p>If a CSS property is defined in a lower priority page than another but not in the priority page, then the priority page inherits this property and its value. Otherwise, the property will take the new value defined in the priority page.</p>

      </section>
      
      <section class="data" id="cross-references" >
        <h1></h1>
        <p>Many documents contain internal references like “see chapter 7” or “on page 23”. The reference may change according to your layout (specially page number). So, you can use generated content to create it.</p>
<p>You can use specific values for the content property to automatically create these types of cross-references: <a href="https://www.w3.org/TR/css-gcpm-3/#funcdef-target-counter">target-counter()</a>, <a href="https://www.w3.org/TR/css-gcpm-3/#target-text-function">target-text()</a>. Each of these displays information obtained from the target of a link.</p>
<p>You can use this target-counter() and target-text() functions to create table of content and book indexes for example (see the following parts).</p>
<h2 id="link-targeted" tabindex="-1">Link targeted</h2>
<p>For cross-references, links are used that target anchors in the document.</p>
<p>First of all, in your HTML, you define a relevant element with an unique id in your document. For example, the figure 3 of your document:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>figure</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>figure-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>caption<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Figure 3: an image<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>figure</span><span class="token punctuation">></span></span></code></pre>
<p>In an other place of your HTML, you create a link anchor that refers to the unique identifier of your revelant element:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>see the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#figure-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>figure 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<h2 id="target-counter()" tabindex="-1">Target-counter()</h2>
<p>Generated content are set into your CSS. To find the pages on which the relevant elements appear inside the document, use the <a href="https://www.w3.org/TR/css-gcpm-3/#target-counter">target-counter()</a> function in a <code>content</code> property set into <code>::before</code> or <code>::after</code> pseudo-elements. As all content properties, it can include some text:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.link::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">", page "</span> <span class="token function">target-counter</span><span class="token punctuation">(</span><span class="token function">attr</span><span class="token punctuation">(</span>href url<span class="token punctuation">)</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>This code take all the elements with a class named here <code>link</code> and search the element with the unique identifier specified in the <code>href</code> attribute of each first elements. When your document is rendered, it will generate the page number of the page where the element with the unique identifier appears.</p>
<p>With the example below, the text generated in your document will be “see the figure 3, page 27”.</p>
<p>You can also specified a counter style:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.link::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">target-counter</span><span class="token punctuation">(</span><span class="token function">attr</span><span class="token punctuation">(</span>href url<span class="token punctuation">)</span><span class="token punctuation">,</span> page<span class="token punctuation">,</span> lower-roman<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>For the moment, the <code>targer-counter()</code> function works only with the counter page. That means you can't use counters with other given name.</p>
<h2 id="target-text()" tabindex="-1">Target-text()</h2>
<p>The <a href="https://www.w3.org/TR/css-gcpm-3/#target-text">target-text()</a> function works like targer-counter() but retrieves the text value of the element referred to by the URL. You can use it to have title of chapter for example.</p>
<p>In you HTML, create the title of a chapter with an unique identifier:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chapter-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Chapter 1. The beginning<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></code></pre>
<p>Later in your document, create an link to this chapter:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Some text that refer to the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#chapter-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>chapter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<p>In the CSS, use target-text to generate the cross reference:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.link::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"(see "</span> <span class="token function">target-text</span><span class="token punctuation">(</span><span class="token function">attr</span><span class="token punctuation">(</span>href url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token string">")"</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>The text generated in your document will be “Some text that refer to the chapter (see Chapter 1. The beginning).”</p>
<p>The W3C define an optional second argument specifies what content is retrieved, using the same values as the string-set property (<code>content</code>, <code>before </code>, <code>after</code>, <code>first-letter</code>) but it's not implemented yet in <code>paged.js</code>.</p>
<h2 id="debug" tabindex="-1">Debug</h2>
<p>These functions only take a fragment URL which points to a location in the current document. If there’s no fragment, if the ID referenced isn’t there, or if the URL points to an outside document, the function returns nothing in the case of target-text() and <code>0</code> in the case of target-counter().<br>
However, if your document is long, maybe your target element is not yet loaded and the function also returns nothing or <code>0</code>. Wait until the loading is completed for the page number to be generated.</p>
<p>If your page number seems wrong is maybe because the element that you target is fragmented on several pages. We recommend using short elements to target (chapter titles rather than the entire chapter section).</p>

      </section>
      
      <section class="data" id="handlers-hooks-and-custom-javascript" >
        <h1></h1>
        <p>Paged.js is built as a collection of module that run codes at different moments while creating the layout. This can be helpful if you want to transform long hyperlinks adresses to truncable ones before paged.js look at the content, or if you want to pass some script to balance the amount of lines your titles need once the title is put on the page.</p>
<p>To do that, we need to register a module, and define when its code should be processed.</p>
<h2 id="modules" tabindex="-1">Modules</h2>
<p>Modules are groups of handlers for that apply the layout and styles of a CSS module, such as Generated Content.</p>
<p>New handlers can be registered from <code>import { registerHandlers } from 'pagedjs'</code> or by calling <code>Paged.registerHandlers</code> on an html page.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/pagedjs/dist/paged.polyfill.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>  <span class="token keyword">class</span> <span class="token class-name">MyHandler</span> <span class="token keyword">extends</span> <span class="token class-name">Paged<span class="token punctuation">.</span>Handler</span> <span class="token punctuation">{</span><br>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">super</span><span class="token punctuation">(</span>chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token function">afterPageLayout</span><span class="token punctuation">(</span><span class="token parameter">pageFragment<span class="token punctuation">,</span> page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pageFragment<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  Paged<span class="token punctuation">.</span><span class="token function">registerHandlers</span><span class="token punctuation">(</span>MyHandler<span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<p>Handlers have methods that correspond to the hooks for the parsing, layout and rendering of the Chunker and Polisher. Returning an promise or <code>async</code> function from a method in a handler will complete that task before continuing with the other registered methods for that hook.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Previewer</span><br><span class="token function">beforePreview</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> renderTo<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">afterPreview</span><span class="token punctuation">(</span>pages<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Chunker</span><br><span class="token function">beforeParsed</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">afterParsed</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">beforePageLayout</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">afterPageLayout</span><span class="token punctuation">(</span>pageElement<span class="token punctuation">,</span> page<span class="token punctuation">,</span> breakToken<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">afterRendered</span><span class="token punctuation">(</span>pages<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Polisher</span><br><span class="token function">beforeTreeParse</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> sheet<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">beforeTreeWalk</span><span class="token punctuation">(</span>ast<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">afterTreeWalk</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> sheet<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">onUrl</span><span class="token punctuation">(</span>urlNode<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">onAtPage</span><span class="token punctuation">(</span>atPageNode<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">onRule</span><span class="token punctuation">(</span>ruleNode<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">onDeclaration</span><span class="token punctuation">(</span>declarationNode<span class="token punctuation">,</span> ruleNode<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">onContent</span><span class="token punctuation">(</span>contentNode<span class="token punctuation">,</span> declarationNode<span class="token punctuation">,</span> ruleNode<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Layout</span><br><span class="token function">layoutNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">renderNode</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> sourceNode<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">onOverflow</span><span class="token punctuation">(</span>overflow<span class="token punctuation">,</span> rendered<span class="token punctuation">,</span> bounds<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">onBreakToken</span><span class="token punctuation">(</span>breakToken<span class="token punctuation">,</span> overflow<span class="token punctuation">,</span> rendered<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="some-informations-about-the-hooks" tabindex="-1">Some informations about the hooks</h3>
<p>Here is some information about some hooks, the documentation remains to be completed. Their execution order is not quite the same as the one presented and corresponds rather to the different modules that constitute Paged.js</p>
<h4 id="previewer" tabindex="-1">Previewer</h4>
<table>
<thead>
<tr>
<th>Hook</th>
<th style="text-align:center">Hooks order</th>
<th style="text-align:right">Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>beforePreview(content, renderTo)</code></td>
<td style="text-align:center">Before pagedjs is launched [Warning : event does not trigger]</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td><code>afterPreview(pages)</code></td>
<td style="text-align:center">After PagedJS finished running (check afterRendered(pages)</td>
<td style="text-align:right"><code>pages</code> → array that contains all page nodes</td>
</tr>
<tr>
<td></td>
<td style="text-align:center"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h4 id="chuncker" tabindex="-1">Chuncker</h4>
<table>
<thead>
<tr>
<th>Hook</th>
<th style="text-align:center">Hooks order</th>
<th style="text-align:right">Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>beforeParsed(content)</code></td>
<td style="text-align:center">runs on content before it is parsed and given IDs</td>
<td style="text-align:right"><code>content</code> → document-fragment made from the original DOM</td>
</tr>
<tr>
<td><code>afterParsed(parsed)</code></td>
<td style="text-align:center">runs after the content has been parsed but before rendering has started</td>
<td style="text-align:right"><code>parsed</code> → content once parsed and given ids (data-ref and break rules from the css)</td>
</tr>
<tr>
<td><code>beforePageLayout(page)</code></td>
<td style="text-align:center">runs when a new page has been created</td>
<td style="text-align:right"><code>page</code> → node of the page that’s gonna be created</td>
</tr>
<tr>
<td><code>afterPageLayout(pageElement, page, breakToken)</code></td>
<td style="text-align:center">runs after a single page has gone through layout, and allows adjusting the breakToken</td>
<td style="text-align:right"><code>pageElement</code> → page element that just been rendered, <br> <code>page</code> → node of the page being rendered,<br> <code>breakToken</code> → location of the beginning of the overflow</td>
</tr>
<tr>
<td><code>afterRendered(pages)</code></td>
<td style="text-align:center">runs after all pages have finished rendering</td>
<td style="text-align:right"><code>pages</code> → array that contains all page nodes</td>
</tr>
<tr>
<td></td>
<td style="text-align:center"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td></td>
<td style="text-align:center"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h4 id="polisher" tabindex="-1">Polisher</h4>
<table>
<thead>
<tr>
<th>Hook</th>
<th style="text-align:center">Hooks order</th>
<th style="text-align:right">Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>beforeTreeParse(text, sheet)</code></td>
<td style="text-align:center">runs every time a style element or a link to a css file is called (worked also on @import)</td>
<td style="text-align:right"><code>text</code> → innerText of the css, <br> <code>sheet</code> → cssTree parsed object (AST object)</td>
</tr>
<tr>
<td><code>beforeTreeWalk(ast)</code></td>
<td style="text-align:center">runs before the stylesheet has been parsed by csstree</td>
<td style="text-align:right"><code>ast</code> → csstree parsed object</td>
</tr>
<tr>
<td><code>afterTreeWalk(ast, sheet)</code></td>
<td style="text-align:center">runs after the stylesheet has been parsed by csstree</td>
<td style="text-align:right"><code>ast</code> → csstree parsed object, <br> <code>sheet</code> → object that contains text and ast</td>
</tr>
<tr>
<td><code>onUrl(urlNode)</code></td>
<td style="text-align:center">runs any time a CSS URL is parsed</td>
<td style="text-align:right"><code>urlNode</code> → url origin</td>
</tr>
<tr>
<td><code>onAtPage(atPageNode)</code></td>
<td style="text-align:center">runs any time a CSS @page is parsed</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td><code>onRule(ruleNode)</code></td>
<td style="text-align:center">runs any time a CSS rule is parsed</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td><code>onDeclaration(declaration, dItem, dList, rule)</code></td>
<td style="text-align:center">runs any time a CSS declaration is parsed</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td><code>onContent(contentNode, declarationNode, ruleNode)</code></td>
<td style="text-align:center">run every time a css content property is found</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td></td>
<td style="text-align:center"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td></td>
<td style="text-align:center"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td></td>
<td style="text-align:center"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h4 id="layout" tabindex="-1">Layout</h4>
<table>
<thead>
<tr>
<th>Hook</th>
<th style="text-align:center">Hooks order</th>
<th style="text-align:right">Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layoutNode(node)</code></td>
<td style="text-align:center">When a node is layed out <br> (Tips: layoutNode is the original node from the content)</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td><code>renderNode(node, sourceNode)</code></td>
<td style="text-align:center">When a node is rendered <br> (Tips: renderNode is the cloned node that is added to the DOM)</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td><code>onOverflow(overflow, rendered, bounds)</code></td>
<td style="text-align:center">When an element overflows: when it’s bigger than the remaining space on the page</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td><code>onBreakToken(breakToken, overflow, rendered)</code></td>
<td style="text-align:center">When a breakToken is defined</td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h2 id="some-examples" tabindex="-1">Some examples</h2>
<h3 id="cleaning-hyperlinks-for-the-print" tabindex="-1">cleaning hyperlinks for the print</h3>
<p>HTML5 has this unknown element called <code>wbr</code> which represents a line break opportunity, which you can translate into “I don’t have enough space to put the line of text, but thanksfully, i have those small element that i can cut!” Using this, we wouldn’t have any problem with line flowing outside of the page, or arbitrary cuts in the text that we want to avoid. Exactly what we need.</p>
<p>So let’s say that we have some written down hyperlinks that we want to clean and make ready for printing. Let’s create a new Paged.Handler</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">linkCleaning</span> <span class="token keyword">extends</span> <span class="token class-name">Paged<span class="token punctuation">.</span>Handler</span> <span class="token punctuation">{</span><br>  <span class="token comment">// this let us call the methods from the the chunker, the polisher and the caller for the rest of the script</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span>chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">beforeParsed</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">//   Before the content is parsed by Paged.js, please do the follwing:</span><br><br>    <span class="token comment">// first, look for all the links &lt;a> that are referencing a link started by http or www</span><br>    <span class="token keyword">const</span> links <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'a[href^="http"], a[href^="www"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// for each of those links,</span><br>    links<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">link</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token comment">// Break after a colon or a double slash (//) or before a single slash (/), a tilde (~), a period, a comma, a hyphen, an underline (_), a question mark, a number sign, or a percent symbol.</span><br>      <span class="token keyword">const</span> content <span class="token operator">=</span> link<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span><br>      <span class="token keyword">let</span> printableUrl <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/\/</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"//\u003Cwbr\u003E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      printableUrl <span class="token operator">=</span> printableUrl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\,</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">",\u003Cwbr\u003E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// put a &lt;wbr> element around to define where to break the line.</span><br>      printableUrl <span class="token operator">=</span> printableUrl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><br>        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\/|\~|\-|\.|\,|\_|\?|\#|\%)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><br>        <span class="token string">"\u003Cwbr\u003E$1"</span><br>      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// turn hyphen in non breaking hyphen</span><br>      printableUrl <span class="token operator">=</span> printableUrl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\-</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"\u003Cwbr\u003E&amp;#x2011;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// add a data-print-url to keep track of the previous link</span><br>      link<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"data-print-url"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// modify the inner text of the link</span><br>      link<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> printableUrl<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// and we don’t forget to register the handler like this</span><br><br>Paged<span class="token punctuation">.</span><span class="token function">registerHandlers</span><span class="token punctuation">(</span>linkCleaning<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Calling this script right after paged.js will run it before the content is parsed.</p>
<h3 id="adding-a-class-to-an-image-based-on-its-ratio" tabindex="-1">Adding a class to an image based on its ratio</h3>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">imageRatio</span> <span class="token keyword">extends</span> <span class="token class-name">Paged<span class="token punctuation">.</span>Handler</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span>chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">afterParsed</span><span class="token punctuation">(</span><span class="token parameter">parsed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// create an array that will store the images data later on</span><br>    <span class="token keyword">let</span> imagePromises <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token comment">// find all images parsed by paged.js</span><br>    <span class="token keyword">let</span> images <span class="token operator">=</span> parsed<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// for each image</span><br>    images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token comment">// load the image as an object</span><br>      <span class="token keyword">let</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// test if the image is loaded</span><br>      <span class="token keyword">let</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">;</span><br>      <span class="token keyword">let</span> imageLoaded <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span> x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        resolve <span class="token operator">=</span> r<span class="token punctuation">;</span><br>        reject <span class="token operator">=</span> x<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// when the image loads</span><br>      img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// find its height</span><br>        <span class="token keyword">let</span> height <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalHeight<span class="token punctuation">;</span><br><br>        <span class="token comment">// find its width</span><br>        <span class="token keyword">let</span> width <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalWidth<span class="token punctuation">;</span><br><br>        <span class="token comment">// calculate the ratio</span><br>        <span class="token keyword">let</span> ratio <span class="token operator">=</span> width <span class="token operator">/</span> height<span class="token punctuation">;</span><br><br>        <span class="token comment">// if the ratio is superior than 1.4, set it as a lanscape adn add a class to the image (and to the parent figure)</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>ratio <span class="token operator">>=</span> <span class="token number">1.4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          image<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"landscape"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>          image<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"fig-landscape"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token comment">// if the ratio is inferior than 0.8, set it as a portrait adn add a class to the image (and to the parent figure)</span><br>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ratio <span class="token operator">&lt;=</span> <span class="token number">0.8</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          image<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"portrait"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>          image<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"fig-portrait"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token comment">// else, if it’s between 1.39 and 0.8, add a “square” class.</span><br>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ratio <span class="token operator">&lt;</span> <span class="token number">1.39</span> <span class="token operator">||</span> ratio <span class="token operator">></span> <span class="token number">0.8</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          image<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"square"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>          image<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"fig-square"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token comment">// resolve the promise</span><br>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">;</span><br>      <span class="token comment">// if there is an error, reject the promise</span><br>      img<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>      img<span class="token punctuation">.</span>src <span class="token operator">=</span> image<span class="token punctuation">.</span>src<span class="token punctuation">;</span><br><br>      imagePromises<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>imageLoaded<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>imagePromises<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// and we register the handler</span><br><br>Paged<span class="token punctuation">.</span><span class="token function">registerHandlers</span><span class="token punctuation">(</span>imageRatio<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

      </section>
      
      
      <section class="data" id="c-and-f-editions">
        <h1></h1>
        <p>C&amp;F started to use Paged.js in 2019 to start the collection called Interventions, and Nicolas Taffin started to experiment a lot of things around Paged.js.</p>

      </section>
      
      <section class="data" id="les-sculptures-de-la-villa-romaine-de-chiragan">
        <h1></h1>
        <p>The Saint-Raymond Museum of Archeology of Toulouse used Paged.js to generate the printed version of their digital catalog.</p>

      </section>
      
      <section class="data" id="city-fab2">
        <h1></h1>
        <p>CityFab 2 is a fablab in Brussels. Amélie Dumond has been comissioned to design and produce the documentation for the Fablab.<br>
The result is a book of 460 page made with paged.js.</p>

      </section>
      
      <section class="data" id="controverses-mode-d&#39;emploi">
        <h1></h1>
        <p><em>Controverses</em> is a digital book that explore modern controversies and analyses how sciences and techniques interact with society. The book is  322 pages.</p>

      </section>
      
      <section class="data" id="situer-le-numerique">
        <h1></h1>
        <p><em>Situer le numérique</em> is a book by Gauthier Roussilhe, that looks at the tensions between the digital world and the environment.</p>

      </section>
      
      <section class="data" id="walden-pond">
        <h1></h1>
        <p><em>Walden Pond</em> is a little paper zine that comes once a month in the mail. It’s full of a selection of the articles you’ve saved to Pocket, so you know that you’re interested in everything inside. Each issue has over an hour of reading, the battery will never run out, it’s clear in bright sunlight and has a low-latency pen interface (or pencil).</p>

      </section>
      
      
      <section class="data" id="the-plan">
        <h1></h1>
        <blockquote>
<p>“Polyfill is the greek word for hack” — Dave Cramer</p>
</blockquote>
<p>A polyfill is a bit of code used to simulate features in a browser that doesn’t support them yet. For a while, using svg in the browser was made using the <code>svgweb.js</code> library, able to convert those code into shapes on screen. And then, browsers evolved and once they managed to support svg without help, <code>svgweb</code> wasn’t really useful anymore.</p>
<p>Paged.js is a <em>polyfill</em> for all the features for print that folks have been pushing to the W3C. With a slight distinction, since the printing module of the browsers are not really available through javascript as browsers use other dependencies to print paper or generate PDF. And since we can’t really do anything to that PDF generator, Paged.js is cheating a little bit by faking the result of the printing process on the screen: we can preview the page, its margins, by recreating the html and css that will be rendered on screen and then we can print this whole preview.</p>
<p>We’re simulating print on screen, and by doing so, we’re blurring a little bit the distinction between the print and screen medias of the css, since we’re translating print for the screen. And this gives us superpowers, simply by giving acces to the inspector, to explore the source code of our printed page. And we can do a lot to those pages before printing them, as we’d design a website, using css and javascript, and we can also transform the content as it’s being deployed on the page: for example, you can calculate the size of an image and automatically decide if there is enough room on the page, or if you want to move it to the next and keep the  rest of the text flowing.</p>
<p>Possibilities are endless, and you can do a pretty good automated layout, and yet you can still have a typesetter or a designer clean up everything.</p>
<p>This <s>hack</s> polyfill has become the main feature of Paged.js: web designer could start to work on printed stuff without having to leave the tool they know and love, graphic desginers who were used to <em>wysiwyg</em> got a place to try webdesign tools in the most tangible way, using a finished canvas instead of this infinite screen, and industries could use web2print and single source publishing ideas and keep the workers to make sure the quality is still there.</p>
<p>This is the work of the polyfill: prove that something works by offering the features and find users to promote them, and then disappear as the browsers took over the work. And then Chromium, starting from version 131, supports the <code>margin-boxes</code> allowing users to add content in the margins of a printed media, without the need of showing them on screen. This signal that things finally get to move in the CSSPrint world is amazing, and we’be been waiting for decades (literally), which forces us to ask ourselves: what shall we do with Paged.js and how should we move around this evolution. Right now, there is no plan to quit Paged.js: browsers only support a tiny tiny bit of what Paged.js support, and when i say browser, it’s only really chromium and blink-based browsers. But we need to take into account those changes, and find the right spot to stand on to make sure that what we want to be able to do for print with web technologies get in.</p>
<p>For now, you can still use Paged.js as you would normally, there may be some bugs here and there, but nothing you can’t override with hooks or Paged.js fixes. That said, as the browsers ship features for print, Paged.js will need to evolve to either support them, or support the browser implementation. Let’s take a look at a simple example: let’s say we have a table of content, and that Chrome supports <code>target-counter</code> (which is not yet the case but let’s assume it will at some point). So Paged.js will find this <code>target-counter</code> and convert it to what it needs to be, and then Chrome will do the exact same thing, and the table of content will show the same page number twice, which is definitely what we don’t want to happen. So which one should we use and in which cases?</p>
<p>Until we spend enough time of work that, Gijs, Fred and myself will be working on figuring it out. And to do so, we made the decision of modularizing Paged.js into smaller dependencies that we’ll be able to update as time goes by, making sure that we could replace some bits wihtout having to throw everything away everytime a new feature appears.</p>
<h3 id="let%E2%80%99s-get-practical" tabindex="-1">Let’s get practical</h3>
<p>Paged.js works on 3 pillars, that are a bit complex to define, because they’re too much intertwined, but let’s try it anyway.</p>
<ul>
<li>the <code>chunker</code> is the module in charge of placing elements on the page, find the overflow, mark the spot of the break, add a new page, and keep doing it. The paper cutter for the web.</li>
<li>the <code>polisher</code> is in charge of locating the stylesheets, and styles and mark the content that will need some custom transformation for print: avoiding page break, changing colors when on a new page. It reads the CSS, transform the HTML, before pages are generated</li>
<li>the <code>previewer</code> is the main orchestrator of this whole little world, managing all the little tasks that all the other modules run.</li>
</ul>
<p>Those three bits will change. Some will be quite transformed, others will be a tiny bit changed and we’ll be quite precautionous to make sure that, if someone followed the W3C specs for print, then they’ll be able to keep using their code without any changes. If you did have some specific custom hooks, some things may change a bit, but we’ll explain those as we go.</p>
<p>First change: the <code>chunker</code> will soon be its own javascript library. It will be able to take a content, fill an <code>HTML element</code> with it, and return the overflowing bit and the multiple break tokens. Paged.js will use that library as a dependency, and it will help us quite a lot to test new HTML elements and new CSS features without having to run Paged.js. The second interesting bit of that is that we’ll be able to run multiple chunkers in multiple places, allowing for very complex layout with multiple flows or customs side/margin notes, or, in another context, it will allow for chained block, like you would have in a classic book designing program. We also want to change how the overflow is found in today’s Paged.js and instead of stoping as soon as something overflow, we want to let the browser do its job and find the overflow after, using the <code>Interesection Observer API</code></p>
<p>Second change, the creations of a set of <code>web-component</code> for print that Paged.js will use instead of the template literals we have today. <code>&lt;paged-page&gt;</code> will generate a page on screen ready to be printed. This component will come with their own CSS and javascript for print and will ease some of the work we do for customizing pages (to allow for PDF with different page sizes and orientation). These components will be usable without Paged.js and will simplify any project that would need a preview on screen for printed matters.</p>
<p>Third change, we’re replacing <code>CSS Tree</code> with <code>CSS OM</code>. The idea is to avoid the preprocessing of any CSS. This will give us more control on what CSS we’ll polyfill. This will give us more stability over time, and reduce dependencies as much as possible.</p>
<p>There are a bunch of other changes in the pipes, including some update on the website (which is almost completely updated as you can now participate in its translations to any language you’d like). a rewriting of all the documentation that will include a real developer docs for contributors and a better css print 101., from the long awaited dev documentation for the development of the library and an update of the user manual (more like a CSS print course), and we’re now thinking of who should take part in the governance of Paged.js future.</p>
<p>There a lot on the plates.</p>

      </section>
      
      <section class="data" id="paged.js-next-tables-des-matieres">
        <h1></h1>
        <blockquote>
<p>« Polyfill is the greek work for hack » — Dave Cramer</p>
</blockquote>
<p>Un <code>polyfill</code> est un bout de code utilisé pour fournir des fonctionnalités récentes dans les navigateurs qui ne les supporte pas encore. Pendant longtemps, l’usage de svg dans le navigateur dépendait de l’utilisation de svgweb.js, une bibiliothèque capable de transformer les svg en éléments visible à l’écran. Et puis les navigateurs ont été mis à jour, et svgweb.js n’est quasiment plus utile.</p>
<p>Paged.js est un <em>polyfill</em> pour les fonctionnalités d’impression du navigateur proposés par le W3C. Avec une légère distinction, puisque le module d’impression des navigateurs n’est pas vraiment accessible depuis javascript, puisque les navigateurs dépendent d’autres dépendances qui s’occupent de produire les fichiers pour l’imprimante (ou le PDF). Et comme on ne peut pas vraiment changer ça, on a un peu triché : on ne touche pas au moteur de fabrication de pdf, mais on fait en sorte qu’à l’écran se trouve tout la page, ses marges, ses attributs de livre, et on imprime le tout en faisant bien attention à ne pas mettre de marge dans la fenêtre d’impression.</p>
<p>On simule donc l’imprimé à l’écran, et, se faisant, on triche avec la distinction qui est faite entre le media écran et le média paginé dans le css: <code>@print</code> qui devrait ne toucher que le print est en fait visible à l’écran. Et cette distinction donne des superpouvoirs, puisqu’on accède à l’inspecteur, comme un code source de notre page imprimé. On peut ainsi lui faire subir des transformations que les outils classiques (Julie dirait les <em>wysiwyg</em>) ne permettent pas si facilement : un exemple tout bête, on pourrait calculer la taille que prend une image selon un certain layout, pour voir si, à la mise en page, elle pourrait être déplacée ailleurs dans la page.</p>
<p>Les possiblités sont infinies, et s’il est possible de se passer d’un éxécutant pour automatiser une mise en page, il est très simple de lui donner les moyens d’améliorer le résultat.</p>
<p>Ce <s>hack</s> <em>polyfill</em> est devenu avec le temps la principale <em>feature</em> de Paged.js : les designers web ont pu faire du print sans avoir à apprendre un autre outil,  les graphistes qui le souhaitaient ont trouvé un terrain de jeu pour apprendre le web dans un univers moins complexe à appréhender que la page web infinie de l’écran, et l’industrie a pu utiliser les principes du « web2print » pour automatiser au maximum des publications tout en gardant la main sur les changements nécessaires à assurer la qualité de la mise en page.</p>
<p>Voilà le travail du polyfill : prouver qu’un usage peut exister en le rendant possible, trouver les utilisateurs pour promouvoir son usage, et disparaître quand les navigateurs ont fait le travail.</p>
<p>Et voilà Chromium qui, depuis sa version 131, supporte l’utilisation des <code>margin-box</code>, donnant la possibilité à l’utilisateur de poser des choses dans des marges qui ne se voient pas à l’écran mais qui sont visibles une fois imprimé. Ce signal que les choses avancent pour le print est aussi le moment de se poser la question de quoi faire de Paged.js. Non pas qu’il faille abandonner l’outil, seul Chromium bouge pour l’instant, et les fonctionnalités proposées sont bien loin de tout le nécessaire à la fabrication d’un document imprimé complet, mais ça nous pousse à trouver comment se positionner.</p>
<p>Pour l’instant, on peut continuer à utiliser Paged.js tel quel, j’imagine quelques bugs par-ci par là, mais rien qui ne devrait tout casser trop vite. Par contre, au fur et à mesure que les fonctionnalités approchent, il va falloir les intégrer. Prenons un exemple simple: j’ai une table des matières et j’utilise un CSS spécifique pour ajouter les numéros de page. Si Paged.js le fait ET chrome le fait aussi, est-ce que le numéro de page doit être doublé? est-ce qu’on va vouloir préféré ce que produit Paged.js ou ce que produit chrome?</p>
<p>Ces questions là n’ont pas de réponses simples, mais nécessite un travail de recherche dans lequel Gijs, Fred et moi-même allons plonger. Et pour assurer l’atterissage, nous avond décidé de modulariser Paged.js pour pouvoir en remplacer des bouts sans avoir à tout jeter avec le temps.</p>
<p>Cette longue intro va nous permettre de comprendre les décisions que nous avons prises et que nous allons mettre en place d’ici juin 2026, comme la suite logique pour pouvoir continuer à « polyfiller » ce qui manque dans les navigateurs, tout en mettant en avant les possibilités de design qu’offre l’inspecteur.</p>
<h2 id="en-pratique" tabindex="-1">En pratique</h2>
<p>Paged.js fonctionne sur 3 pilliers qu’on a toujours eu du mal à définir par ce que très liés. Voyons un peu les modules:</p>
<ul>
<li>
<p>le <code>chunker</code> est le module qui se charge de poser les éléments sur la page, trouver ce qui en dépasse et marquer la localisation exacte du point de coupe, ajouter une nouvelle page, et continuer le boulot. Un massicot pour page web.</p>
</li>
<li>
<p>le <code>polisher</code> qui lui s’occupe de trouver dans les feuilles de styles les éléments qui devront subir un traitement spécifique pour l’impression: marque les sauts de page, les changements de contenus, etc. Il lit le css et modifie le HTML, avant que les pages ne soient construites.</p>
</li>
<li>
<p>le <code>previewer</code> est l’orchestrateur de tout ce petit monde, puisqu’il déclenche les différentes étapes de Paged.js, utilisant des bouts du polisher et du chunker à la volée.</p>
</li>
</ul>
<p>Ces trois modules vont subir des changements plus ou moins importants. (Nous avons pour ambition de les rendre les plus transparents possibles pour qu’une utilisatrice de Paged.js qui suive scrupuleusement les spécifications du W3C puissent continuer à utiliser son travail sans avoir à tout refaire).</p>
<p>Premier changement de taille, nous allons sortir le chunker de Paged.js et en faire une bibliothèque javascript capable de couler un contenu dans un élément, de définir le (ou les) surplus, pour de retourner toutes ces informations. Un usage probable de cette bibliothèque, à long terme, est la fabrication d’un système de blocs chaînés comme on peut en trouver dans les logiciels de mise en page. Et Paged.js utilisera cette bibliothèque pour fabriquer les pages, les colonnes, les notes, les éléments dans les marges. En plus de cette bibliothèque, nous voulons changer l’algo pour trouver les breaktokens : au lieu de couper la page dès que quelque chose dépasse, nous voulons utiliser l’API <em>IntersectionObserver</em> pour trouver les éléments qui devront être coupés.</p>
<p>Deuxième changement, c’est la création de <code>web-component</code> pour le print et que Paged.js utilisera comme une dépendance. <code>&lt;paged-page&gt;</code> permettra de prévisualiser une page à l’écran, qui viendra avec le css et le js nécessaire à son impression, nous permettant de produire des PDF avec des pages de tailles différentes à la volée (ce qu’on fait avec des plugins et des <em>hacks</em> partout dans Paged.js). Nous avons bon espoir que cette nouvelle dépendance va nous permettre d’accueillir des contributions plus facilement et de proposer des outils supplémentaires pour le CSS Print.</p>
<p>Troisième changement, c’est le remplacement de <code>CSS Tree</code> par l’implémentation du <code>CSS Object Model</code> des navigateurs. L’idée est de ne plus avoir à lire les feuilles de styles en amont pour laisser le navigateur faire tout le travail. Ça nous donnera aussi plus de stabilité et, à long terme, nous pourrons réduire les dépendances à leur strict minimum.</p>
<p>Il y a aussi quelques changements prévus (dont le changement de moteur du site pour la mise en place du multilingue, et l’écriture de documentation pour les dév et les utilisateurs) et une réflexion sur la gouvernance de Paged.js à long terme et son financement.</p>
<p>On ne va pas chômer :)</p>

      </section>
      
      <section class="data" id="paged.js-next-chapter">
        <h1></h1>
        <p>I can still picture the room where Adam Hyde put Fred Chasen and myself around the table, looking at options for making pdf from html, and, while we couldn’t find a way that was satisfying enough, he looked at us, and said: “let’s just make it”.</p>
<p>And then we started, and very early in the process, Julie Blanc joined, and in a couple of months we had a working proof of concept, and in not so much more, a full fledge library. All that was possible thanks to all the energy and ressources that Adam and Coko put into the project.</p>
<p>At that time, paged.js was all about showing how CSSPrint could make single source publishing a reality since we would take care of the PDF/print world. Most of our work was about helping folks who wanted to implement paged.js in their workflows, or build use case around it and we were spending a lot of energy on workshops, book fair, user support and demo projects. Plus, with the hook systems, people would run their own javascripts and manage to do amazing publications, from vote ballots, to complex (almost) automatic layouts: we were mostly helping folks implementing complex algorythm for print or even implementing some of it ourselves.</p>
<p>At some point, we were doing more work to help users with paged.js than we spent updating paged.js core code, features or documentation nor keep the community in the loop of what’s what happening.</p>
<p>So let’s change that, welcome to paged.js 2.0</p>
<h2 id="didn%E2%80%99t-you-skip-a-number%3F-where-is-1.0%3F" tabindex="-1">Didn’t you skip a number? Where is 1.0?</h2>
<p>The idea we had with paged.js was that, at some point, the browser would do the work of supporting paged media specs and folks could get rid of paged.js and simply use the browser for all their pdf needs, and we could stop working on it. But what we discovered on the path is that paged.js is more than a polyfill for the future features, it’s also a gateway to css print because of the preview you get on the screen.</p>
<p>In short, when you use paged.js, the library will take your html and css, find all the properties used for print (@page, margin-boxes, target-counter, etc.), and replace them with html and css to have, on screen, what will appear on paper. This allows you to inspect your pages, look at the css, test changes in the context and run paged.js again. And print from the browser, which doesn’t use the css for print, but the converted css you have on the screen.</p>
<p>And then, Chromium team did what we wanted them to do before paged.js: they started to implement print features, <a href="https://developer.chrome.com/blog/new-in-chrome-131">starting with the margin-boxes</a>. Hopefully, it will push the other engines to do their work. But, in the meantime, things get tricky for paged.js.</p>
<p>Supporting chromium updates would mean transforming paged.js in such a way that firefox or other browsers would be left behind, which goes against our goals. Yes, we did repeat that chromium was better because it allows for custom page sizes and manage widows and orphans better, but Firefox, or Safari, or any other browser would still be a valid option.</p>
<p>Therefore paged.js need to change a bit to support more context of use and more engines and this is such a breaking changes that we’ll jump on paged.js 2.0 very quickly.</p>
<h2 id="so-long-paged.js%2C-hello-paged.js-neue" tabindex="-1">So long paged.js, hello paged.js neue</h2>
<p>First, paged.js members are part of a NGIzero supported project, <a href="https://nlnet.nl/project/CSS-Print/">Pushing forward for CSS Print</a>, for which we’re joining force with the lovely Lucie and Guillaume of Weasyprint (a python based engine to make PDF out of HTML and CSS) to push #CSSprint forward. We’ll write down new specifications to print with CSS and implement them in weasyprint and paged.js, in order to push the conversation forward with the W3C folks. (You can check our <a href="link">Notes on notes</a> to see some examples of what we could do).</p>
<p>Second, Paged.js has also been accepted for a NGIzero grant to support the important structural update of paged.js and its dependencies. This plan of update includes a lot of breaking changes: removing CSSTree to replace it with cssOM, use web-components for pages, and document, transform the chunker into its own library, change the algorythm that find breaktoken, allows for multiple break tokens, etc. We’ll cover more of that in the future updates on the blog, as soon as we have a proper calendar to share. The grant is only available for a year so that’s already a nice information.</p>
<h3 id="meet-the-team" tabindex="-1">Meet the team</h3>
<p>First, Gijs de Heij is joining the team as a core maintainer. While Fred is working a fulltime position at Mozilla, we decided to redraw a bit how the team work around paged.js. Instead of putting everything of Fred’s shoulders, we’re moving toward a team of core developpers, as Gijs and myself will be more involved into paged.js development by contributing codes, features and managing user support.</p>
<p>Gijs is an amazing designer / developer, part for quite some time now of the Open Source Publishing collective, and he’s been working with paged.js for quite a long time to now what work, what doesn’t, what need a work around and how to make it work anyway.</p>
<p>As Fred’s time is reduced, his work on paged.js will be less visible, and if Julie officially stopped working on paged.js when she started working on her thesis <a href="http://phd.julie-blanc.fr/"> “Composer avec les technologies du web ” </a> (<em>Composing with web technologies. Collective instrumental genesis for the development of a community of practice of graphic designers</em>). The thesis observes how paged.js was used by graphic designers to share knowledge and build communities, and she defended it with talent, and she’s now Julie Blanc, PhD. Even if she has many others things to attend to, she’s still around paged.js quite a lot, and part of the Weasyprint × Paged.js project.</p>
<p>Coko has been supporting paged.js for all of us for a long time, and we wouldn’t be where we are now if it wasn’t for Adam Hyde’s time, energy, trust and generosity. I don’t think i’ll ever thank him enough for all the support he gave to each one of us. And even if Coko is not financially supporting paged.js anymore, Adam is still around to help, and we wouldn’t like it any other way.</p>
<h3 id="on-paged.js-future" tabindex="-1">on paged.js future</h3>
<p>This post is already too long (and i wrote it in french &amp; english, maybe i’m the one who find it long). So, to not take too much of your time, a couple of info:</p>
<ul>
<li>
<p>Paged.js a mastodon account on fosstodon: <a href="https://fosstodon.org/@pagedjs">https://fosstodon.org/@pagedjs</a>, we don’t use the twitter one anymore.</p>
</li>
<li>
<p>Paged.js code is now on github, same for the website, and we’re slowly bringing back some of the plugins and stuff we did here and there. (<a href="https://github.com/pagedjs/">https://github.com/pagedjs/</a>)</p>
</li>
<li>
<p>We’re now available on contact at pagedjs dot org</p>
</li>
<li>
<p>Paged.js now has a Matrix channel. Come to chat and discuss the futur with us: <a href="https://matrix.to/#/#pagedjs:matrix.org">https://matrix.to/#/#pagedjs:matrix.org</a></p>
</li>
<li>
<p>The website is now fully internationalized. Thanks for the amazing amazing (not a typo, i wrote it twice) <a href="https://11ty.dev">Eleventy</a>. You can now join the translation effort if you feel like it :D.</p>
</li>
</ul>
<p>There are a bunch of other things to share in the coming weeks, from pagedjs structural changes to documentation update/rewriting (for devs &amp; users), and other things we want to bring back (plugins, templates, etc.)</p>
<p>With the hope that you’ll want to take part in Paged.js future, as you may have done before.</p>
<p>See yall very soon.</p>
<p class="signature">
julientaq 
</p>

      </section>
      
      <section class="data" id="le-prochain-chapitre-de-paged.js">
        <h1></h1>
        <p>Je me souviens précisément de la pièce où, accompagné d’Adam Hyde et de Fred Chasen, nous regardions les possibilités existantesp pour transformer du HTML en PDF, et alors qu’on ne trouvait rien de probant, Adam s’est arrêté, nous a regardé et à dit : <em>Let’s just make it</em>.</p>
<p>Et nous voilà partis. Julie Blanc nous a rejoint très vite, et au bout de quelques mois nous avions un preuve de concept fonctionnelles, et en moins d’un an, une bibliothèque javascript capable de produire des PDF. Rien de tout ça n’aurait pu être possible si Adam et Coko n’avaient pas autant investi de temps et de ressources dans le projet.</p>
<p>Les années qui ont suivi ont surtout été le moment de mettre le <em>CSS Print</em> sur le devant de la scène, comme pierre angulaire du <em>single source publishing</em>. La majorité de notre travail consistait à accompagner les utilisateurs de paged.js, que ce soit pour de accompagner des implémentations &amp; des workflows, former des designers et des éditeurs aux concepts de <code>web to print</code>, participer à des salons du livres et évenements professionnels, et, lorsqu’il restait un peu de temps, accompagner des projets de livres numériques multi-formats.</p>
<p>Avec Paged.js et son système de hooks, on a vu apparaître une quantité importante de documents produits avec Paged.js, qu’il s’agisse de rapports scientifiques, de bulletins de vote US, d’articles scientifique à la mise en page quasi automatique, et c’est avec une grande fierté que nous avons pu participer à quelques-uns de ces chantiers.</p>
<p>Mais ce travail a un coût et si on a pu accompagner des projets, nous n’avons pas été des plus efficace pour tenir au courant la communauté des changements, mises à jour et autres expérimentations.</p>
<p>Il est temps de changer ça et de passer à paged.js 2.0</p>
<h2 id="2.0-%3F-mais-o%C3%B9-est-pass%C3%A9-la-1.0-%3F" tabindex="-1">2.0 ? Mais où est passé la 1.0 ?</h2>
<p>Une idée que nous avons gardé en tête depuis le début de paged.js était que, tôt ou tard, les navigateurs allaient implémenter les fonctionnalités que nous utilisons si bien qu’à la fin, nous pourrions nous séparer de paged.js pour de bon. Mais ce que nous avons réalisé en chemin, c’est que le polyfill n’est qu’un usage restreint de Paged.js qui passe à côté de sa fonctionnalité principale: la prévisualisation à l’écran de ce que donnera le document imprimé permet d’imaginer les usages futurs du CSS Print.</p>
<p>Pour faire simple, paged.js va lire votre HTML et votre CSS, va trouver les fonctionnalités utilisées pour le print (<code>@page</code>, <code>.footnote</code>, etc.), et va les convertir en HTML et CSS que le navigateur va pouvoir afficher à l’écran, rendant possible l’usage de l’inspecteur, meilleur ami de tout bon développeur web, pour imprimer la page en utilisant la fonction <code>save as PDF</code> du module d’impression. Dès lors, le navigateur n’imprime plus seulement la feuille de style pour le print, mais aussi ce que l’utilisateur voit dans sa fenêtre. Plus vraiment un <em>polyfill</em> mais un nouvel outil.</p>
<p>La deuxième chose importante date de fin 2024, quand l’équipe derrière Chrome décide d’augmenter la voilure sur l’implémentation des features de print, <a href="https://developer.chrome.com/blog/new-in-chrome-131">en commençant avec les <code>margin-boxes</code></a>. Bonne nouvelle, CSSPrint avance, autre bonne nouvelle, mais plus technique, paged.js doit évoluer.</p>
<p>Si l’on transforme paged.js pour suivre les mises à jour de chromium, alors paged.js devra tellement changer que les autres navigateurs risqueraient d’être abandonné. Même si chromium a une petite longueur d’avance sur quelque fonctionnalité que nous utilisons déjà (en particulier les veuves et les orphelines, ou la possibilité d’imprimer d’autres formats que les standards), nous continuons de penser que chaque navigateur est une option solide pour imprimer.</p>
<p>Alors il faut changer la façon dont paged.js fonctionne pour être plus stable avec plus de moteur de rendu, et comme il va y avoir un nombre de changement important, passer à paged.js 2.0 nous semble être la meilleure solution.</p>
<h2 id="paged.js-neue" tabindex="-1"><em>Paged.js neue</em></h2>
<p>D’abord, les bonnes nouvelles.</p>
<p>NLNet, par le biais de NGI 0 accompagne cette transformation de paged.js sur plusieurs  projets.</p>
<p>Le premier, <a href="https://nlnet.nl/project/CSS-Print/">Pushing forward for CSS Print</a> est une mission partagée entre l’équipe de WeasyPrint (les fantastiques Lucie et Guillaume) et Julie Blanc et Julien Taquet (moi-même), contributeurs de Paged.js. Ce projet finance l’écriture de spécifications pour le CSS Print pour aller plus loin que ce que nous pouvons faire aujourd’hui. La pemière de ces spécifications est la continuité du travail que nous avons commencé sur les notes. La spécification est en cours de discussion et va intégrer les conversations avec les W3C (vous pouvez la lire et la commenter ici : <a href="">https://css-print-lab.github.io/specs/notes-in-css-print/</a>).</p>
<p>NlNet finance aussi un second projet, autour de la mise à jour de paged.js vers le 2.0. Parmi les changements qui arrivent on trouve le remplacement de cssTree par CSSOM, l’utilisation de web-components pour la partie dev, sortir le chunker de paged.js pour en faire une dépendance et permettre l’utilisations de plusiers breakTokens. Nous reviendrons là-dessus plus en détail dans les semaines qui arrivent avec un calendrier plus clair. Le financement ne peux durer qu’un an, ça donne une petite idée de la vitesse avec laquelle nous devons avancer.</p>
<h3 id="la-nouvelle-%C3%A9quipe." tabindex="-1">La nouvelle équipe.</h3>
<p>Depuis que Fred a intégré Mozilla à temps plein, le temps qu’il peut fournir à paged.js s’est sensiblement réduit. Nous avons décidé de lui alléger un peu les épaules en transformant un peu l’équipe autour de paged.js</p>
<p>Le premier changement est l’arrivée de Gijs de Heij dans la <em>core team</em>. Gijs est un designer/developer, membre du collectif Open Source Publishing et manipule paged.js depuis suffisament longtemps pour savoir ce qui marche et ce qui va poser problème :)</p>
<p>Le second changement est mon implication dans le code de paged.js. Jusqu’à présent, il s’agissait d’accompagner Fred et de tester les changements pour en rendre compte à la communauté ou proposer des plugins. Je serai beaucoup plus partie prenante dans la mise à jour du code, l’implémentation de features et l’écriture de spécifications, en plus de m’assurer que tout le monde soit ravi, que les frustrations soient réduites et que les contributeurs se sentent à l’aise.</p>
<p>Sur le reste de l’équipe, Fred est toujours là, mais son temps sera forcément moindre, et si Julie ne fait plus partie officiellement de l’équipe depuis qu’elle a commencé à écrire sa thèse (dont le sujet ne peux être plus dans le mille: <a href="http://phd.julie-blanc.fr/"> “Composer avec les technologies du web ” </a>, et qu’elle a soutenu avec la plus jolie des réussites), elle n’est jamais vraiment loin de l’équipe, ni des questions qui nous concernent.</p>
<p>Coko a été un super espace dans lequel dévlopper paged.js et nous ne serions pas là où on en est sans le temps, l’énergie, la confiance et la générosité d’Adam Hyde, et si Coko ne participe plus au financement de paged.js, Adam n’est jamais loin pour nous aider.</p>
<h2 id="%C3%A0-propos-du-futur-de-paged.js" tabindex="-1">À propos du futur de paged.js</h2>
<p>Ce poste de blog est déjà trop long, alors je ne vais pas vous prendre plus de temps, mais je dois dire en quelques mots:</p>
<ul>
<li>Paged.js a un compte <a href="https://fosstodon.org/@pagedjs">mastodon</a> :)</li>
<li>Le code de paged.js et son site internet sont maintenant hébergés sur Github (<a href="https://github.com/pagedjs/">https://github.com/pagedjs/</a>), et nous sommes en train de rapatrier ce qui traîne sur des repos ici et là sur les différents serveurs git que nous avons pu utiliser.</li>
<li>Nous sommes joignables par mail contact at pagedjs dot org</li>
<li>Pagedjs a maintenant un channel Matrix pour discuter du futur du projet <a href="https://matrix.to/#/#pagedjs:matrix.org">https://matrix.to/#/#pagedjs:matrix.org</a></li>
<li>Le site de paged.js a subi la mise à jour du fantasique <a href="https://11ty.dev">Eleventy</a> et permet donc l’internationalisation de tous ses contenus. Sérieusement je crois pas qu’il y ait meilleur générateur de site statique.</li>
</ul>
<p>Nous avons pas mal de choses dans les cartons, en particulier sur la partie réécriture de la documentation (de développement ET pour les utilisateurs) avec l’espoir de trouver la bonne solution pour que, si vous souhaitiez participer à son élaboration, nous puissions vous accueuillir du mieux possible.</p>
<p>On se retrouve très vite.</p>
<p class="signature">
julientaq 
</p>

      </section>
      
      <section class="data" id="so-long-@media-screen!">
        <h1></h1>
        <p>Hey folks.</p>
<p>Yesterday night, our amazing Fred Chasen jumped the gun and pushed the 0.4.0 to<br>
npm, making it the base version for any of you who use npm without version<br>
control, or simply call from the unpkg cdn (or any other cdn).</p>
<p>That means that if you opened your previous file without knowing what would<br>
happen, you must have had a bit of a scary moment. Don’t worry too much,<br>
the breaking changes were not about how paged.js works, but more on how Paged.js<br>
previews things on screen.</p>
<h2 id="i-want-to-go-back-to-have-a-preview-on-screen!" tabindex="-1">I want to go back to have a preview on screen!</h2>
<p>Yep! Absolutely, it’s (one of) the great features of Paged.js, and we have a<br>
couple of solutions for you.</p>
<p>We explained it last time (<a href="https://pagedjs.org/posts/paged-break-the-long-overdue-update/">you can read the post<br>
here</a>, but we<br>
moved forward to follow the standards for the media queries. So, from now on,<br>
pagedjs  will ignore any rule that should not apply to a media screen. <code>@media screen</code> being the most useful example.</p>
<p>The most standard change, for all of you, is the preview on screen: if you want<br>
to use the <code>interface.css</code> we’re making, you can simply update and use the<br>
<a href="https://gitlab.coko.foundation/pagedjs/interface-polyfill/blob/master/interface.css">https://gitlab.coko.foundation/pagedjs/interface-polyfill/blob/master/interface.css</a><br>
for version 0.4.</p>
<p>Note that if you have some css for the screen that you want to force pass to the<br>
browser (for example to allow an UI around paged.js) then you can use the<br>
pagedjs-ignore property in the html <code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;screen.css&quot; pagedjs-ignore&gt;</code> or in the css : <code>@media screen, pagedjs-ignore {  .pagedjs_pages {margin-top: 20em}  }</code></p>
<p>Again, the previous post will tell you all about it. The good thing is that the<br>
styles for the screen and the paper will stop hurting each other.</p>
<h2 id="enough-with-breaking-changes%2C-we-want-features!" tabindex="-1">Enough with breaking changes, we want features!</h2>
<p>And features you’ll get! Here are the release notes from the merge requests,<br>
explained.</p>
<h3 id="you-can-now-have-multiple-nested-named-pages%3A" tabindex="-1">You can now have multiple nested named pages:</h3>
<p>Until now, you could only have one level of named page. This will fix that by<br>
allowing nested named pages. For example, if this is your html</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preamble<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>This is a preamble.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>and this is your css</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.content</span> <span class="token punctuation">{</span><br>  <span class="token property">page</span><span class="token punctuation">:</span> contentpage<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.preamble</span> <span class="token punctuation">{</span><br>  <span class="token property">page</span><span class="token punctuation">:</span> preamble<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br></code></pre>
<p>then the Preamble will be on its own page!</p>
<h3 id="we-have-an-index-for-all-the-tests-we-have-in-pagedjs-(we-call%E2%80%99em-specs)" tabindex="-1">We have an index for all the tests we have in pagedjs (we call’em specs)</h3>
<p>An image is better than a long talk right? So this is what we support.</p>
<p><img src="https://gitlab.coko.foundation/pagedjs/pagedjs/uploads/9eca40bdccceabcc39f8e17105a3a834/Screen_Shot_2022-07-13_at_12.57.16_PM.png" alt="An image showing the specs that pagedsjs supports as specs we can test"></p>
<p>Ok, so no, the image is not always better, especially as it’s an inaccessible<br>
way to show information. So if you want to see what we support, you may want to<br>
go there too: <a href="https://pagedjs.org/documentation/cheatsheet/">https://pagedjs.org/documentation/cheatsheet/</a> It’s needs a bit of<br>
an update so feel free to open an issue and help us writing down the most<br>
accurate feature list we can have. Please be in touch at<br>
<a href="https://mattermost.coko.foundation">https://mattermost.coko.foundation</a></p>
<h3 id="tables-improvement." tabindex="-1">Tables improvement.</h3>
<p>Paged.js used to cut table at the first block of text overlapped the page height,<br>
and this caused a column shifting beteen pages.  While this was very fun to look<br>
at, it was a real pain for people who worked with tables. So this is now a bit<br>
better.</p>
<p>Fred also fixed an issue where multiline content would break tables after a<br>
page break.</p>
<p>Tables are still problematic when they get long and overly complex but<br>
we’ll get there eventually.</p>
<h3 id="there-is-a-new-hook-in-town." tabindex="-1">There is a new hook in town.</h3>
<p>Say hello to <code>finalizePage</code>. This hook runs just before the page is considered<br>
rendered, after page layout is completed. When paged.js is done with the<br>
<code>afterPageLayout</code> if run <code>finalizePage</code>. This allow us to manage any changes<br>
that occurred in layout or when generated content was added.</p>
<h3 id="looping-is-gone-(but-being-a-loop%2C-it-may-be-back)" tabindex="-1">Looping is gone (but being a loop, it may be back)</h3>
<p>A looping in Paged.js world is when a code tries to do something, can’t do it and<br>
tries again. and again. and again. The best example we have of that is when you<br>
try to add an image on the page and there is not enough room for it. Paged.js<br>
will create a new page, try to  put the image  on the page, and again, and<br>
again, and starting to go into that infinite loop that never end.</p>
<p>From now on, Paged.js 0.4 will gracefully stop when that happens.</p>
<h3 id="one-but-not-least" tabindex="-1">One but not least</h3>
<p>You can now reuse attributes from your element as information for your running<br>
headers:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>funny-p<span class="token punctuation">"</span></span> <span class="token attr-name">data-fun</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>total<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>this is so nice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<p>With that css :</p>
<pre class="language-css"><code class="language-css"><br><span class="token selector">#funny-p</span> <span class="token punctuation">{</span><br>  <span class="token property">string-set</span><span class="token punctuation">:</span> alphabet <span class="token function">attr</span><span class="token punctuation">(</span>data-fun<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span></code></pre>
<p>will allows you to reuse the attribute as part of your generated content:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@bottom-center</span></span> <span class="token punctuation">{</span><br>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">string</span><span class="token punctuation">(</span>alphabet<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>this will put in the margin bottom of the page the word <code>total</code>, since it’s the<br>
value of the <code>data-fun</code> attribute</p>
<p>Better, you can now  have multiple string-set, if they are separated with<br>
commas:</p>
<pre class="language-css"><code class="language-css"><br><span class="token selector">h1</span> <span class="token punctuation">{</span><br>  <span class="token property">string-set</span><span class="token punctuation">:</span> titletext <span class="token function">content</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">,</span> datafun <span class="token function">attr</span><span class="token punctuation">(</span>data-fun<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<p>That’s all folks!</p>
<p>We’ll be back soon with some nice example of Paged.js!</p>
<p>Take care</p>

      </section>
      
      <section class="data" id="paged-break-the-long-overdue-update">
        <h1></h1>
        <p>It’s been a while, hasn’t it?</p>
<p>That’s how it feels for us. Not that we weren’t around working, quite the opposite to be honest, but it wasn’t very visible outside of the <a href="https://mattermost.coko.foundation">Coko chat</a> (You should join if you’re interested in the future of Paged.js as we try more and more to discuss things in the open out there). We also try to offer some news on <a href="https://twitter.com/paged_js">Twitter</a>, so make sure to follow if you want some last-minute news, or if you want to ask some questions a little bit.</p>
<p>Still, it feels nice to fill those pages after a year of being silent so let’s try to catch up to what happened as we’ve been a tiny bit busy.</p>
<p>Before we get into that, we had to move our repo from the GitLab we had at <a href="http://pagedmedia.org">pagedmedia.org</a> to <a href="http://localhost:8080/posts/paged-break-the-long-overdue-update/">https://gitlab.coko.foundation</a>. Because Paged.js is maintained by the <a href="https://coko.foundation">Coko Foundation</a> and also because we got hit quite hard by a crazy spam that literally killed the server again and again. We’re now in a much better space as the nice folks of <a href="https://cloud68.co">cloud68.co</a> are now in charge of making our life easier, and they’re quite good at it. We managed to save the important repos and all the comments and conversations, thanks to Boris.</p>
<p>Ok, back to Paged.js</p>
<p>Between June last year and this month of July, we’ve been through a lot of small changes, going from 0.2.0 to 0.4.1 beta (we do have beta now!)</p>
<p>Before explaining the changes, a small shout-out to our friendly users who came up with fixes. So thanks to Anthony Libotte, Guillaume Grossetie, Thomas Parisot, Angela Liu to name a few (along with the amazing work from Fred Chasen).</p>
<p>We won’t spend too much time on the small fixes as they’re mostly updates to preexising features, including, better support for footnotes, a new div to be able to center things vertically, and those kinds of things. The release note for each merge request tells more than what I could write here.</p>
<p>But then, here are the breaking changes.</p>
<h2 id="goodbye-web2print%2C-hello-web%2Bprint" tabindex="-1">Goodbye web2print, hello web+print</h2>
<p>A reminder: Paged.js is a polyfill, a Javascript library that does what the browser should be doing by itself. That means that what you do with Paged.js today needs to be what you will be able to do in Chromium, Firefox, Edge, Vivaldi, etc in future -- one day, the browsers will have implemented the print feature and when that happens, we won’t need Paged.js anymore</p>
<p>To be a working polyfill, Paged.js needs to work exactly like a browser.</p>
<p>In a browser, when we set @media queries, we can define styles for a specific environment. We know that well because that’s how responsive design works: you define what happens when the usable surface is smaller than 800px @media (max-width: 800px) or when night mode is wanted  @media (prefers-color-scheme: dark) or simply when you want to print something with @media print.</p>
<p>If you don’t set any query, then your CSS will be used in all situations.</p>
<p>So a simple example: we have some <code>&lt;h1&gt;</code> and we want them to have a font-size of 2em in all situations, but we want them red on screen, black on paper. This is how it will be set.</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* shared for all the context */</span>  <br><span class="token selector">h1</span> <span class="token punctuation">{</span>  <br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>  <br><span class="token punctuation">}</span>  <br>  <br><span class="token comment">/* only for screen */</span>  <br><span class="token atrule"><span class="token rule">@media</span> screen</span> <span class="token punctuation">{</span>  <br>  <span class="token selector">h1</span> <span class="token punctuation">{</span>  <br>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>  <br>  <span class="token punctuation">}</span>  <br><span class="token punctuation">}</span>  <br>  <br><span class="token comment">/* only for print */</span>  <br><span class="token atrule"><span class="token rule">@media</span> print</span> <span class="token punctuation">{</span>  <br>  <span class="token selector">h1</span> <span class="token punctuation">{</span>  <br>    <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>  <br>  <span class="token punctuation">}</span>  <br><span class="token punctuation">}</span></code></pre>
<p>Until now, you needed to have a custom stylesheet for pagedjs to handle what happens in print and on screen. If there were some styles defined for the screen in the stylesheet, they were also rendered in the preview.</p>
<p>In the example above, it takes the latest value defined in the CSS cascade:  the h1 would be black on screen and on paper.</p>
<p>That’s the result of rendering the print preview on screen, creating the perfect paradox where eveything is used. Paged.js tricked the browser to show you the styles from the CSS for print, in a screen context, because we preview those pages, on a screen.</p>
<p>Now, with this new feature, Paged.js will  hide what’s for the screen and show what will be printed. Starting with version 0.4.1, Paged.js will stop parsing any css that is inside a @media screen media query. In other words:</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* This will be completely remove from the page when you run Paged.js */</span>  <br><span class="token atrule"><span class="token rule">@media</span> screen</span> <span class="token punctuation">{</span>  <br>  <span class="token selector">p</span> <span class="token punctuation">{</span>  <br>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>  <br>  <span class="token punctuation">}</span>  <br><span class="token punctuation">}</span>  <br>  <br><span class="token comment">/* this will be used by Paged.js */</span>  <br><span class="token atrule"><span class="token rule">@media</span> print</span> <span class="token punctuation">{</span>  <br>  <span class="token selector">p</span> <span class="token punctuation">{</span>  <br>    <span class="token property">color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span>  <br>  <span class="token punctuation">}</span>  <br><span class="token punctuation">}</span>  <br>  <br><span class="token comment">/* this will be used by Paged.js as it an equivalent of @media all */</span>  <br><span class="token selector">p</span> <span class="token punctuation">{</span>  <br>  <span class="token property">color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span>  <br><span class="token punctuation">}</span></code></pre>
<p>But as we’re moving toward html AND print, we needed to change Paged.js a bit. In the previous <a href="https://pagedjs.org/posts/2020-04-15-starterkits-for-pagedjs/">post from Julie</a>, she showed how we could create a designer interface around the paged.js preview feature: show baseline, show margin boxes, etc. To make that work, she added content as a hook: when paged.js was done, it would show the toolbar, making it hard to work with (and absolutely not standard). This update will change that.</p>
<p>So now, if you want to use the polyfill and have have elements just for the screen preview, you can use one of the following ways:</p>
<p>Put all the interface rules in a seperate stylesheet that has a media=&quot;screen&quot; attribute, which won’t be parsed by the polyfill and only applied to screen media:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen.css<span class="token punctuation">"</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
<p>Or add a media=&quot;screen&quot; attribute to any style tag to apply those rules to screen media and be ignored by Pagedjs:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">  <br>  <span class="token selector">p</span> <span class="token punctuation">{</span>  <br>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>  <br>  <span class="token punctuation">}</span>  <br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>
<p>Additionally, you can tell Paged.js to ignore <em>any</em> CSS you don’t want parsed with the pagedjs-ignore attribute:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">pagedjs-ignore</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">add some inline styles</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>  <br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen.css<span class="token punctuation">"</span></span> <span class="token attr-name">pagedjs-ignore</span><span class="token punctuation">></span></span></code></pre>
<p>This way, pagedjs will pass the stylesheet as it is, and will not update the styles. One important note: if you are ignoring screen styles, you want to make sure that you’re writing in a media screen to avoid the styles being mixed up on export.</p>
<p>Finally, in a parsed CSS file, adding <code>pagedjs-ignore</code> will skip a media block, passing it as it is to the browser. This is pretty useful to define how the page will look in the browser:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> screen<span class="token punctuation">,</span> pagedjs-ignore</span> <span class="token punctuation">{</span>  <br>  <span class="token selector">.pagedjs_pages</span> <span class="token punctuation">{</span><span class="token property">margin-top</span><span class="token punctuation">:</span> 20em<span class="token punctuation">}</span>  <br><span class="token punctuation">}</span>  <br>  <br><span class="token atrule"><span class="token rule">@media</span> pagedjs-ignore</span> <span class="token punctuation">{</span>  <br>  // block to pass  <br><span class="token punctuation">}</span></code></pre>
<p>One fair warning, this is a bit outside of the standard, it’s a usable workaround that we’ll support by default, but pagedjs-ignore has no intention of being a standard in the future. But it’s a way for you to build the tool you need around real media queries support.</p>
<p>You can test it already if you’re using Paged.js 0.4.0-beta.1, using the interface.css polyfill: <a href="https://gitlab.coko.foundation/pagedjs/interface-polyfill">https://gitlab.coko.foundation/pagedjs/interface-polyfill</a></p>
<p>We’ll let that work as a beta for a month before making a proper release.</p>
<p>The simplest way to use it is to get the file from unpkg cdn: <a href="https://unpkg.com/browse/pagedjs@0.4.0-beta.1/dist/">https://unpkg.com/browse/pagedjs@0.4.0-beta.1/dist/</a> and see how things work for you.</p>
<p>If you find any issues, or anything, feel free to open an issue on our GitLab, or contact us on the <a href="https://mattermost.coko.foundation">Mattermost</a> (again, the best way to get in touch with us.)</p>
<p>We’ll be back soon with some other updates, as Paged.js CLI also got pimped up! if you want to test the CLI with the aforementioned changes to Paged.js, you’ll find the files here: <a href="https://unpkg.com/browse/pagedjs-cli@0.2.2-beta.2/">https://unpkg.com/browse/pagedjs-cli@0.2.2-beta.2/</a></p>
<p>One last thing, 27-28 October 2022 in San Francisco will see the first <em>Page Break Conf</em> which has been organized by some great folks of our community. We’ll be back to talk a bit more about it soonish, so don’t forget to save the date!</p>
<p>Have a nice printing!</p>

      </section>
      
      <section class="data" id="a-collection-of-starter-kits-for-paged.js">
        <h1></h1>
        <p>We’ve done a lot of work to bring new users to paged.js and as i’m on my way to a new workshop with graphic design students, I thought that it would be a good time to share a little bit more about the different <a href="https://gitlab.coko.foundation/pagedjs/starter-kits">starter kits</a> I've build around Paged.js since a few years to help anyone to get started.<br>
And since not everyone has the same needs, it will be four stater kits instead of one.</p>
<p>Depending on your needs, you can start from these ready-made folders that contain Paged.js, some CSS reset code, a bit of interfaces and sometimes JavaScript features to help your work. Choose the right one !</p>
<h2 id="the-spread-book-template%3A-the-lightest-starter-kit" tabindex="-1">The spread book template: the lightest starter-kit</h2>
<p>This is the simplest template, which uses the polyfill in an HTML page. The folder is already structured for you:</p>
<ul>
<li>An HTML file where to add the structured content of your book, the file contains the links to all other files and elements;</li>
<li>A CSS file that help you to see your book in spread and where you can add the visualization of a baseline (Be careful, this visualization in spread and the baseline is only for the screen. When rendering the PDF, it will be page by page again.)</li>
<li>A <a href="https://github.com/necolas/normalize.css">CSS reset file</a> to normalize the style of some elements;</li>
<li>The folder for your assets: a <code>fonts</code>, an <code>images</code> and a <code>scripts</code> folder where you can add your custom scripts with a pre-coded <a href="https://pagedjs.org/documentation/10-handlers-hooks-and-custom-javascript/">handler</a>;</li>
<li>And, of course, the latest version of Paged.js.</li>
</ul>
<p>This starter-kit exist in two version: the <a href="https://gitlab.coko.foundation/pagedjs/starter-kits/book-spread_polyfill">polyfill version</a> and the <a href="https://gitlab.coko.foundation/pagedjs/starter-kits/book-spread_esm">esm module version</a>. The difference is the way Paged.js is called on the web page. The esm version is more flexible if you want to add your custom scripts to Paged.js or integrate it with other tools.</p>
<p>The polyfill version contains in addition a little helpful script developed by the great Nicolas Taffin, the <a href="https://gitlab.com/nicolastaf/pagedjs-reload-in-place">reload-in-place script</a>: “On reload, it will make the web browser scroll to the place it was before reload.”</p>
<p>You can easy add it this template in an existing site, in a print folder for example. This will allow you to access a special page to print a part of your site. All the HTML content of your site must however be rewritten in this HTML page.</p>
<h2 id="the-advanced-interface-template%3A-to-facilitate-your-design-process" tabindex="-1">The advanced interface template: to facilitate your design process</h2>
<p>This advanced <a href="https://gitlab.coko.foundation/pagedjs/starter-kits/book_avanced-interface">starter-kit</a> contains a little interface and some features to help you during your design process. It's a template that I developed during workshops for graphic design students not used to code but which can also be used for the production of books on a daily basis. All the element of the previous “spread book template“ are also in this start-kit. I also added different features that can be used with buttons always present on the web page:</p>
<ul>
<li>display of the baseline with modification of its values,</li>
<li>display of margin boxes,</li>
<li>“visualization” mode where the cut lines are hidden,</li>
<li>print button</li>
<li>And number of generated pages displayed.</li>
</ul>
<p><img src="/images/22-04-advanced-interface.png" alt=""></p>
<h2 id="the-%E2%80%9Cprint-a-webpage%E2%80%9D-template%3A-a-responsive-web-page-that-can-be-printed" tabindex="-1">The “print-a-webpage” template: a responsive web page that can be printed</h2>
<p>The last start-kit I propose is the <a href="https://gitlab.coko.foundation/pagedjs/starter-kits/print-a-webpage">“print-a-webpage” template</a>. It offers a double view of a web page: the classic web page for the responsive screen display and a paginated display for printing. Both displays are made from the same HTML content but the CSS for each version are separated. Buttons on the side of the web page allow you to switch from one version to the other or to print.</p>
<p>In the printed version, all the element of the previous “spread book template“ are also in this start-kit, except the reload-in-place script.</p>
<p><img src="/images/22-04-print-a-webpage.png" alt=""></p>
<h2 id="don't-forget-your-local-server" tabindex="-1">Don't forget your local server</h2>
<p>Before your start, just a reminder: you need to use a local server to work on your project. Paged.js needs it to make links from one file to another and in particular to read yourCSS files. Today, all the most used text editors have extensions to launch a local server (<a href="https://www.youtube.com/watch?v=FeR_eMXzNcY">Visual Studio, Atom</a>, <a href="https://www.youtube.com/watch?v=oqD5C77Tk3I">Sublime Text</a>, <a href="https://www.youtube.com/watch?v=f35_n9NFXSw">Atom</a>).</p>
<p>If you haven't done it yet, you just have to install one of these extensions and launch the local server from your project. Please note that the entire folder of your project must be open in your editor for the local server to work properly.</p>
<p>Most of the errors and difficulties come from the fact that the local server is not turned on, so I advise you to be particularly vigilant on this point.</p>
<p>You are now ready to get started with Paged.js! We would be very happy to see your productions, so jump on the <a href="https://mattermost.coko.foundation/">Coko Mattermost</a> to say hello (~pagedjs channel) or contact us on <a href="https://twitter.com/paged_js">twitter</a>.</p>

      </section>
      
      <section class="data" id="uke-and-inks">
        <h1></h1>
        <h2 id="editoria%2C-the-book-production-center" tabindex="-1">Editoria, the Book Production Center</h2>
<p>Editoria is a platform to collaboratively produce books, offering spaces for writers, editors, designers, etc. at the same time the content is being added.</p>
<p>We've been talking Editoria quite a lot in these pages. Firstly because Paged.js was implemented in Editoria before any other tool, after years of trying out other tools to make books out of HTML.</p>
<p>Editoria has been used for quite a while by Book Sprints and other friendly folks. It's a pretty amazing tool for creating books collaboratively by a team. But one of the limitations from the designer's perspective was that we were stuck with what CSS allowed us to do. It took quite a while to figure out the best option to have custom javascript hooks without compromising the security of the whole platform.</p>
<p>Well, that solution exists now:)</p>
<p>To show what you can do with Editoria nowadays, I have produced a small demo book, with some paged.js hooks that I explain in this post.</p>
<p>Before jumping into hooks, let's briefly explain how paged.js does what it does.</p>
<h3 id="paged.js%3A-hooks-and-order" tabindex="-1">Paged.js: hooks and order</h3>
<p>Fred Chasen made paged.js around a clever idea: instead of defining the order of events that paged.js needed, he defined the moments where you would need to do something on the content, and set those as hooks to which you can bind your scripts.</p>
<p>All the modules use those entry points to do different things at different moments.</p>
<ol>
<li>
<p>when it's about to parse the HTML, CSS and JS.</p>
</li>
<li>
<p>when all the content has been parsed.</p>
</li>
<li>
<p>when you create a new page</p>
</li>
<li>
<p>when you put one element on the page</p>
</li>
<li>
<p>when the page is filled and there is no more space left on the page</p>
</li>
<li>
<p>when you define the exact location your content is split</p>
</li>
<li>
<p>when you finish the layout of the page (go back to 3)</p>
</li>
<li>
<p>when you zend the signal that all pages are generated if there is no<br>
content left.</p>
</li>
</ol>
<p>You can see all the existing hooks <a href="https://www.pagedjs.org/documentation/11-hooks/#some-informations-about-the-hooks">on this page</a> if you want to go deeper.</p>
<p>For example, let's look at how a <code>break-before: left</code> is defined.</p>
<ol>
<li>Before the HTML, CSS and JS of the document is parsed.</li>
</ol>
<p><em>check if any element has a <code>break-before</code> property and if it’s value is <code>left</code>, add a <code>data-break-before: left</code> attribute to it.</em></p>
<ol start="4">
<li>when you lay out one element on the page</li>
</ol>
<p><em>if that element has a <code>data-break-before: left</code> attribute, stop adding elements to that page and jump to 6. Then, if it’s a right page create an <code>blank</code> page and resume adding content on the following page, else (if it’s a left page), resume adding the content.</em></p>
<p>As you can see, the algorithm is crystal clear, and when the browser handles features, we'll be able to remove those that become useless over time.</p>
<p>Let's start strumming our <s>ukulele</s> keyboard and make some code. :)</p>
<h2 id="where-the-humuhumunukunukuapuaa-goes-swimming-by" tabindex="-1">Where the humuhumunukunukuapuaa goes swimming by</h2>
<p>So let's jump in, script by script and see what happens and how things work.</p>
<p>Here is the link to the <a href="https://demo.flaxjs.net/output/uke.pdf">pdf</a> and to the <a href="https://gitlab.coko.foundation/pagedjs/pagedjs-templates/ukulele-demo">repo</a> if you want to have a proper look at all those files :D).</p>
<p>We’re setting up a place to display the open source templates we’re making, so stay tuned to know more about it.</p>
<h3 id="changes-in-the-dom" tabindex="-1">Changes in the DOM</h3>
<p>Wax, the word processor that fuels Editoria, treats the content as a<br>
flat flow of elements. You can define the type of block from a list of<br>
styles (including custom styles for both inline and block level<br>
elements). The output of that is a nicely set HTML with <code>paragraph</code> with<br>
different classes, <code>header</code>, <code>em</code>, and all the other sweets the HTML has to<br>
offer.</p>
<p>If all is so great, why would we change the DOM?</p>
<p>For multiple reasons:</p>
<ol>
<li>
<p>You may want to bring elements together (for example, when you have<br>
two figures that belong together and for which you want to have a<br>
specific layout), or when you want to nest stuff together, something<br>
that your editor may not offer.</p>
</li>
<li>
<p>To redo something the browsers used to offer (nope, not the CSS<br>
regions, not this time :D) such as the unknown display:<br>
<a href="https://css-tricks.com/run-in/">run-in</a> which allowed us to<br>
push an element to the next as an inline block. This trick has been<br>
used a lot in the world of print, and it was available for the<br>
screen a long time ago. But it didn't survive the test of time.</p>
</li>
<li>
<p>You may want to create, let's say, an index. To do so, you need to<br>
create links between the words and their counterparts in the index.<br>
In this book, I used a custom inline class to list everything the<br>
musician talked about in the first chapter to build the list in the<br>
end.</p>
</li>
</ol>
<p>My first script, the <code>contentUkulele.js</code> is happening on the <code>beforeParsed</code><br>
hook (before any content data has been processed by paged.js). It's<br>
removing empty elements, add id to elements that don't have ids yet,<br>
recreate the <code>display: run-in</code> property. Nothing really fancy here, but it<br>
let me create the DOM I want s /I can start designing the book itself.</p>
<h3 id="page-float%3F-are-you-going-to-talk-about-page-float%3F" tabindex="-1">Page-float? Are you going to talk about page-float?</h3>
<p>Yes.</p>
<p>And no.</p>
<p>Not in the way you're expecting it.</p>
<p>If you want to know what a page-float is, and what it can add to our<br>
layout, you should have a look at the<br>
<a href="http://demos.pagedmedia.org/page-floats/">[demo]{.ul}</a> Julie Blanc<br>
made. Be aware that this is not inside Paged.js (yet) but a good demo on<br>
how things should work when we'll be able to follow the specs from the<br>
W3C.</p>
<p>Truth is, page-floats are a pretty complex thing (check Julie's article<br>
<a href="https://www.pagedjs.org/page-floats/">[about page floats]{.ul}</a>). There<br>
are a lot of different ways to implement page-floats, and they all come<br>
with pros and cons. Until we find the universal way of making page-float<br>
a thing, we can still find workarounds and ways of making it work. So<br>
let's see how I did it for the ukulele book.</p>
<h3 id="the-custom-property-with-its-custom-values" tabindex="-1">The custom property with its custom values</h3>
<p>This image-handling.js script has only one role: find the element that<br>
has that property, and depending on its value, add a specific class to<br>
that element so we can target it when it's being rendered on the page.<br>
To do so, I created a CSS custom property that can have different values<br>
to define where the element should float.</p>
<pre class="language-css"><code class="language-css"><span class="token property">--page-float</span><span class="token punctuation">:</span> same-top<span class="token punctuation">,</span> same-bottom<span class="token punctuation">,</span> next-top<span class="token punctuation">,</span> next-bottom<span class="token punctuation">,</span> same-column-top<span class="token punctuation">,</span><br>  same-column-bottom<span class="token punctuation">,</span> next-column-top<span class="token punctuation">,</span> next-column-bottom<span class="token punctuation">,</span> full-page<span class="token punctuation">;</span></code></pre>
<p>Some of those values/classes are not used, but are there for the day we<br>
need them.</p>
<h3 id="layout-time!" tabindex="-1">Layout time!</h3>
<p>Then we have a float-top.js, floatNextBis.js or fullPage.js that handles<br>
the moving of elements on the page when they are rendered.</p>
<p>Let's check the easiest of those scripts: fullPage.js:</p>
<p>First, we define the name of the class for the image full page.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> classElemFullPage <span class="token operator">=</span> <span class="token string">"imgFullPage"</span><span class="token punctuation">;</span></code></pre>
<p>Then, we create our hooks like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">fullPage</span> <span class="token keyword">extends</span> <span class="token class-name">Paged<span class="token punctuation">.</span>Handler</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span>chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>floatFullPage<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Hooks are sharing the same constructor. That means that if you want to<br>
set a variable and use it in different hooks, you need to set it in the<br>
constructor. In this script, I'm creating a <code>this. floatFullPage</code> that we're going to use to find the elements that have the <code>--page-float: full-page;</code> custom property.</p>
<pre class="language-js"><code class="language-js"><span class="token function">onDeclaration</span><span class="token punctuation">(</span><span class="token parameter">declaration<span class="token punctuation">,</span> dItem<span class="token punctuation">,</span> dList<span class="token punctuation">,</span> rule</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>declaration<span class="token punctuation">.</span>property <span class="token operator">==</span> <span class="token string">"--page-float"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>declaration<span class="token punctuation">.</span>value<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">"full-page"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">let</span> sel <span class="token operator">=</span> csstree<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>ruleNode<span class="token punctuation">.</span>prelude<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      sel <span class="token operator">=</span> sel<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'[data-id="'</span><span class="token punctuation">,</span> <span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      sel <span class="token operator">=</span> sel<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'"]'</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>floatFullPage <span class="token operator">=</span> sel<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span></code></pre>
<p><code>onDeclaration</code> is a hook that happens every time a declaration is found.</p>
<p>When that happens, we check if the declaration property is <code>--page-float</code> and if the value is <code>full-page</code>. If that's the case, we get the value from of the selector (<code>sel</code>) using csstree. And we push that value to the <code>this.floatFullPage</code> array.</p>
<p>Then, when the content is parsed, we use the selectors from <code>this.floatFullPage</code> to add the <code>fullpage</code> class</p>
<pre class="language-js"><code class="language-js"><span class="token function">afterParsed</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>floatFullPage<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>floatFullPage<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">elNBlist</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      content<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>elNBlist<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        el<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"imgFullPage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span></code></pre>
<p>Then, the magic happens: every time a page is done, we run the following script:</p>
<pre class="language-js"><code class="language-js"><span class="token function">afterPageLayout</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".imgFullPage"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    page<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"fullPage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    page<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".imgFullPage"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span><br>    page<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".imgFullPage"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    page<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundRepeat <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">no-repeat</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    page<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundSize <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">cover</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    page<br>      <span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".pagedjs_margin-content"</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">marginContent</span><span class="token punctuation">)</span> <span class="token operator">=></span> marginContent<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>When a page has a child with the class <code>full-page</code>, it will hide the image, and use the <code>src</code> attribute of the image and use it as the background for the page. We also put some css styles in there to make sure the background cover the whole page. And one last thing: we remove all the elements in the margin boxes on that page.</p>
<p>The page breaks that arrive before and after are set in the css for the same element.</p>
<p>And the last thing, we register the hook.</p>
<pre class="language-js"><code class="language-js">Paged<span class="token punctuation">.</span><span class="token function">registerHandlers</span><span class="token punctuation">(</span>fullPage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>We use the exact same idea for the image to top / bottom, but we're moving them as soon as they're on the page, and we use the amazing <code>shape-outside</code> property. We'll cover that deeper in the next installment of this series.</p>
<p>Until then, keep practising music and book design.</p>
<p>The code is accessible <a href="https://gitlab.coko.foundation/pagedjs/pagedjs-templates/ukulele-demo">here</a></p>
<p>Have fun!</p>

      </section>
      
      <section class="data" id="paged.js-0.2.0-release-notes">
        <h1></h1>
        <h2 id="hey-yall!-we-have-footnotes!" tabindex="-1">Hey yall! We have footnotes!</h2>
<p>One day, i said on twitter that we were starting our work on the footnotes. This was the most retweeted and shared post in all the history of Paged.js. This is the most awaited feature that we’re really proud to bring into the game.</p>
<p>We’ve always been happy to help making hooks for footnotes, but they were mostly hacks, and would come with their share of unknown behavior, they wouldn’t be standard and would break everything on a regular basis. Not the best of the world.</p>
<p>Then, we wrote down some specifications about what we believe would be a <a href="https://www.pagedjs.org/posts/2020-05-13-notes-about-notes/">great addition to the footnotes</a>. This would allow footnote, marginnotes, different kind of notes, etc. This is a bit of how would be footnotes in the ideal world, so we could engage the conversation with the folks on the w3c github. I hope that we can be back on that conversation soon enough.</p>
<p>But we can’t wait for the W3C to approve those specs as they would need to go through all the steps before being a real specs, thus we ended by making a simple implementation following the existing specs (<a href="https://www.w3.org/TR/css-gcpm-3/#footnotes">https://www.w3.org/TR/css-gcpm-3/#footnotes</a>), and we ended up with something we’re happy with.</p>
<p>Footnotes now exists in paged.js and can be easily set up this way:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>  This is a paragraph that contains some lorem ipsum<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footnote<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Fake latin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> content<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<p>i obviously named my class <code>footnote</code> but you can call that whatever you want. And better, your footnote can be anything from text to table, including images or more exotic HTML (warning though, this has been tested with text first and foremost).</p>
<p>Then you need to define which elements need to be set as footnote using those properties:</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* define what are the footnotes elements */</span><br><br><span class="token selector">.footnote</span> <span class="token punctuation">{</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> footnote<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* define the position of the footnote on the page (only bottom is possible for now) */</span><br><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@footnote</span></span> <span class="token punctuation">{</span><br>    <span class="token property">float</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>And that’s it. You can then style the footnote callout to go beyond the user agent styles</p>
<p>Pay attention to the fact that there is no callout, they will be created automatically and you’ll be able to change their look with css without having to worry with the note numbering.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">::footnote-call</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>footnote<span class="token punctuation">,</span> loweralpha<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><br>  <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span><br>  <span class="token property">line-height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">::footnote-marker</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>footnote<span class="token punctuation">,</span> loweralpha<span class="token punctuation">)</span> <span class="token string">". "</span><span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><br>  <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span><br>  <span class="token property">line-height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>You can check this <a href="https://codepen.io/julientaq/pen/dyvQaKy">codepen</a> to see it in action.</p>
<p>To be able to manage the footnotes, Fred rewrote quite an amount of code of Paged.js. He made sure that the API didn’t change, but it doesnt mean that your previous content will work by default. Please test, and tell us if something goes wrong, we’ll be happy to support you.</p>
<p>Welcome Paged.js 0.2.0! :)</p>
<h2 id="release-notes" tabindex="-1">Release notes</h2>
<ul>
<li>Footnotes! (from @Fred)</li>
<li>Fix styles order (from @Guillaume)</li>
<li>White space in <code>&lt;pre&gt;</code> elements are now preserved. Hello again ascii art! (from @Guillaume)</li>
<li>A lot of improvement on tables from @guillaume) (Break in table with row span are now much more elegant, columns are rebuild on page breaks, etc.)</li>
<li>remove page border when no borders are specified (from @guillaume)</li>
<li>@Julie wanted to print page with a lot of colors, so she added box-shadows to the crop marks</li>
<li>@guillaume introduced the <code>RenderResult</code> object with more data about how pagedjs handle page breaks.</li>
</ul>
<h2 id="in-other-places" tabindex="-1">In other places</h2>
<p>We now have a <a href="http://pagedjs.org/examples/">portfolio page</a>. Send us a message if you want to display your work here.</p>
<p>One of the great thing of using the browser is to inherit all the knowledge they have: as a result, Paged.js works pretty well with content in chinese, thanks to <a href="https://twitter.com/aszx87410">huli</a>.</p>
<p>C&amp;F editition are working on their new collection using Paged.js but hush, it’s a surprise.</p>
<p>And Julien spent some time to build hooks for page float, automatic indexing, and other things we’ll be happy to show you soon. This <a href="/images/exampleOUT.pdf">PDF</a> was made with <a href="www.editoria.pub">Editoria</a>. Video tutorials are coming!</p>
<p>Until next time!</p>

      </section>
      
      <section class="data" id="a-paged.js-hackathon-at-ensadlab">
        <h1></h1>
        <p>On the 1st and 2nd of March 2021, a group graphic designers went together in Paris for a Paged.js hackathon. The goal was to bring together people who already had an experience with Pagedjs to discover how they worked, how they come to layout their content, and to think together about pushing the boundaries further. The hackathon, organised by Julie Blanc and Lucile Haute welcomed Julien Taquet, Manu Vazquez, Louis Éveillard, Sarah Garcin, Robin de Mourat and Quentin Juhel.</p>
<p><img src="/images/9J1A5482_retouch.jpg" alt=""><br>
<img src="/images/9J1A5333_retouch.jpg" alt=""></p>
<p>Despite the context of that global pandemic, we were able to meet at EnsadLab and we got lucky to have the pleasure of spending two days together.</p>
<p>The idea was to go deeply into how Paged.js works, to work on scripts to improve and extend Paged.js and to discuss what #CSSPrint change in terms of page layouts and new workflows for graphic designers.</p>
<p>We started the workshop looking at projects made by the participants. During the first morning, they showed the specific improvements they had already made to Paged.js and the difficulties they encountered in the layout rendering or in the workflows with their co-workers (authors, editors, print shops, etc.). From there, we worked on different ideas that were raised along that talk.</p>
<p>Generally, we have discussed and worked with <a href="https://www.pagedjs.org/documentation/11-hooks/">handlers and hooks</a>. The source code of Paged.js is organised in such a way in order to facilitate the addition of functionalities through the handlers and hooks. The hooks are a kind of specific breakpoint in the execution of the script that give the possibility to add your own script at different moments of the document pagination and rendering (for example before the css is parsed, and after, before the pagination of the document, before or after the fragmentation of a specific page, before and after the addition of elements in the page, etc.).</p>
<p><img src="/images/9J1A5203_retouch.jpg" alt=""><br>
<img src="/images/9J1A5476_retouch.jpg" alt=""></p>
<p>The results of the workshops are not usable as working bit directly. Some of them can be adapted to your use if you are comfortable with the use of paged.js, others still require a bit of development. All the source codes are available in <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021">a dedicated repo on our gitlab instance</a>. In this article, we offer you a summary of the discussions and the work done.</p>
<h2 id="documentation" tabindex="-1">Documentation</h2>
<p>Sarah worked around baselines. She wrote the <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021/blob/master/baseline-experiment_sarah/baseline-documentation.md">beginning of a documentation</a> about it (in French): how to uses variables to fit a baseline grid, why using pixel values and instead of pt value, how to add visual guideline, etc. She also developped some <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021/tree/master/baseline-experiment_sarah">scripts</a> to automatically align elements (even images) on the baseline grid with the use of <code>offsetTop</code>. She went further in the experimentation by positioning the elements randomly in the page and keeping the elements aligned on the baseline.</p>
<p><img src="/images/9J1A5322_retouch.jpg" alt=""><br>
<img src="/images/baseline.png" alt=""></p>
<p>Manu took advantage of the hackathon to document the <a href="https://gitlab.coko.foundation/tools/experiments">&quot;experiments&quot; repo</a> available on the gitlab. This repo contains various experimental scripts tried in the last years. Some of them are still under development and can be used for your projects with some adaptations but nobody had taken the time to document them yet. Based on his experience with BookSprints, he also works with Julie on a <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021/tree/master/delete-margin-content_manu">little script</a> to delete content of margin boxes when an element appears on the page.</p>
<h2 id="canvas-html-for-images-and-for-drawing" tabindex="-1">Canvas HTML for images and for drawing</h2>
<p>Following stories of problems with offset printers with the use of CSS mix-blend-mode on some images, Robin and Louis came with the idea of using canvas <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021/tree/master/blend-modes">to recreate the image and its effects</a>. Beyond CSS <code>mix-blend-mode</code>, the use of canvas for images is a real positive point that allows a better optimization of images for printing.</p>
<p><img src="/images/9J1A5636_retouch.jpg" alt=""></p>
<p>Louis also worked <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021/tree/master/canvas_embedding-louis">with canvas</a>. He made a system to inject external javascript into canevas and drawing things or downloading API. A script can be added on the fly with the <code>data-script</code> attribute in the canvas and the size of the canvas must be given in advance to avoid overflow problems.</p>
<h2 id="float-notes" tabindex="-1">Float notes</h2>
<p>Robin and Julie works on an old script written 2 years earlier to create <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021/tree/master/notes-float">float notes</a>. The script has been improved and optimized because the old version had serious problems with the fragmentation of the text content when notes was moved into floated areas. The idea is to be able to have a first implementation of a part of the <a href="https://github.com/w3c/css-print/issues/3">draft specifications for notes</a> proposed by the Paged.js team. These are the first foundations but there is still a lot of work to be done to achieve a solid result (so be careful if you want to use the script).</p>
<p><img src="/images/9J1A5473_retouch.jpg" alt=""><br>
<img src="/images/float-notes.png" alt=""></p>
<h2 id="imposition" tabindex="-1">Imposition</h2>
<p>Quentin, a fanzine lover, makes a lot of Paged.js workshops with students. Most of the time, they print their own productions and therefore need a way to impose the sheets after the paged.js rendering. With Julien’s help, <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021/tree/master/imposition_quentin_juhel">he made a script</a> to re-organize the dispositions of the pages, automaticly add pages to have a multiple of 4 and change the size of the spread after the rendering of the document. The script is only a first step and they want to develop it further to make more complex spreads (this whole idea was based on a script Julien Bidoret made).</p>
<p><img src="/images/9J1A5506_retouch.jpg" alt=""></p>
<h2 id="automatic-grid-layout" tabindex="-1">Automatic grid layout</h2>
<p>Louis used <a href="https://mapbox.github.io/potpack/">Potpack</a>, a “tiny and fast JavaScript library for packing boxes of varying size into a near-square container“, to distribute image elements on the page according to their number and ratio. The <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021/tree/master/auto_layout_images-louis">script available on the repo</a> is a good example of how automatic grid layout algorithms (for example <a href="https://masonry.desandro.com/">Masonry</a>, <a href="https://packery.metafizzy.co/">Packery</a>) can be easily added to Paged.js. The idea is to start preparing javascript modules, usable with the addition of some classes in the HTML. That could be used by people who are not developers or graphic designers who do not code.</p>
<p><img src="/images/9J1A5002_retouch.jpg" alt=""></p>
<h2 id="create-a-link-between-content-and-pagination" tabindex="-1">Create a link between content and pagination</h2>
<p>During the first morning, Sarah and Julie told about the time-consuming last step of the composition of books: typographic corrections and flag management. The desynchronization of writing (on the HTML source code) and rendering (in the web browser) can make the work fastidious.</p>
<p><img src="/images/paged-editor.png" alt=""></p>
<p>So Louis looked for a way to create a better link between the two. <a href="https://gitlab.coko.foundation/pagedjs/hackathon-mars-2021/tree/master/paged_editor-louis">He imagined an interface</a> in the browser with, on the left, the editable content as a single flow and on the right, the paginated render in a page-by-page display. The two area are linked and clicking on an item will display it in both areas synchronously. It's also possible to modify the content on the left and have it update on the right paginated rendering. This is a very good start to imagine more advanced interfaces integrating Paged.js as a tool.</p>
<p><img src="/images/montage-1.png" alt=""></p>
<p>Hackathon is a very interesting way of working to quickly come up with design ideas and see how to add them in paged.js. These two days were a success and we hope to find the opportunity to do other events.</p>
<p><em>Thanks to EnsadLab for the financial and logistic support, Lucile Haute for the great help about the organization, Agathe Charrel for photos and all the participants for this two wonderful days.</em></p>
<hr>
<p><img src="/images/9J1A5546_retouch.jpg" alt=""><br>
<img src="/images/9J1A5566_retouch.jpg" alt=""><br>
<img src="/images/9J1A5614_retouch.jpg" alt=""><br>
<img src="/images/9J1A5465_retouch.jpg" alt=""><br>
<img src="/images/9J1A5511_retouch.jpg" alt=""><br>
<img src="/images/9J1A5115_retouch.jpg" alt=""><br>
<img src="/images/9J1A5299_retouch.jpg" alt=""><br>
<img src="/images/9J1A5370_retouch.jpg" alt=""><br>
<img src="/images/9J1A5382_retouch.jpg" alt=""><br>
<img src="/images/9J1A5157_retouch.jpg" alt=""><br>
<img src="/images/9J1A5257_retouch.jpg" alt=""><br>
<img src="/images/9J1A5303_retouch.jpg" alt=""><br>
<img src="/images/9J1A5390_retouch.jpg" alt=""><br>
<img src="/images/9J1A5419_retouch.jpg" alt=""><br>
<img src="/images/9J1A5430_retouch.jpg" alt=""><br>
<img src="/images/9J1A5537_retouch.jpg" alt=""><br>
<img src="/images/9J1A5539_retouch.jpg" alt=""><br>
<img src="/images/9J1A5716_retouch.jpg" alt=""></p>

      </section>
      
      <section class="data" id="avoid-whitespaces-on-pages">
        <h1></h1>
        <p>A long time ago, I wrote an article about <a href="https://www.pagedjs.org/page-floats/">page floats</a>. Since then, we've had a lot of feedback about these CSS features that are crucial for paginated layout. We haven't yet implemented them in paged.js – because it's difficult and we need to take the time to ponder how to do. However, we are facing a recurring and urgent request regarding a specific aspect of page floats. I'm writing today to answer it :)</p>
<p>I'm sure you already know what I'm talking about. You know, this figure or this table that didn't fit at the end of your page? Because of how pagined medias works, if an element ends up at the bottom of a page but is too big to fit within the page height, the element is automatically pushed to the next page with a forced page break. This produces a gap, a white space, at the end of the previous page. It’s unsightly and, moreover, the reader might think that it means the end of a section.</p>
<p>The float properties can fix this problem, just by adding <code>float: top</code> and <code> float-reference: page</code> on the problematic element. The following figure illustrates what this should look like:<br>
<img src="/images/whitespace-script.png"></p>
<p>However, we can't use it today. I personally encounter this problem in some book design I make. So, based on a script made by <a href="https://gitlab.coko.foundation/julientaq">Julien</a> I share with you a little script to make floating-like elements in paged.js to avoid large chunks of whitespace at the end of pages. For this, we add a custom module to Paged.js using <a href="https://www.pagedjs.org/documentation/11-hooks/">handlers and hooks</a>.</p>
<p>As you can see, the script is not very long. You just have to add it in your HTML document (after the paged.js script), add the class <code>elem-float-top</code> to the elements where you want it to apply, and watch the magic happen.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> classElemFloat <span class="token operator">=</span> <span class="token string">"elem-float-top"</span><span class="token punctuation">;</span> <span class="token comment">// ← class of floated elements</span><br><br><span class="token keyword">class</span> <span class="token class-name">elemFloatTop</span> <span class="token keyword">extends</span> <span class="token class-name">Paged<span class="token punctuation">.</span>Handler</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span>chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>token<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">layoutNode</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// If you find a float page element, move it in the array,</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>classElemFloat<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">let</span> clone <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// Remove the element from the flow by hiding it.</span><br>      node<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">beforePageLayout</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> content<span class="token punctuation">,</span> breakToken</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// If there is an element in the floatPageEls array,</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls<span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// Put the first element on the page.</span><br>      page<span class="token punctuation">.</span>element<br>        <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".pagedjs_page_content"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">insertAdjacentElement</span><span class="token punctuation">(</span><span class="token string">"afterbegin"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br>Paged<span class="token punctuation">.</span><span class="token function">registerHandlers</span><span class="token punctuation">(</span>elemFloatTop<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>Note</strong>: It's not exactly how the float page specifications work, but it's currently the easiest way to do it with Paged.js. A real <code>float: top</code> on an element should move the element to the top of the page where it is anchored. However, this would mean that the text already rendered in the page by paged.js (which is before the element) would have to be pushed to the next page, causing the text to be split again. There is currently no simple way in paged.js to re-render the page if an element in the layout is moved. For the moment, this script is the easiest way to do it.</p>

      </section>
      
      <section class="data" id="welcome-pagedjs-0.1.42">
        <h1></h1>
        <p>Hi there!</p>
<p>It’s been a while since we talked, but we have used the time wisely.</p>
<p>First, we were very happy to see Julie (along with <a href="www.twitter.com/nt_polylogue">Nicolas Taffin</a>) and Fred in the line-up of the <a href="https://openpublishingfest.org/">Open Publishing Fest</a> talking about Paged.js. Their discussions and demos are pretty good examples of the use of Paged.js in the real world: Julie talked about her work on the <a href="https://julieblanc.gitlab.io/projects/villa-chiragan/">Villa Chiragan</a>, Nicolas focused on the ways <a href="https://cfeditions.com/public/">C&amp;F Editions</a> are using paged.js for their new collections; and Fred showed an experiment of his, on using paged.js to render epub on the screen as fixed layout. Would printing epub be something worth having in the future? :)</p>
<p>Be sure to look in the <a href="https://openpublishingfest.org/archives.html">archives</a> at all the great content folks submitted to the fest.</p>
<h2 id="bug-fixes-and-updates-to-paged.js" tabindex="-1">Bug fixes and updates to paged.js</h2>
<h3 id="basic-support-for-correct-borders-on-the-page-!107" tabindex="-1">Basic support for correct borders on the page <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/107">!107</a></h3>
<p>We now handle <code>border</code> on the page as the <a href="https://drafts.csswg.org/css-page/#page-model">specifications define it</a>. The <code>border</code> will not be set as a border for your page anymore, but will be between the page margins and padding. If you want to have a drawn border on your page, you’ll be able to use <code>box-shadow: inset</code>.</p>
<h3 id="added-a-license-banner-!127" tabindex="-1">Added a license banner <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests">!127</a></h3>
<p>Paged.js include the version in its header thanks to Guillaume (@mogztter),</p>
<h3 id="fixes-for-reset-on-page-counter-!128-and-fixes-page-counter-!124" tabindex="-1">Fixes for reset on page counter <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/128">!128</a> and Fixes page counter <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/124">!124</a></h3>
<p>You can now reset the numbering of your page and set the number it starts from using, for instance, <code>counter-reset: page 20</code>. But when Guillaume starting to look at how it was supposed to work, he ended up with a tricky situation: setting reset anywhere in the CSS doesn’t seem to be valid CSS, but at the same time, it’s how the majority of all the other tools are working. We implemented a quick fix to help authors used to this way of writing css down, but we have a more in-depth article coming. Side note, you can now set up a custom increment for the page counter.</p>
<h3 id="updated-page-breaks-on-new-named-page-!126" tabindex="-1">Updated page breaks on new named page <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/126">!126</a></h3>
<p>Guillaume also fixed a longtime bug, where a named page would create an empty page if it was the first page of the book.</p>
<h3 id="handling-for-nth-of-type-and-following-(%2B)-selectors-!122%2C-!125" tabindex="-1">Handling for nth-of-type and following (+) selectors <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/122">!122</a>, <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/125">!125</a></h3>
<p>Nellie McKesson, from the amazing <a href="https://www.hederis.com/">Hederis</a> helped all of us write better CSS by adding support for <code>+</code> and <code>nth-of-type</code> selector.</p>
<h3 id="prevent-infinite-loops-when-elements-aren't-placeable-!118" tabindex="-1">Prevent infinite loops when elements aren't placeable <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/118">!118</a></h3>
<p>Pagedjs used to have infinite loops when trying when an element was bigger than the page. If that happens now, it will stop the rendering on the element that doesn’t appear on the page. No more linking from CPU and RAM.</p>
<blockquote>
<p><strong>Breaking change</strong></p>
<p>If one of your scripts used <code>breakToken</code> to move things around, make sure to test it: Paged.js now stops rendering when the <code>breakToken</code> is the same on two consecutive pages.</p>
</blockquote>
<h3 id="non-significant-text-handling%3A-!115" tabindex="-1">Non-significant text handling: <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/115">!115</a></h3>
<p>This merge request ignores non-significant Node such as a Text node that is all whitespace, or a Comment node. It also preserves Text node that does not have any sibling such as empty (<code>&lt;p&gt; &lt;/p&gt;</code>) or Text node with a sibling (<code>Hello &lt;span&gt;world&lt;/span&gt;</code>).<br>
Here, the Text node after <code>&quot;Hello&quot;</code> and before the <code>&lt;span&gt;</code> element must be preserved. In this case, the <code>textContent</code> is updated to a single space:<br>
<code>Hello &lt;span&gt;world&lt;/span&gt;</code>. This fixes a couple of issues with <code>break-after: avoid</code>. For more information about how HTML handle white spaces, you can head over to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Whitespace">MDN</a>.</p>
<h3 id="add-filter-hooks-and-modules%3A-!116" tabindex="-1">Add filter hooks and modules: <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/116">!116</a></h3>
<p>Add a <code>filter</code> hook that happens just before the <code>afterParsed()</code> one. It allows filtering the content rendered by paged.js. For now, those modules are enabled by default:</p>
<ul>
<li><code>WhiteSpaceFilter</code>: remove whitespace when possible.</li>
<li><code>CommentsFilter</code>: remove all comments.</li>
<li><code>ScriptsFilter</code>: remove all script elements.</li>
<li><code>UndisplayedFilter</code>: Mark elements set to <code>display:none</code> as undisplayed.</li>
</ul>
<h3 id="allow-setting-margins-without-units%3A-%23112" tabindex="-1">Allow setting margins without units: <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/112">#112</a></h3>
<p><code>@page {size: 0 0}</code> is now rendered correctly.</p>
<h3 id="wait-a-frame-before-handling-resize%3A-!110" tabindex="-1">Wait a frame before handling resize: <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/110">!110</a></h3>
<p>Thanks a lot to Edoardo Tona (@EdoardoTona) who helped us figure out a bug in Chrome when, sometime, the pdf output is different from the screen preview (on the last part of the page) and the print PDF. By waiting 1 frame, the content is now identical.</p>
<p>Many great code bug-fixes: <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/111">Nicholas Wylie fixed the ordered list numbering</a>, <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/88">Gregorio Roper, @garoper, fixed the issue when using page counter and custom counters</a>, and we <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/121">updated to Pupeteer 3</a>.</p>
<p>Thanks to everyone who contributed. You’re amazing.</p>
<h2 id="some-interresting-projects-using-paged.js" tabindex="-1">Some interresting projects using Paged.js</h2>
<ul>
<li><a href="https://twitter.com/ma_salmon/">Maëlle Salmon</a> made a proof of concept to make Paged.js work on the server on a Hugo website: <a href="https://github.com/maelle/testbook">https://github.com/maelle/testbook</a>.</li>
<li>The folks at <a href="https://voting.works/">Voting Works</a> are building open-source voting systems for US elections. One of their projects, Vote by mail, uses Paged.js to generate voting ballots: “VotingWorks Vote-by-Mail makes scaling vote-by-mail operations quick and affordable”.</li>
</ul>
<!-- ## The question of the page counter -->
<p>And that’s it for today.</p>
<p>If you find any bugs, or have any questions, or want to discuss anything, feel free to join us on our chat: <a href="mattermost.coko.foundation.org">mattermost.coko.foundation</a></p>

      </section>
      
      <section class="data" id="notes-about-notes">
        <h1></h1>
        <p>CSS is a language that evolves by adopting new specifications. To be accepted as rules and properties published by the W3C, a proposal for new features is debated, adopted or rejected by the CSS Working Group which is made of a broad community of users, company representatives, invited experts and browser developers. Turning an idea for a new feature into an actual standard is a long process of discussion and debates in which complex cases are discussed, examples of implementations are shown, and decisions are made.</p>
<p>Since its third version, CSS has been divided into modules which share families of properties. Each “module” has one or more editors who coordinate community responses towards further module development. From the very first phase of writing, module discussion documents are made available to everyone interested to read them. These documents are initially known as “working drafts” and evolve towards &quot;Candidate Recommendation&quot; status as the community discusses and revises their ideas. Recently, the creation of the CSS Grid module has been a great example of the success of this process: the final module has been defined collectively, well written, and quickly implemented by the browser developers.</p>
<p>However, not all CSS modules evolve at the same speed, and even though they’ve been started a long time ago, the paged media specifications still need to be implemented in browsers, which is why Paged.js exists.</p>
<p>So how can we help get the page media specification process moving?</p>
<h2 id="proposing-new-specifications" tabindex="-1">Proposing new specifications</h2>
<p>On 13 February 2020 at XML Prague, a CSS Print Workshop took place. The workshop was chaired by Rachel Andrew and Dave Kramer, both members of the CSS working Group. Dave is also the editor of the CSS <em>Generated Content for Paged Media Module</em>. Paged.js team attended the workshop and were able to discuss with them how to make the specifications for paginated media and printing evolve more quickly. Following the workshop, the <a href="https://www.w3.org/community/cssprint/">CSS print community group</a> was launched, “a community of users of CSS print, working together to gather use cases, help with specifications, and advocate for more and better implementations”. This subgroup will strengthen the work of the CSS working Group by focusing on CSS for print and paged media.</p>
<p>The work of the W3C and the CSS working Group is easily accessed on the <a href="https://github.com/w3c/csswg-drafts">dedicated repo on github</a>. During that CSS Print Workshop, Rachel Andrew <a href="https://noti.st/rachelandrew/Hy20NS/introduction-to-the-css-working-group">described the status of the CSS Working Group</a>, how it works and how to contribute (<a href="https://www.youtube.com/watch?v=Cp1QLxZLfmM">first part of the video</a>). Anyone can contribute to the specifications in multiple ways: showing use cases, contributing examples and diagrams to the specifications, writing tests or even proposing some properties.</p>
<p>This new CSS print community group has decided to start participating in the specification as well. Our daily work with Paged.js has allowed us to develop a good knowledge of the existing specifications and also where they would need a new look. Cabbage Tree Labs, the house of Paged.js, is now part of the W3C, and as a first move, we want to propose specifications dedicated to the different types of notes that exist in editorial design.</p>
<h2 id="types-of-notes-and-pattern" tabindex="-1">Types of notes and pattern</h2>
<p>The W3C specifications only allow the creation of footnotes, but designers and editors like to make use of all kinds of notes. To name a few:</p>
<ul>
<li><strong>Footnotes</strong>: notes placed at the bottom of the pages</li>
<li><strong>Side notes</strong>: notes related to the page content, grouped in the left or in the right of the page, alongside the text area</li>
<li><strong>End notes</strong>: notes grouped together in one place at the end of a document or at the end of a section of the document</li>
<li><strong>Marginal notes</strong>: notes that are placed to one side of a page or both sides at the exact vertical position of the note reference number</li>
<li><strong>Column footnotes</strong>: footnotes that can be placed according to the column in which they are located</li>
<li><strong>Multiple notes area</strong>: not for pages that share footnotes, margin notes, column footnote, etc.</li>
</ul>
<p>You can find some example of layouts with footnotes in a <a href="https://www.w3.org/XML/2015/02/footnote-examples/">dedicated W3C page</a>.</p>
<p>To make use of notes easier, we would like to propose some CSS syntax which would allow all of these kinds of notes. This article is a quick tour of a proposed specification that is described in more detail in an issue on the CSS Print Community Group repo. The article explores the existing specifications and proposes some new CSS declarations for building notes for both continuous reading (screen) and paged media. This proposal is a working draft, a place to start a discussion. Do not hesitate to give your opinion directly as a comment of this article, or if you feel more comfortable, in the <a href="https://github.com/w3c/css-print/issues/3">issue</a> we've opened on CSS Print Community Group.</p>
<h3 id="pattern-to-create-notes" tabindex="-1">Pattern to create notes</h3>
<p>Notes always depend on another flow but there are out-of-flow elements, <em>ie.</em> it’s ancillary content that can be moved to the bottom or the side of the page or the document. A note is created when the content is moved to another specific area of the document or the page, leaving a indicator of where it was (a reference).</p>
<p>All types of notes are built to a similar pattern:</p>
<ol>
<li>Declare that an element of a flow is a note.</li>
<li>Remove the item from the flow.</li>
<li>Leave a note reference indicator which points to the place the note element was moved from. This is an explicit link from a location in the document to a note element.</li>
<li>Place the note element and its children in a special area with all the other notes of the page or the document, in the order of appearance in the flow.</li>
<li>Create a marker before the note that matches the note reference.</li>
<li>Place the note area in the page or the document using appropriate CSS layout facilities and position scheme.</li>
<li>(If paged media) If the note overflows the note area, move the items to the next page in the equivalent area according to note policy.</li>
</ol>
<h2 id="how-to-tag-a-note-in-html-%3F" tabindex="-1">How to tag a note in HTML ?</h2>
<p>The W3C doesn't provide a dedicated way to tag notes in HTML. Currently, there are two most commonly used methods of adding notes:</p>
<ul>
<li>A list of notes at the end of the document, with note references as link elements with <code>href</code> attributes pointing to the note using fragment URLs;</li>
<li>or <code>&lt;span&gt;</code> elements directly in paragraphs to encapsulate note elements in the place where they appear. This is the method used in examples in the <a href="https://www.w3.org/TR/css-gcpm-3/#creating-footnotes">css-gcpm-3</a>.</li>
</ul>
<p>After some research, reflections and a closer look at some use cases and requirements, a proposal from paged.js team has been developed to allow for this need for various kinds of notes: that there should be a new HTML tag, the <code>&lt;note&gt;</code> element which will interact with appropriate CSS to handle notes of various kinds. (This choice is more fully detailed in the GitHub issue.)</p>
<p>A <code>note</code> element represents a note, eg. secondary content that is related to other content in the document. It’s a self-contained node that gives the information about where a note starts and where it ends. The <code>note</code> element must be placed where the note appears in the content flow. It's the CSS mechanism proposed in this article that allows you to place the note elsewhere in the layout and to create the note call.</p>
<p>The following example is a conforming HTML fragment:</p>
<pre class="language-html"><code class="language-html"><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Gutenberg  in 1439 was the first European to use movable type. Among his many contributions to printing are: the invention of a process for mass-producing movable type; the use of oil-based ink for printing books; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>note</span><span class="token punctuation">></span></span>Soap, Sex, and Cigarettes: A Cultural History of American Advertising By Juliann Sivulka, page 5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>note</span><span class="token punctuation">></span></span> adjustable molds; mechanical movable type; and the use of a wooden printing press similar to the agricultural  screw presses of the period.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<p>This potential new HTML element is easy to use and allows a note to be always attached to the content it adds details to. This proposal is aligned to the way HTML works (a node mechanism) without adding an HTML element that would depend on another one (to create note references for example).</p>
<p>Until this element exists in HTML, a <code>span</code> element will be used with a class named “note” for illustrative purposes.</p>
<p>The new CSS specifications to be proposed will allow the transformation and layout of the targeted element into different types of notes. The stylesheet provides alternate ways to organize and display notes, for specific uses and for continuous and paged media alike. In addition, the specification defines the area where the notes would be gathered / relocated in CSS if needed.</p>
<h2 id="layout-the-notes" tabindex="-1">Layout the notes</h2>
<h3 id="footnotes-in-w3c-css-specs" tabindex="-1">Footnotes in W3C CSS specs</h3>
<p>Let’s start by looking at what already exists in the W3C specifications. A part of the <a href="https://www.w3.org/TR/css-gcpm-3/#footnotes">CSS Generated Content for Paged Media Module</a> (css-gcpm-3) is dedicated to footnotes. The first section defines the terms of the footnote objects: <code>footnote element</code>, <code>footnote marker</code>, <code>footnote body</code>, <code>footnote call</code>, <code>footnote area</code> and <code>footnote rule</code>. These definitions can be applied to all types of notes. For the rest of this article, these same terms will be used without the prefix “foot” to the term footnote.</p>
<p>The specification also describes how to create footnotes in a page with the following code:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br><span class="token atrule"><span class="token rule">@footnote</span></span> <span class="token punctuation">{</span><br><span class="token property">float</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span><br>/_ style of footnote area _/<br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token selector">span.footnote</span> <span class="token punctuation">{</span><br>/_ Display span as footnote _/<br><span class="token property">float</span><span class="token punctuation">:</span> footnote<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>This code also creates special <a href="https://www.w3.org/TR/css-gcpm-3/#footnote-counters">footnote counter</a> and special pseudo-elements for <a href="https://www.w3.org/TR/css-gcpm-3/#footnote-call">footnote calls</a> (<code>::footnote-call</code>) and <a href="https://www.w3.org/TR/css-gcpm-3/#footnote-marker">footnote markers</a> (<code>::footnote-marker</code>). The position, size and the styles of the footnote area are defined by the <code>@footnote</code> declaration. The specification does not give much indications, <a href="https://www.w3.org/TR/css-gcpm-3/#footnote-area">only a couple of paragraphs and a lot of issues and unanswered questions</a>. The advantage is that we can do many proposals without conflicting with the current specifications.</p>
<p>A mechanism is needed to move the note element into specific areas of the page or the document. To do this, inspiration can be taken from a mechanism already present in the draft of the paged media specifications, the <a href="https://www.w3.org/TR/css-gcpm-3/#running-elements">running element</a>: by adding the <code>position: running()</code> declaration, an element can be removed from the flow, and reused in multiple places, perfect for the running heads of a book for example.</p>
<h3 id="new-proposal-to-create-note" tabindex="-1">New proposal to create note</h3>
<p>This proposal is for a new way to create and place notes, based on new values (<code>note()</code> and <code>element()</code>) for properties already in the CSS specifications (<code>position</code> and <code>content</code>). This could work for both media: paged media and screen.</p>
<p>In paged media, a new <code>@note-area</code> at-rule must also be added to be able to move notes from the page to a specific place. Here is an example of how it would work:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.note</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>notes<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br><span class="token atrule"><span class="token rule">@note-area</span></span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>notes<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>This proposal can also work for continuous media by placing the notes in a new pseudo element <code>::notearea</code> that is created at the end of the declared element (just before the pseudo element <code>::after</code>). All the notes contained in the element would be placed in this new pseudo element.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.note</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>notes<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">section::note-area</span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>notes<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h4 id="the-note()-and-element()-functions" tabindex="-1">The <code>note()</code> and <code>element()</code> functions</h4>
<p>In both cases, the <code>note()</code> function declares an element as a note, removes the element from the principal flow, and makes it available to place in a page margin-box, a page note-area <code>@note-area</code> or a <code>::note-area</code> pseudo element using <code>element()</code>.</p>
<p>The <code>element()</code> function already exists in <a href="https://www.w3.org/TR/css-gcpm-3/#creating-footnotes">css-gcpm-3</a>. It's usable in the <code>content</code> property of margin boxes. The proposal would see it used in the new page area <code>@note-area</code> or a <code>::note-area</code> pseudo-element.<br>
To make <code>element()</code> work with <code>note()</code>, a specific behaviour needs to be added that can be declared via an optional keyword <code>all-once</code>. The value of all the assignments of the document or the page are used. ie. all the note elements are displayed in the new area where they're assigned in the same order of the flow and have only one assignment in the document or in the page (the elements are not repeated).</p>
<p>The note element inherits from its original position in the document, but is not rendered there, instead a <code>::note-call</code> pseudo-element is created and inserted in the original position of the note. When the note element is displayed in this new area, a <code>::note-marker</code> corresponding to the<code>::note-call</code> is created before the note body.</p>
<h3 id="using-css-layout-possibilities-with-the-notes-area" tabindex="-1">Using CSS layout possibilities with the notes area</h3>
<p>The <code>@note-area</code> at-rule creates special <a href="http://dev.w3.org/csswg/css-page/#page-area">page areas</a> that can be used to display notes elements via the <code>element()</code> function. The other central idea of this proposal is that any of the CSS layout facilities can be used to create, position and size note areas: float, absolute positioning, grid, exclusion, etc. Some of those possibilities will now be explored.</p>
<h4 id="put-the-notes-in-the-margin-boxes" tabindex="-1">Put the notes in the margin boxes</h4>
<p>Sometimes the note area doesn't even need to be declared. Using the <code>element()</code> function, the margin-boxes can now receive the content of the <code>note</code> elements. Let’s look at an example: the following rules result in the placement of the note elements inside the left-top margin box. Margin and text alignment of the note elements are set to the note element itself and padding of the margin box are set in <code>@left-top</code> at-rule.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br><span class="token atrule"><span class="token rule">@left-top</span></span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>sidenote<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token property">padding</span><span class="token punctuation">:</span> 5mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.sidenote</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>sidenote<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br><span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/notes_margin-box.png" /></figure>
<h4 id="use-of-float-pages" tabindex="-1">Use of float pages</h4>
<p><a href="https://www.w3.org/TR/css-page-floats-3/">CSS Page float</a> specifications add some values to the <code>float</code> property to positioning element in a page context and propose the <a href="https://www.w3.org/TR/css-page-floats-3/#propdef-float-reference"> <code>float-reference</code> property</a> to indicate the &quot;reference container&quot; for a floated element. Extensive use will be made of these properties in the following examples.</p>
<p>First, it can be used to create classical footnotes. The following code sets the default values of properties for <code>@note-area</code> and places notes at the bottom of the page:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@note-area</span></span> <span class="token punctuation">{</span><br><span class="token property">float</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span><br><span class="token property">float-reference</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br><span class="token property">max-height</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Using float on the page and negative margins can be helpful in creating the note area half on margin, half on text content.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br><span class="token atrule"><span class="token rule">@note-area</span></span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>sidenotes<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token property">float</span><span class="token punctuation">:</span> top right<span class="token punctuation">;</span><br><span class="token property">float-reference</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br><span class="token property">width</span><span class="token punctuation">:</span> 42mm<span class="token punctuation">;</span><br><span class="token property">margin-right</span><span class="token punctuation">:</span> -30mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token selector">notes</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>sidenotes<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/notes_sidenotes.png" /></figure>
<p>Since a note area is a box, it's possible to layout the area itself (with columns for example).</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br><span class="token atrule"><span class="token rule">@note</span></span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>notes<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><br><span class="token property">float</span><span class="token punctuation">:</span> bottom right<span class="token punctuation">;</span><br><span class="token property">page-reference</span><span class="token punctuation">:</span> float<span class="token punctuation">;</span><br><span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span><br><span class="token property">columns</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token selector">notes</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>notes<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/notes_note-area-columns.png" /></figure>
<h4 id="multiple-notes-areas-in-a-page" tabindex="-1">Multiple notes areas in a page</h4>
<p>There are already a lot of use cases in critical editions where you can find multiple kind of notes (bibliographical references, explanations, etc.) The <code>@note-area</code> at-rules declaration make multiples notes easier by mixing multiple note areas in the same page context. The <code>@note-area</code> may be followed by a custom identifier if wanted.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br><span class="token atrule"><span class="token rule">@note</span> refsA</span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>refsA<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token property">float</span><span class="token punctuation">:</span> bottom left<span class="token punctuation">;</span><br><span class="token property">float-reference</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br><span class="token property">width</span><span class="token punctuation">:</span> 30mm<span class="token punctuation">;</span><br><span class="token property">margin-left</span><span class="token punctuation">:</span> -12mm<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@note</span> refsB</span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>refsB<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token property">float</span><span class="token punctuation">:</span> bottom right<span class="token punctuation">;</span><br><span class="token property">float-reference</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br><span class="token property">width</span><span class="token punctuation">:</span> 60mm<span class="token punctuation">;</span><br><span class="token property">columns</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token selector">note.refs-catA</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>refsA<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">note.refs-catB</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>refsB<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/notes_multiple-1.png" /></figure>
<p>In the other following example, a new value <code>line</code> is added to the <code>float-reference</code> property. This allows creation of marginal notes, i.e., notes paced to one side of the text with its first line on the same height of the flow that contains the note-call.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br><span class="token atrule"><span class="token rule">@left-top</span></span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>refs<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><span class="token punctuation">;</span>  <br> <span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@bottom-left</span></span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>footnotes<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br><span class="token property">vertical-align</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token selector">note.refs</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>refs<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token property">float-reference</span><span class="token punctuation">:</span> line<span class="token punctuation">;</span><br><span class="token property">width</span><span class="token punctuation">:</span> 50mm<span class="token punctuation">;</span><br><span class="token property">padding-left</span><span class="token punctuation">:</span> 50mm<span class="token punctuation">:</span><br><span class="token punctuation">}</span><br><br><span class="token selector">note.footnotes</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>footnotes<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/notes_multiple-2.png" /></figure>
<h4 id="notes-for-multi-column-layout" tabindex="-1">Notes for multi-column layout</h4>
<p>In a multi-column layout, note elements may have to be displayed at the bottom of each column. This means that multiple note areas might have to be created for the same fragmented flow.</p>
<p>Because a column is a anonymous box, there is currently no way in CSS to target a particular column of a multi-column element. This can be fixed by using the <a href="https://www.w3.org/TR/css-page-floats-3/">CSS Page float</a> properties. The <a href="https://www.w3.org/TR/css-page-floats-3/#propdef-float-reference"><code>float-reference</code> property</a> indicates the &quot;reference container&quot; for a floated element and the value <code>column</code> indicates that the float reference is the column in which the floated element is placed in a multi-column environment.</p>
<p>This reference can be used to indicate creation of note areas in the columns of the page where the note appears. As many boxes as necessary are created on each column. All the note areas have the same properties and can be targeted by one <code>@note-area</code> rule only.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@page</span></span> <span class="token punctuation">{</span><br><span class="token atrule"><span class="token rule">@note-area</span></span> <span class="token punctuation">{</span><br><span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">element</span><span class="token punctuation">(</span>notes<span class="token punctuation">,</span> all-once<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token property">float</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span><br><span class="token property">float-reference</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#content</span> <span class="token punctuation">{</span><br><span class="token property">columns</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#content note.notes</span> <span class="token punctuation">{</span><br><span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">note</span><span class="token punctuation">(</span>notes<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/notes_columns.png" /></figure>
<p>Here are some examples of the CSS layout facilities used to layout notes areas of paginated media. Of course, the CSS layout facilities can also be used in continuous media on the pseudo element <code>::area-note</code>. Over to you to use your imagination.</p>
<p>This article is an overview of the specifications imagined for the notes, and is an extract from the <a href="https://github.com/w3c/css-print/issues/3">issue</a> published in the GitHub of the CSS print community group. That issue provides more detail than the few properties we have presented here and a few others (note policy for example). You are invited to take a look at this more complete document and comment on it. The specifications are a community work and it is only together that we will be able to improve them.</p>

      </section>
      
      <section class="data" id="pagedjs-0.1.40">
        <h1></h1>
        <h2 id="new-release!" tabindex="-1">New release!</h2>
<p>The 0.1.40 is now available to download from <a href="https://unpkg.com">unpkg</a> or <a href="https://www.npmjs.com/package/pagedjs">npm</a> (and on our <a href="/documentation/releases">release page</a>).</p>
<p>In this release:</p>
<ul>
<li>@julientaq added support for the <code>position: fixed</code> property: if one of your element is set as <code>fixed</code>, it will be repeated on all pages without having to struggle with <code>margin-boxes</code>, <code>position: running</code> or <code>string-set</code>. Be aware that the origin will always be the page, thus you’ll need to set up negative margins to your element to bring it in the bleeds.</li>
<li>Antonio Norman (@antman3351) <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/issues/180">found a bug and its fix</a>, when you had multiple <code>string</code> elements on the same page.</li>
<li>Support for period in <code>id</code> attribute: <code>.</code> is for <code>class</code> and <code>#</code> is for <code>id</code>. But the specs allow you to use a <code>.</code> in an <code>id</code>!<br>
Paged.js can now handle <code>&lt;p id=&quot;#this.paragraph&quot;&gt;</code> without crashing.</li>
<li>@Stouffi fixed a couple of bugs in the chunker, and documented those quite well <a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/101">here</a> and [there]<a href="https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/98">https://gitlab.coko.foundation/pagedjs/pagedjs/merge_requests/98</a>).</li>
<li>Fred Chasen (@fchasen) update the Jest infrastructure so tests are now running fine.</li>
<li>Guillaume (@mogztter) wanted to be sure that we’d all follow the best practices without having to spend hours checking our spaces/tabs issues, so he set up eslint, put is hands in 58 files, cleaned all the tabulation issues we had in the code and updated.</li>
</ul>
<p>Thanks to our awesome contributors you can now enjoy this new version.</p>
<p>See you all very soon!</p>

      </section>
      
      <section class="data" id="finding-letters-for-atla">
        <h1></h1>
        <p><em>Creating Templates</em> is a series of articles in which one designer will explain the choices they made for a collection or a book, following the process from the typical design workflow to the output in modern typesetting using Paged.js. For the first article of the series, we’ll look at how Julien designed a template to be used in Editoria by Atla Open Press.<br>
Established in 1946 as the American Theological Library Association, Atla is a membership association of librarians and information professionals, and a producer of research tools, committed to advancing the study of religion and theology.</p>
<p>Atla Open Press publishes open access books, journals, and other serials that cover subjects at the intersection of librarianship and religious and theological studies. Their books help to shape, guide and support innovative library services and enhance professional development for theological librarians and the field of religious studies.</p>
<p>Atla is moving its publishing workflow toward using <a href="https://www.editoria.pub">Editoria</a>, the community-driven platform to make books that Coko is working on. As early adopters of Editoria, Atla are an example of how you can change your publishing workflow by giving more space to collaboration with anyone involved in the making of the book. As part as their collaboration with Coko, Julien worked with the folks at Atla to design a template to be used in Editoria, ready to be used with Paged.js. Atla have now offered the template back to the community with an open source license (the template will be released soon).</p>
<h3 id="the-physical-book" tabindex="-1">The physical book</h3>
<p>The primary form of the books published by Atla Open Press is digital: epub and PDF made for the screen, and the books are downloadable from their website. But the books are also produced as printed material, using Print On Demand services (or personal printers).</p>
<p>When the team started to work on the template, we explored an array of potential final output sizes for the book, and eventually we decided to go with a standard 6 × 9 inches (15.2 × 22.8 cm). Following the standard reduces the risk of errors when working with different printers, and if the reader needs to print the document at home, it’s pretty easy to put 4 pages per sheet of paper, reducing the waste without losing too much readability.</p>
<p>Once you have the size of your book, you’re ready to work. But what happens next is never a nice and easy sequence of steps to follow. It’s more like a series of trails and paths that we follow at the same time: fonts, font-size, leading, margins, etc. This production process is where the tension between aesthetics and readability has to be taken into account.</p>
<p>The first step is to figure out the number of characters which can be put on a page. The number of characters per line is the element that will determine a great part of the layout, so it needs to be carefully considered. Most books for scholars allow for more than the 55/65 characters per line usually advised for ebooks. With that in mind, letter choice can begin..</p>
<h3 id="the-typefaces" tabindex="-1">The typefaces</h3>
<p>Typesetting is the act of putting letters on paper in a way that gracefully mixes legibility and aesthetics. Therefore, it starts with drawn letters. Always.</p>
<p>Here is a useful checklist:</p>
<ol>
<li>Remember the kind of letters you’ll need to work with.</li>
</ol>
<p>How many of letters outside of the Latin glyphset will you need? Is your content only English, or do you have letters from extended Latin, or Greek? What about Cyrillic? Does it include a section of an old transcript from oral languages that has just been included in the Unicode? Since the books Alta publishes are about theology and religions, it’s not gambling to say that there will be a lot of non-English characters.</p>
<ol start="2">
<li>Remember every member of the family you’re going to need</li>
</ol>
<p>Sometimes you need to emphasise one part of the text, or show that a word has a different meaning or comes from another language. While an emphasis is not always set as italic, that has become over the year a kind of a standard: the <code>em</code> HTML element for the emphasis is by default an italic in almost all browsers.</p>
<p>Therefore, Roman letters are not enough for this template. So you need to be sure that the letters will have those styles available. Italic is the minimum. Bold is seldom used for emphasis in ebooks as it’s often not subtle enough, but it’s always useful to have that option for headers and structure.</p>
<ol start="3">
<li>Remember the type color</li>
</ol>
<p>Whatever font you choose, you’ll need to have the right balance between white and black on the page (<em>ie</em> the type color). That balance depends on how the type is set up: the drawings of the letters, the number of characters per line, the options for the justification: spacing, kerning, the width of the white space, etc. Depending on the content, you may want to have a darker feeling, that your page is filled with content, or you may want to be precious and have a lot of white space, giving a feeling of luxury. A good type color is one that is not too black, not too white, and dynamic enough to never feel grey.</p>
<ol start="4">
<li>Remember that the look of the book is different than the experience of the book</li>
</ol>
<p>I think that Tarantino said once that he never watched a movie without knowing it was a movie. I can say that I have never read a book without knowing it was a book: my designer’s eyes always get the over all feeling first: the type color, the font chosen, the margins, the alignments, etc. I understand the book before I start reading it. But here is the trick: a book can feel well designed and perfectly crafted, but the experience you’ll get from its reading may be different. So don’t forget to print and test and have a good look, print again, check again, until you’re happy with the feeling as much as the look.</p>
<h4 id="choosing-the-right-fonts" tabindex="-1">Choosing the right fonts</h4>
<p>As a designer, I used to follow every link that led to a new typeface or a new foundry. I bought fonts just because I liked their look even if I had no clue about how I would use them. So I got to look at fonts all day long, teaching my eye to look for specificities and to remember the feelings those could give. Choosing a font is all about finding the tiniest bit of the letter that will give the first impression on the book.</p>
<p>In Atla’s case, my first idea was to look at the classics. Going with a well-known letterform will give a sense of trust and truthfulness. But at the same time, I wanted to find something that was representative of the personality of the publishing house. Warm and friendly. Serious and friendly, the people you want to work with. And then also, there is the need for the font to support a wide range of letters and glyphs, and that’s generally the place to start.</p>
<p>I started by looking at what I knew would answer that question, first choice being the <a href="https://brill.com/page/1228?language=en">Brill</a> typeface, designed by the folks at <a href="http://www.tiro.com/">Tiro Typeworks</a>. Significant factors were firstly, because it supports Latin, Greek and Cyrillic, and secondly because each letter has been designed with care. However, you can’t really use that font for an Open Source project: as the Brill end user license agreement specifies that the font can only be used in a non-commercial environment, so that rules out using it for Atla.</p>
<p>Thankfully, over the last 20 years, there has been a lot of movement in the world of open source type foundries, and there is even a specific license, the SIL Open Font License (OFL), in use since 2005. I decided to investigate what the foundries offered, and I have spent a good deal of time finding what is available and identifying what would be a good fit for Atla.</p>
<p>The <a href="https://fontlibrary.org/">font library</a> is often a good place to start looking for open source fonts. It includes a CDN that let you test your fonts in your files without having to build any <code>@font-face</code> functions. Language support generally needs to be a priority especially for as much of the Latin as possible, and the more languages the better, starting with Greek and Cyrillic, as they are often designed with the same tools and movements as Latin is designed with. Most of the time when you look at your content, the letters coming from another language will fit right in place.</p>
<h5 id="eb-garamond" tabindex="-1">EB Garamond</h5>
<p>First, the classic of the classics, the Garamond, but the one under OFL licence, <a href="http://www.georgduffner.at/ebgaramond/">EB Garamond</a>. The glyph set and the open-type features are quite interesting. These are in optical sizes: you wouldn’t use the same glyphs for a text set in 12pt or for a text set in 10pt, which is a tremendous work. But there is one caveat: there is no bold, so that would leave less options for the headings structure.</p>
<figure><img src="/images/EBgaramond.png" class="eighty" /></figure>
<p>The other issue with the Garamond is the hardness of its shapes: the plume and the calligraphic gesture behind the letters survived in the digitization of those letters. While this adds a lot of authority to the letters, it doesn’t give the warmth and kindness I am looking for.</p>
<h5 id="noto-serif-%26-linguistics-pro" tabindex="-1">Noto Serif &amp; Linguistics Pro</h5>
<p><a href="https://www.google.com/get/noto/">Noto fonts</a> is an attempt from Google to have one super font family that supports all languages ever written with the same look and feel. While this seems to be an impossible task, Noto fonts already supports a wide variety of languages, which makes it a pretty good starting point to show international content. For example:</p>
<figure><img src="/images/NotoSerif.png"  class="eighty" /></figure>
<p>A font is like a color: it carries a lot of feeling in itself, but to have the most complete overview of its specificities, you need to compare it with another. So I you need to check the foundries.</p>
<p>The other font I looked at was <a href="https://fontlibrary.org/en/font/linguistics-pro">Linguistics Pro</a>, the most recent take on the Utopia Nova. The story of those letters goes back to 1989 when Robert Slimbach designed the font for Adobe and licensed to the TeX Users Group (TUG) for free modification and redistribution. Over the years, it has evolved to include polytonic Greek, modern and traditional Cyrillic, Vietnamese, among others, and was re-released in 2016 by Stefan Peev. It includes italic, bold and bold-italic, which is useful for headings.</p>
<figure><img src="/images/Linguistics.png"  class="eighty" /></figure>
<p>While the two fonts feel close over all in look and feel, they turn out to be very different when you inspect them carefully:</p>
<figure><img src="/images/notovslinguistics.svg"  class="eighty" /></figure>
<p>Noto Sans is more friendly than Garamond or Linguistics. It’s a modern serif that brings back a lot of manual gestures: the terminals of the f, r or capital S are all about calligraphic feelings, while the mechanical serifs are all about math and geometry. Those two characteristics are pretty useful when it comes to sharing shapes between letters from different parts of the world.</p>
<p>Linguistics Pro, on the other hand feels less modern. It’s based on a character that could have been released at the end of the 18th century when typographers were slightly moving away from their calligraphic roots to enter the world of rationality that was coming. Thus, we can find in those font characters, the characteristics of a scientifically drawn letter and the humanity of rounded serif terminals, never being sharp: a friendly but trusty face.</p>
<p>The last step is checking the fonts in context of a real paragraph, using text you can actually read, and no <em>lorem ipsum</em> placeholders.</p>
<p>The sizes of the letters are different: the Linguistics Pro family has a bigger ratio between the ascenders and the x-height than Noto. This gives a lighter feeling: the text will need less leading to achieve a good type black, and we’ll have more lines of text per page, which is a huge win when it comes to monograph books: reducing the amount of paper needed without losing readability is the real thing we’re trying to achieve.</p>
<figure><img src="/images/paragraph.svg"  class="eighty" /></figure>
<p>So let’s try Linguistic Pro first, and we’ll see if we need to change later on.</p>
<p>Spoiler: <a href="https://books.atla.com/atlapress/catalog/view/33/30/198-1">it works fine</a>.</p>
<p><em>The next article of the series will be all about the amount of content we can put on a page, defining margins, headings, and page types. See you all very soon.</em></p>

      </section>
      
      <section class="data" id="welcome-to-paged.js-0.1.38">
        <h1></h1>
        <!-- We just released a new version of Paged.js! The 0.1.38 is now available to download from [https://unpkg.com](https://unpkg.com/browse/pagedjs@0.1.38/dist/) or you can install it using [npm](https://www.npmjs.com/package/pagedjs). -->
<h2 id="new-in-this-release%3A" tabindex="-1">New in this release:</h2>
<p><em>Somehow, the release has been made before the code for the string-update feature was merged. Since the release , it will be part of the 0.1.39. If you want to use that code today, you can download it from <a href="/documentation/releases">here</a></em></p>
<p>This is a minor release which includes one item:</p>
<ul>
<li>updated our support for the string-set property. Following the W3C specs, you have now more options to define which title will appear on the page. Here is the schema that helped us implement it, courtesy of Julie Blanc.</li>
</ul>
<figure> <img src="images/graphic-issue-string.png"  /></figure>
<h2 id="additional-items%3A" tabindex="-1">Additional items:</h2>
<ul>
<li>
<p>Thomas Parisot and Fred set up an automated workflow to publish new versions when the gitlab codebase is updated. This will help us provide better support to the people who implement Paged.js in other tools or workflows.</p>
</li>
<li>
<p>Pagedjs-CLI (now in its version 0.0.10) is updated to support post-processing PDF. As a first feature, we’re now able to define the crop box and the margin boxes of the PDF. Also if you use the CLI your PDF will now be tagged!</p>
</li>
<li>
<p>We’re also documenting the roadmap for the coming months to give you a better overview of where we’re going, and how you could help if you want to. We’ll share it soon!</p>
</li>
</ul>
<h2 id="updated-documentation" tabindex="-1">Updated Documentation</h2>
<p>We have updated the list of the Paged media features that paged.js supports. It contains links to some examples we made and to the W3C specifications. You’ll find everything in our <a href="http://localhost:1313/documentation/cheatsheet/">documentation</a>. Please drop us a line if something is unclear, we’ll be happy to make a tutorial for it.</p>
<h2 id="hugo-component" tabindex="-1">Hugo Component</h2>
<p>For those who never heard of it, Hugo is an open source static site generator written in Go, blazing fast and pretty efficient. It’s packed with a ton of features and ideas so smart that building the paged.js website with it has been a pleasure. One of the features we need for the website is Paged.js integration to make books out of the HTML. Thus, we made an implementation of <a href="https://gitlab.coko.foundation/julientaq/pagedjs-hugo">Paged.js for Hugo</a>. Hugo has a really well thought out theme engine: to be able to use the print script you only need to add the information in your config theme, <em>et voilà</em>. It’s still early and experimental, but if you hit the top right button on this page, you can see what it does. Feel free to raise a GitLab issue if you find any.</p>
<h2 id="paged.js-on-reddit" tabindex="-1">Paged.js on Reddit</h2>
<p>Last week, we were mentioned on <a href="https://www.reddit.com/r/javascript/comments/f5syqi/pagedjs_a_free_and_open_source_javascript_library/">Reddit</a>! We ended up answering some questions as an improvised Q&amp;A session. Since keeping track of things on Reddit is not easy, here are a quick overview of some questions and our responses.</p>
<h3 id="from-%2Fu%2Fharmonicascendant" tabindex="-1">From /u/HarmonicAscendant</h3>
<blockquote>
<p>“I am wondering how it could best work with markdown &gt; pandoc to HTML &gt; paged.js to PDF with Chromium”.</p>
</blockquote>
<p>Paged.js is a js library, you can use it in any workflow :) For instance, the paged.js website is developed using Hugo, documentation is written in Markdown, and the result is a website, to which we added a button to run paged.js, preview the book in the browser and make a PDF by printing the page. And yes, using CSS for the layout is easier than going with Tex :) You can make a PDF with any HTML source :)</p>
<h4 id="from-%2Fu%2Febichuhamster" tabindex="-1">From /u/ebichuhamster</h4>
<blockquote>
<p>“Isn’t this a thing already just using css?”</p>
</blockquote>
<p>It should be. W3C wrote (and keep writing) a lot of specifications for print, but browsers haven’t really implemented those. That’s why we’re making a polyfill: you can write the CSS following the specifications even if they’re not implemented yet and call Paged.js to transform those into rules that our browsers can understand today. When the browsers will have implemented all the things we need, we’ll stop working on Paged.js (but don’t expect to see that to happen in a near future).</p>
<h4 id="from-%2Fu%2Fbrainbag" tabindex="-1">From /u/brainbag</h4>
<blockquote>
<p>“Could you say more about how you implemented this? We're using puppeteer to render PDFs server-side, but I've been waiting for client side css to have better handling so we can drop it.”</p>
</blockquote>
<p>You can check the not so-well-hidden button top right <a href="https://www.pagedjs.org/posts/2020-02-19-toc/">here</a> to see Paged.js in action. It will run paged.js, show the preview in the browser and offer you to print as PDF. Client side PDF rendering! A small warning though: Chromium and alike are the only browsers that let you print in custom paper size (A5, Square, custom, etc.). In the case that you’d like to set the page size at A4 or letter, you’ll be safe in almost every browser.</p>
<h4 id="from-%2Fu%2Fdhimmel" tabindex="-1">From /u/dhimmel</h4>
<blockquote>
<p>“[What about] Numbering pages on the output PDF”</p>
</blockquote>
<p>This is pretty basic Paged media specs stuff, we got you covered in the doc. (you may want to read from the top of the page though) <a href="https://www.pagedjs.org/documentation/07-generated-content-in-margin-boxes/#page-counter">https://www.pagedjs.org/documentation/07-generated-content-in-margin-boxes/#page-counter</a></p>
<blockquote>
<p>“Numbering lines on the output PDF”</p>
</blockquote>
<p>A solution build by the community: <a href="https://github.com/rstudio/pagedown/issues/115">https://github.com/rstudio/pagedown/issues/115</a> I’ll make a post about that. We also have a simple solution to build a baseline grid: <a href="https://www.pagedjs.org/images/linecount.png">https://www.pagedjs.org/images/linecount.png</a></p>
<blockquote>
<p>”Floating figures and tables to avoid large chunks of whitespace”</p>
</blockquote>
<p>We do have solutions to do that, but it depends on your content and how you want it to behave. Floating top is pretty much easy to do. But Julie, our specialist of specifications wrote quite a good article about that: <a href="https://www.pagedjs.org/page-floats/">https://www.pagedjs.org/page-floats/</a></p>
<blockquote>
<p>“multiple columns on PDF pages”</p>
</blockquote>
<p>Yes sir :) We’re using the browser and pages are made using css grid and flex, so you can do pretty much what you would do in a browser for screen. I’ll try to find some examples in the coming days.</p>
<h4 id="from-%2Fu%2Fserei" tabindex="-1">From /u/Serei</h4>
<blockquote>
<p>“Is it possible to make footnotes that appear at the bottom of the current page?”</p>
</blockquote>
<p>The W3C specs for the footnotes are still being finalised, but we are actively working on some solutions to follow these specs (even joining the w3c print working group to make those evolve). We have some solutions for margin notes <a href="https://gitlab.coko.foundation/pagedjs/experiments/tree/master/margin-notes">https://gitlab.coko.foundation/pagedjs/experiments/tree/master/margin-notes</a> and we made a couple of books with footnotes, but it needed some manual works to make sure the layout was great.</p>
<p>We’re now upgrading the library core to handle multiple flows and float-top and bottom, which would allow us to have footnotes, and ones that would run on multiple pages if needed. We’ll make an article about that soon.</p>
<h2 id="one-more-for-the-road" tabindex="-1">One more for the road</h2>
<p>The excellent <a href="https://hugogiraudel.com">Hugo “Kitty” Giraudel</a> made a tool to turn any CSS selector into proper English. If you don’t understand why your CSS properties are not being applied, or if you only want to get better at targeting elements with precision, this is the webpage to consult: <a href="https://hugogiraudel.github.io/selectors-explained/">https://hugogiraudel.github.io/selectors-explained/</a>. It also includes the selector specificity score.</p>
<p>And that’s all for this time folks, but we keep working.</p>
<p>Stay tuned!</p>

      </section>
      
      <section class="data" id="return-from-prague:-the-future-of-web-to-print">
        <h1></h1>
        <h2 id="report-about-the-w3c-workshop-on-css-print" tabindex="-1">Report about the W3C Workshop on CSS Print</h2>
<p>On Thursday, February 13th, a group of people gathered at the University of Economics in Prague (Czech Republic) to participate in the<a href="https://wiki.csswg.org/planning/print-workshop-2020">W3C Workshop on CSS Print</a> as a part of the XML Prague conference. The event was organized by Rachel Andrew, Jirka Kosek and Dave Cramer, members of the CSS working group. Between 30 and 40 people were present, showing a real interest in CSS print.</p>
<p>The workshop started with a <a href="https://noti.st/rachelandrew/Hy20NS/introduction-to-the-css-working-group#sWtnkmF">presentation by Rachel Andrews</a>, talking about the work of the W3C about the creation of freely open standards for the Web and how the working groups operate, particularly the CSS working group. Rachel recalled that standards take time to set up, because of the specification process, but also because of the lack of funding for work on print specifications. She enumerated a list of possibilities for making things better. Anyone can and is allowed to contribute to specifications (no need to be part of W3C or need permission). Reading and commenting on <a href="https://github.com/w3c/csswg-drafts/issues">specifications issues</a> is a good start, as is showing use cases or developing web platform tests. It's also possible to contribute by providing examples and diagrams to specifications. If we want the specifications to improve, there's no secret; the W3C needs to find people to work on print-related specifications, testing and implementations.</p>
<p>After Rachel, several people who had submitted their paper positions, gave shorter presentations about their work and the tools used with CSS print and paged media.</p>
<ul>
<li>Dave Cramer started <a href="https://lists.w3.org/Archives/Public/public-css-print/2020JanMar/att-0032/Cramer-PrintWorkshop-XMLPrague.pdf">with his work at Hachette Group</a>. Hachette have produced (many) PDFs with HTML and Print CSS over the last ten years. He also talked about the fluctuating implementations of paged media and generated content for paged media in web browsers.</li>
<li>Michel Miller <a href="https://lists.w3.org/Archives/Public/public-css-print/2020JanMar/att-0035/CSSWG_Antenna_House_XML_Prague_2020.pdf">presented Antenna House</a> and their custom AH formatting engine used to make CSS and XSL-FO paged media outputs.</li>
<li>Cornelia Kremlin and Katharina Udemadu <a href="https://lists.w3.org/Archives/Public/public-css-print/2020JanMar/att-0036/Compart-PositionPaper.pdf">presented Compart</a>, a supplier of document and content technology solutions. Compart is working on the creation of transactions documents using data from an XML data source to create multiple outputs, including PDF.</li>
<li>Andreas Jung <a href="https://lists.w3.org/Archives/Public/public-css-print/2020JanMar/att-0034/01-part">presented his print-CSS. Rocks project</a>, a website where you can find information about tools that exist to create PDF outputs from HTML or XML content. The project offers tutorials and lessons and compares tools and implementations through small, simple tests.</li>
<li>Liam Quin <a href="https://lists.w3.org/Archives/Public/public-css-print/2020JanMar/att-0041/02-css-workshop-prague.pdf">spoke on a more general level</a> about why pages matter in apps and websites and should be taken into account. He reminded us that the things that people need today are not only about pretty output but more importantly about functionality (initial caps, indexes, marginalia…).</li>
<li>I also <a href="http://slides.julie-blanc.fr/20200213_W3C-prague.html">presented Paged.js</a>, how the library works and our position in relation to browsers and needs.</li>
</ul>
<p>All the presentations talked about CSS pain points, print requirements, and some useful specifications that are not yet implemented in any browser or tools (such as handling the initial letter, for example). There is a real need and there are still too many things we can't do today. A lot of specifications are missing in browsers and tools and adoption of the standards is slow. Many tools also develop their own specific extensions to meet the needs of their users (such as page float, footnotes in multi-columns…) and the compatibility between tools is limited. In short, there is a huge amount of work to be done for full use of CSS print and CSS paged media.</p>
<p>A one-hour discussion involving all participants followed the presentations. Some questions which had been raised in the presentations, came up repeatedly:</p>
<ul>
<li>What are the missing parts and what can we do? How can we identify relevant features missing in Print CSS? Footnotes or mixed writing modes were often raised as examples where more work is needed.</li>
<li>In the existing specifications, how can we best prioritize the various needs of implementation? For example, there's some low-hanging fruit, and things Web developers will find useful (e.g. CSS exclusions), maybe we should start with that, because there's going to be strong interest in that.</li>
<li>Another example, @page size bug is a major issue in some browsers, impossible to hack, if we don't start there, the rest might be for nothing.</li>
<li>You can also see other questions and points by reading position papers and/or the transcription of the conversation <a href="https://www.w3.org/2020/02/13-printcss-minutes.html">here</a>.</li>
</ul>
<p>To date, the specifications for print/paged media have been developed under the flag of the (CSS WG). The group also works on a lot of other things; print and paginated media are not necessarily its priority. The work in this area is lost in the mass, not very visible, and the status of CSS draft specifications are unclear (unmaintained, work-in-progress, discontinued?) For example, Dave Cramer is now the only editor of generated content for paged media module and needs help. Writing layout specs is hard, and we need to figure out how to get enough people to contribute</p>
<p>So, during the final conversation, rather than make a wish list of new specifications, we focused on the process: how can we work more effectively with the CSS working group (CSS WG)?</p>
<p>As Liam Quin said in the conclusion of his presentation, &quot;nothing will go forward until the stakeholders are proactive.&quot; During this workshop, we could see that there is a core of people very interested in what's going on today with CSS for print and paged media. At the end of the workshop, a new community group was established as a place of our own to raise issues before bringing items to the CSS working group. Dave Cramer, supported by some of the participants, proposed this new group be added to the W3C as the CSS Print Community Group.</p>
<p>The purpose of the group is to “work together to gather use cases, help with specifications, and advocate for more and better implementations”. At the end of the day, the community group was launched and accepted in the list of the current W3C community group: <a href="https://www.w3.org/community/cssprint/.">https://www.w3.org/community/cssprint/</a>. You don't need to be part of W3C to join it, so jump in!</p>

      </section>
      
      <section class="data" id="our-position-paper-for-the-w3c-css-print-workshop">
        <h1></h1>
        <h1 id="paged.js" tabindex="-1">Paged.js</h1>
<p><em>Position paper for the W3C Workshop on CSS Print (February 13th, 2020)</em></p>
<p>Paged.js is a free and open source JavaScript library that paginates content in the browser to create PDF output from any HTML content. It was developed to meet the requirements encountered by Adam Hyde, Fred Chasen and Julien Taquet when building the book production platform Editoria: an open source solution was wanted and there were no existing solutions which did what Editoria needed. Right around that time, Julie Blanc joined the team and the four of us built it together.</p>
<p>Adam has spent years on helping organizations to define their own publishing workflows, and building publishing platforms. Fred has been working in the publishing field for quite a while and his work on epub.js has proven invaluable. Julien has been producing books with html and css for more than five years using a variety of tools, either at Book Sprints Ltd or for Coko. Julie was working on her PHD on evolution of design in typesetting and she was able to focus her research on the specifications which would be needed for the Paged.js project and how they might evolve.</p>
<p>Before the team jumped into the work, we decided to discuss the project first with the people in the field, and in January 2018, we organized the first such meeting at the MIT Press in Cambridge (MA). We were able to share our experience, examine existing solutions and share some of the experiments Fred has been working on.</p>
<p>Subequently, we started the next stage of development armed with the knowledge gained from that community meeting.</p>
<h2 id="paged.js%3A-a-polyfill-for-print-specifications" tabindex="-1">Paged.js: a polyfill for print specifications</h2>
<p>Following the Paged Media standards published by the W3C (ie the Paged Media Module, and the Generated Content for Paged Media Module), Paged.js acts as a polyfill for the CSS modules to print content in ways that are not normally supported by browsers.</p>
<h3 id="the-technical-bit-behind-paged.js" tabindex="-1">The technical bit behind Paged.js</h3>
<p>When Paged.js starts on a webpage, it reads the HTML content and the CSS rules defined in the links or the header, and starts the paginating work by modifying the DOM structure, adding HTML elements to build pages, and translating the CSS to render the layout. The HTML source doesn’t need any specific properties or elements, as all the layout is defined in the CSS.</p>
<p>The library interprets the declarations and translates them into CSS and JavaScript, either by converting them to common CSS styles or by replacing them with JavaScript implementations. To achieve this, the page model from the Paged Media Specifications has been rebuilt using grid and flex-box, and since we use the browser to render our pages, we can leverage all the work put into implementing other CSS specifications such as flex-box, grid, svg management, etc.</p>
<h3 id="three-modules" tabindex="-1">Three modules</h3>
<p>Paged.js is made of three modules that work hand in hand:</p>
<ul>
<li><strong>the chunker</strong> that fragments the content into discrete pages,</li>
<li><strong>the polisher</strong> that transforms the CSS declarations into ones the browser understands</li>
<li><strong>the previewer</strong> which shows how the book will be printed in the browser.</li>
</ul>
<h4 id="the-chunker" tabindex="-1">The chunker</h4>
<p>The chunker is the part of Paged.js that manages the fragmentation of the content to flow it into pages. To do so, it takes all the rendered content (with their css styles), creates a page (following the page model of the specs), and pust the content in the content area.</p>
<p>To find where the content needs to be fragmented, CSS-columns are used: each page is a column with width and height set to be exactly as the page content area will be in the paginated output. Once an element overflows the page height, a new page is created, and the rest of the content goes in. The chunker keeps doing that until all the content is laid out. Once the script is done, the content area of each page is an independent HTML element. Using CSS columns allows easier access to the fragmentation properties already implemented in browsers, such as page-breaks, element properties, or widows and orphans.</p>
<h4 id="the-polisher" tabindex="-1">The polisher</h4>
<p>Thanks to the CSStree library, the polisher parses the CSS and translates the CSS stylesheet into classes that the browser understands. For example, the properties of the <code>@page</code> rules are turned into HTML classes. In other words, you provide CSS that conforms to the standards, and Paged.js applies those on the transformed DOM.</p>
<p>This way, the system is able to handle running headers, page counters, or any CSS-generated content functions with CSS custom properties from the DOM. Paged.js also adds references to every node (for example, data references to find elements that are split between pages). This gives a complete control over the page layout and users can access these elements in CSS or Javascript with their classes if they want to go further with Paged.js and add their own functions.</p>
<h4 id="the-previewer" tabindex="-1">The previewer</h4>
<p>The previewer makes it possible to have a visual preview of the printed output directly in the browser with a graphical interface. This allows designers to access development tools to make changes and control the rendering of the composition. Using simple css properties, pagesare shown as facing pages, single ones on top of the other, the same way you would see those in the classic book design applications.</p>
<p>But Paged.js can also be run in a fully automated workflow where the PDF is generated server side. This makes use of a command line version of Paged.js based on Puppeteer to open a Chromium headlesss instance and create the PDF files.</p>
<h4 id="plug-into-paged.js" tabindex="-1">Plug into paged.js</h4>
<p>Paged.js is a modular library that runs each part of the code in a specific sequence: from the parsing of the content and styles, when a new page is created, when a new element is added on the page, when a page has finished rendering, to when the library has finished its job. This lets you add any custom module you may need. For example, to set the image as <code>page-float: top</code> you can follow this simple algorithm: when a <code>img</code> or a <code>figure</code> element gets rendered, remove it from the flow, and prepend it as the first element on the page. The same idea can be used to create a baseline rhythm where you can add <code>padding-top</code> to element which are not starting on the grid.</p>
<h2 id="a-community" tabindex="-1">A community</h2>
<p>For the last two years, the Paged.js project team has put a lot of effort into keeping the community informed and engaged. We regularly meet for a Mattermost chat with around 150 people, where we discuss issues, report on updates, code and plans for the various projects that are using Paged.js.</p>
<h3 id="projects" tabindex="-1">Projects</h3>
<p>Coko’s <a href="https://editoria.pub/"><strong>Editoria</strong></a> is the first project to include Paged.js export. With the developers, we’ve been working on providing support to explain how the library works and how they could add a templates manager, live update of the export when the css changes, etc. The users of Editoria are publishing houses who have a high expectations when it comes to the pdf output, and that offers us a wide variety of use cases.</p>
<p><a href="https://github.com/rstudio/pagedown"><strong>Pagedown</strong></a> is another interresting project that uses Paged.js to generate PDF for the Rstudio community. RStudio develops free and open tools for R, and enterprise-ready professional products for teams who use both R and Python to scale and share their work. Romalin Lesur and Yihui Xie have been advocating for HTML and CSS instead of Latex, and the monthly download numbers are pretty high.</p>
<p><a href="https://www.hederis.com/"><strong>Hederis</strong></a>, a platform to design books and publish PDFs uses Paged.js for previewing and updating the books. Hederis project founder Nelly McKesson was part of the Cambridge meeting and came to meet us during an Editoria event in San Francisco last year. She’s also contributing to the project codebase.</p>
<p><a href="https://github.com/Mogztter/asciidoctor-pdf.js"><strong>AsciidocPDF</strong></a> is a PDF converter for AsciiDoc based on web technologies. It allows complex layouts to be defined with CSS and JavaScript, while writing the content in AsciiDoc. Guillaume Grossetie and Thomas Parisot who are maintaining the tool are actually contributing back to Paged.js, offering us a tremendous help.</p>
<p><a href="https://panwriter.com/"><strong>PanWriter</strong></a> and <a href="https://peritext.github.io/ovide/"><strong>Ovide</strong></a> also use Paged.js, and we’re discussing developments with <a href="http://blog.sens-public.org/marcellovitalirosati/stylo/"><strong>Stylo</strong></a>, and others projects we’re helping.</p>
<p>Julie Blanc also worked on the <a href="https://villachiragan.saintraymond.toulouse.fr/"><strong>Villa Chiragan</strong></a> project that presented sculptures of the museum on the web. You can check the printer version if you print on any webpage, and you can also check what she managed to do using Paged.js <a href="https://villachiragan.saintraymond.toulouse.fr/impression">here</a>.</p>
<h3 id="workshop%2C-teaching-and-lectures" tabindex="-1">Workshop, teaching and lectures</h3>
<p>Since the beginning of the Paged.js project, the team has been part of a number of different events to introduce paged.js, from publishing events (such as the <a href="https://www.youtube.com/watch?v=3SvfARdZRA4">digital publishing summit</a> in Paris) to open source meetings and conferences (<em>Write the docs</em> at Mozilla's office in Paris, <em>journées du logiciel libre</em> in Lyon, <em>Fosdem</em>, etc.) to present the project, or to discuss with other members of the community.</p>
<p>We also spent quite some time organizing workshops and meetings to show Paged.js to editors and designers. Many workshops also take place in art and design schools so that future professionals are trained in these ways of doing. We hope to do more in the coming months and years.</p>
<p>By providing more examples of what can be accomplished using print CSS, we hope to advocate for better support of print-related standards in browser engines. It's our first goal, until then we will provide support via our work.</p>
<p>During the second half of last year, we rewrote the documentation, and made a new website (we’re working on it and hope for a release pretty soon). You can have a quick preview <a href="http://onepager--hungry-boyd-59d45a.netlify.com/">here</a> to have an idea of how it will be. We’ll also provides templates, insight into Paged Media specs, and use it as a platform to write for anyone who'd like to write a piece about what we're doing. We’ll also reprint some of the articles from<a href="http://www.pagedmedia.org/"> www.pagedmedia.org</a> as a way to highlight that information.</p>
<p>Following the same idea, the <a href="https://gitlab.coko.foundation/tools/pagedjs">repository</a> for Paged.js also contains some <a href="https://gitlab.coko.foundation/pagedjs/experiments">examples</a> which provide insight into how to build a table of contents, how to follow a baseline snapping layout, or use hooks, and even a first implementation of the footnotes.</p>
<h3 id="the-future-of-paged.js" tabindex="-1">The future of Paged.js</h3>
<p>As we now have a more mature library, we have stared to look at where we’d like to go with Paged Media. Therefore, as the time of writing this, we’re joining the W3C under the flag of the Cabbage Tree Lab as we want to be part of the continuing standards conversation.</p>
<p>Julien is now working on the community side of things, organizing events and fixing issues, keeping everyone happy while the codebase evolves. Julie is writing new specs ideas that we’ll hope to share and discuss as soon as possible. Fred is rewriting the whole chunker, as we’d like to support multiple flows, floats and offer a better footnote solution than the one we have now.</p>
<p>When this is done, we’ll layout a roadmap (more like a subway map) so anyone can contribute where they think they can best do so. Members of the community are also starting to offer services to those who may need custom development or specific stylesheest, as more and more users are getting confortable with designing books in browsers.</p>
<p>We welcome you to join us!</p>

      </section>
      
      <section class="data" id="build-an-index-with-pagedjs">
        <h1></h1>
        <p>Download the script here: <a href="https://gitlab.coko.foundation/pagedjs/experiments/blob/master/book-index/js/createIndex.js">https://gitlab.coko.foundation/pagedjs/experiments/blob/master/book-index/js/createIndex.js</a></p>
<h2 id="preparing-your-html" tabindex="-1">Preparing your HTML</h2>
<p>In the simplest terms, a book index is simply a key to locating information contained in a book. The main idea of the book index is to help the reader find information quickly and easily. It is not a way to locate in the book all the paragraph where the word &quot;music&quot; appears but to locate the places in the book where the word music is &quot;revealing&quot; in relation to the content. In this way, create an index is a semantic work that cannot be done automatically.</p>
<p>When you think your content is revelant and need to be in the index, simply add a span around the content:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>  General definitions of<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>book-index<span class="token punctuation">"</span></span> <span class="token attr-name">data-book-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>music<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>music<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> include common<br>  elements such as pitch, rhythm, dynamics, and the sonic qualities of timbre<br>  and texture.<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<p>Your span must contain at least two elements:</p>
<ul>
<li><strong>a class</strong>: this class is common to all index span elements of your document, you can name it as you wish</li>
<li><strong>a data attribute</strong>: this data attribut must be named <code>data-book-index</code>, it indicates the word(s) that will appear in the index</li>
<li>you can also add an id if you want but it's not required</li>
</ul>
<p>About the data attribute:</p>
<ul>
<li>all data attributes containing the same word will be combined in a single line in the index, so you can use the same data attribute several times in your document</li>
<li>it is possible to use spaces, capital letters and dashes in the data attribute, like this for example: <code>data-book-index=&quot;Wolfgang Amadeus Mozart&quot;</code></li>
<li>it is also possible to format the text with the <code>&lt;em&gt;</code> en <code>&lt;i&gt;</code> elements (only): <code>data-book-index=&quot;&lt;em&gt;String Quartet in C major&lt;/em&gt;&quot;</code></li>
</ul>
<p>Finally, you must add somewhere in your HTML an element in which the book index will be generated. It can be a section or a div but it must be indicated by an id (that you name as you wish):</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>book-index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<h2 id="use-the-script-with-paged.js" tabindex="-1">Use the script with paged.js</h2>
<ol>
<li>Add the <code>async</code> property to the paged.js script:</li>
</ol>
<ul>
<li>if you use paged.js with npm: <code>&lt;script async src=&quot;http://localhost:9090/dist/paged.polyfill.js&quot;&gt;&lt;/script&gt;</code></li>
<li>if you use the online script of paged.js: <code>&lt;script async src=&quot;http://unpkg.com/pagedjs/dist/paged.polyfill.js&quot;&gt;&lt;/script&gt;</code></li>
</ul>
<ol start="2">
<li>Add the book index script:</li>
</ol>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/createIndex.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<ol start="3">
<li>Call the book index scripthtml</li>
</ol>
<p>The book index need to be generated before that paged.js fragmented the content into pages. You need to the hook <code>before</code> to call the script.<br>
Add this code in the <code>head</code> of you html document:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>  window<span class="token punctuation">.</span>PagedConfig <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token function-variable function">before</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>        <span class="token literal-property property">spanClassIndex</span><span class="token operator">:</span> <span class="token string">"book-index"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">indexElement</span><span class="token operator">:</span> <span class="token string">"#book-index"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">alphabet</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<ol start="4">
<li>Use the print CSS properties in your stylesheet file to target the pages where the index elements appears:</li>
</ol>
<pre class="language-css"><code class="language-css"><span class="token selector">.link-page a::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">target-counter</span><span class="token punctuation">(</span><span class="token function">attr</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.link-page::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">", "</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.link-page:last-of-type::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.index-value::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">" – "</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="configuring-the-script" tabindex="-1">Configuring the script</h2>
<ul>
<li><code>spanClassIndex</code>: define the id element where the toc list will be create</li>
<li><code>indexElement</code>: define the id element where the toc list will be create</li>
<li><code>alphabet</code>: choose if you want the alphabetical elements (<code>true</code>) or not (<code>false</code>)</li>
</ul>
<h2 id="styling-the-book-index" tabindex="-1">Styling the book index</h2>
<p>The script generates a list with items you can style. Here is an example of a book index generated:</p>
<figure> <img src="/images/example-index.png" alt="Exemple of a generated book index" /></figure>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-index-generated<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-alphabet-element<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>alphabet-element-A<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-index-element<span class="token punctuation">"</span></span> <span class="token attr-name">data-list-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Apple<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index-value<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Apple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>links-pages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-23<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-index-element<span class="token punctuation">"</span></span> <span class="token attr-name">data-list-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Apricot<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index-value<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Apricot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>links-pages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-15<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-35<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-index-element<span class="token punctuation">"</span></span> <span class="token attr-name">data-list-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Avocado<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index-value<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Avocado<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>links-pages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-19<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-alphabet-element<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>alphabet-element-B<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-index-element<span class="token punctuation">"</span></span> <span class="token attr-name">data-list-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Banana<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index-value<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Banana<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>links-pages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-38<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-index-element<span class="token punctuation">"</span></span> <span class="token attr-name">data-list-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Blackberry<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index-value<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Blackberry<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>links-pages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-17<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-24<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-alphabet-element<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>alphabet-element-C<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-index-element<span class="token punctuation">"</span></span> <span class="token attr-name">data-list-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Cherry<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index-value<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Cherry<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>links-pages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-32<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-27<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-index-element<span class="token punctuation">"</span></span> <span class="token attr-name">data-list-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Coconut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index-value<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Coconut<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>links-pages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-41<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#book-index-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<p>An example of CSS to styling the book index:</p>
<figure> <img src="/images/example-index-styled.png" alt="Exemple of a generated and styled book index" /></figure>
<pre class="language-css"><code class="language-css"><span class="token selector">#list-index-generated</span> <span class="token punctuation">{</span><br>  <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.list-alphabet-element</span> <span class="token punctuation">{</span><br>  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br>  <span class="token property">padding-top</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span><br>  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span><br>  <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.index-value</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>  <span class="token property">min-width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.index-value:first-letter</span> <span class="token punctuation">{</span><br>  <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercase<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.index-value::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"none"</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.link-page a</span> <span class="token punctuation">{</span><br>  <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span><br>  <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>

      </section>
      
      <section class="data" id="paged-media-approaches-:-page-floats">
        <h1></h1>
        <p>Layout is the operation of positioning and styling elements of content in a given space. It aims to position the content (text, images, notes…) in a hierarchical and harmonious way (balancing the zones, colors and spaces, contrasts), in order to facilitate display and the flow of reading.</p>
<p>Layout is more complex than the flow of content from one page to the next with appropriate elements of stylization. Each page must be balanced and provide for pleasant reading. To achieve this, we need to position elements in relation to the flow of text but also in relation to the page as well. Elements will have text wrapped around them to manage a pleasing allocation of white space and avoid creating widows and orphans.</p>
<p>In CSS specifications, the float property is very interesting. The property indicates that an element is to be removed from the normal flow and instead be placed into a different place – currently, on the right or left side of its container. Text and other inline elements will then surround the floated element.</p>
<p>In its simplest use, the float property can be used to wrap text around images. This property can take four values: <code>left | right | inherit | none.</code></p>
<p>New properties (<code>float-reference</code>, <code>float-defer</code>) and values (for <code>float</code> and <code>clear</code> properties) have recently been proposed in the W3C working draft <a href="https://www.w3.org/TR/css-page-floats-3/">CSS Page Floats</a>. These properties add further ways of refining layouts and that’s what we are going to look at in this post. We also propose additional new extension values, based on what has already been proposed in proprietary tools such as Vivliostyle, Prince, PDFReactor and AntennaHouse.</p>
<blockquote>
<p>Paged.js is not yet supporting page-float, this article is there to help define the implementation and the future work.</p>
</blockquote>
<h1 id="float-reference-and-float-properties" tabindex="-1">Float reference and float properties</h1>
<p>The float specification first needs to be established in reference to some default value or position. e.g. <em>“The entity to which the float is aligned initially before float placement takes place”</em> (<a href="https://www.w3.org/TR/css-page-floats-3/#terms">CSS Page Floats</a>).</p>
<p>To do this, we need two properties:</p>
<ul>
<li><code>float-reference</code> allows the definition of a specific entity as the reference to which the element is moving. The float reference can be the float anchor’s line box, column, region or page; and</li>
<li><code>float</code> is used to specify where the element will move in relation to this new reference.</li>
</ul>
<p>A simple example will make this clearer. In this example, initially, a figure is positioned around the middle of the page. We want to move the image to the top of the page. For this, we define the page as our float reference and we use the values <code>top</code> as following :</p>
<pre class="language-css"><code class="language-css"><span class="token selector">figure</span> <span class="token punctuation">{</span><br><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br><span class="token property">float-reference</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br><span class="token property">float</span><span class="token punctuation">:</span> top<br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/article-figure-01.png" /></figure>
<h2 id="the-float-property-(w3c-specifications)" tabindex="-1">The float property (W3C specifications)</h2>
<p>For the float property, the <a href="https://www.w3.org/TR/css-page-floats-3/#float-property">W3C draft specifications</a> propose the following values : <code>block-start | block-end | inline-start | inline-end | snap-block | snap-inline | left | right | top | bottom | none</code></p>
<p>There are two types of values that I separate into two categories I call “floats XY” and “floats AB”.</p>
<p><strong>Floats XY</strong></p>
<p><code>left | right | top | bottom</code></p>
<p>These values are interpreted relative to the page, independently of writing mode. Their physical directions correspond to the x-axis (horizontal dimension) and y-axis (vertical dimension) of the page.</p>
<p><strong>Floats AB</strong></p>
<p><code>block-start | block-end | inline-start | inline-end | snap-block | snap-inline</code></p>
<p>These values are interpreted relative to the flow of content. There are abstract directional and dimensional calculated directly from the values of the writing-mode and direction properties.</p>
<p>These flow-relative directions, <code>block-start | block-end | inline-start | inline-end</code>, are defined in the W3C recommendation <a href="https://www.w3.org/TR/css-writing-modes-3/#logical-directions">CSS Writing Modes Level 3</a> as follows:</p>
<ul>
<li><strong>block-start</strong> : “The side that comes earlier in the block flow direction, as determined by the writing-mode property: the physical top in horizontal-tb mode, the right in vertical-rl, and the left in vertical-lr.”</li>
<li><strong>block-end</strong> : “The side opposite block-start.”</li>
<li><strong>inline-start</strong> : “The side from which text of the inline base direction would start. For boxes with a used direction value of ltr, this means the line-left side. For boxes with a used direction value of rtl, this means the line-right side.”</li>
<li><strong>inline-end</strong> : “The side opposite inline-start.”</li>
</ul>
<figure> <img src="/images/article-figure-02.png" /></figure>
<!-- <img class="wp-image-698 " src="article-figure-02.png" alt="" srcset="article-figure-02.png 4167w, article-figure-02-300x227.png 300w, article-figure-02-768x581.png 768w, article-figure-02-1024x775.png 1024w, article-figure-02-1200x908.png 1200w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 1362px) 62vw, 840px" /> -->
<p>So, the <code>block-start</code> float value gives a different result if it’s applied to elements contained in an entity with different writing-mode and direction properties. According to the specifications of the W3C working draft <a href="https://www.w3.org/TR/css-page-floats-3/">CSS Page Floats</a>, with the <code>block-start</code> float value, <em>“the element generates a box that is floated to the line-start outer edge of the float reference. Content flows on the line-end side of the box.”</em> This gives the following results:</p>
<figure><img src="/images/article-figure-03.png" /></figure>
<h2 id="avoiding-white-spaces" tabindex="-1">Avoiding white spaces</h2>
<p>It often happens that an element ends up at the bottom of a page but is too big to fit within the page height, so the element is automatically pushed to the next page with a forced page break. This produces a gap, a white space, at the end of the previous page. It’s unsightly and, moreover, the reader might think that it means the end of a section. The float property can fix this problem.</p>
<p>In the following example, the figure is already at the nearest edge, so it does not move. However, floats allow subsequent content to be displayed before the float and the white space can therefore be filled.</p>
<figure> <img src="/images/article-figure-04.png" /></figure>
<p>Note that in Prince, the proprietary optional modifier <code>unless-fit</code> is to be used in combination with other float instructions, and is conditional: the element is only floated if it would otherwise cause a page.</p>
<p>element {<br>
width: 100%;<br>
float: top unless-fit<br>
}</p>
<h2 id="the-snap-block-value" tabindex="-1">The snap-block value</h2>
<p>The <code>snap-block(&lt;length&gt; [, start | end | near ]?)</code> value and the <code>snap-inline(&lt;lengtht&gt; [, start | end | near ]?)</code> values specify than an element floats to the start or the end of the block if it naturally appears within a certain distance from either one.</p>
<p>The length value specifies the reach of the snap function, e.g. the maximum distance from the start/end that an element must be within in order to be floated.</p>
<p><em>“The length value specifies the distance from both the start and the end, two length values specify the distance from the start and end, respectively. The optional keyword value specifies where the element is floated: start, end, or the nearest of the two. The initial value is near. If near is in effect and the element is within the specified distance both from the start and the end, end wins.”</em> (W3C specifications)</p>
<p>In this example the first element is affected, but not the second :</p>
<p>element {<br>
float-reference: page;<br>
float: snap-block(2em near)<br>
}</p>
<figure> <img src="/images/article-figure-05.png" /></figure>
<p>An element with the <code>snap-block()</code> value is considered to be a float even if the element does not appear within the specified distance. In this case, the element floats at the start / end line, but not at the start, nor at end of the block.</p>
<figure> <img src="/images/article-figure-06.png" /></figure>
<p>The <code>snap-block</code> and the <code>snap-inline</code> values correspond respectively to <code>snap-block(2em, near)</code> and <code>snap-inline(2em, near)</code>. It can be very useful to apply this float property to move an element to the top of the next page unless it fits on the current page without causing a break and leaving a gap, or without causing a widow or orphans.</p>
<h1 id="extensions-proposals-for-pagedmedia-specs" tabindex="-1">Extensions proposals for pagedmedia specs</h1>
<p>Although the W3C draft extends the possibilities for float values, they are still limited and some layouts are still not possible. In this part, I want to propose new extension values, sometimes based on what has already been proposed by some proprietary tools.</p>
<h2 id="combinations-of-xy-directions" tabindex="-1">Combinations of XY directions</h2>
<p>In the W3C draft, there is currently no way to float into a combination of directions (top right, right top, left bottom, bottom left, etc.) but it’s possible in Antenna House. For example, with <code>float: bottom left</code>, the element goes to the left bottom corner of the page. It’s a very interesting extension which allows more possibilities for layout.</p>
<figure> <img src="/images/article-figure-07.png" /></figure>
<h2 id="inside-and-outside-values" tabindex="-1">Inside and outside values</h2>
<p>The values <code>inside</code> and <code>outside</code> are very useful in print because we often have to deal with left-facing and right-facing pages, together forming a spread. These values can be found in Prince or AntennaHouse and are interpreted relative to the page (floats XY), moving the elements respectively to the inside or outside of a spread:</p>
<ul>
<li>with the <code>inside</code> float value, an element can be floated at the left side on a right page and at the right side on a left page.</li>
<li>with the <code>outside</code> float value, an element can be floated at the right side on a right page and at the left side on a left page.</li>
</ul>
<figure> <img src="/images/article-figure-08-2.png" /></figure>
<h2 id="after-and-before" tabindex="-1">After and before</h2>
<p>The values <code>after</code> and <code>before</code> are a new proposal which can be added to the list of floats interpreted relative to the flow of content (floats AB). They indicate that the content flows respectively on the block-start and the block-end side of the box. These values can be used in combination with the other “float AB” values to force the side of the content flow.</p>
<figure> <img src="/images/article-figure-09.png" /></figure>
<h4 id="update-(7%2F04%2F2018)" tabindex="-1">UPDATE (7/04/2018)</h4>
<p>Shinyu Murakami (Vivliostyle) noted <a href="https://www.pagedmedia.org/page-floats/#comment-925">in a comment</a> of this article that <code>after</code> and <code>before</code> keywords were used in the W3C’s old logical (flow relative) direction terminology (W3C XSL-FO). <code>inline-start</code> and <code>inline-end</code> would probably be a better choice of keywords and fit closer the new W3C logic. We will adopt this terminology for the future. In the example above <code>block-start after</code> is transformed into <code>block-start inline-end</code>. The following demo has been updated.</p>
<h2 id="need-to-extend-the-float-property" tabindex="-1">Need to extend the float property</h2>
<p>In summary, if we take all the proposals that have just been detailed in this part, we can propose a global syntax for the float property:</p>
<p><code>float: none | [&lt;float-x&gt; || &lt;float-y&gt;] || [&lt;float-a&gt; || &lt;float-b&gt;]</code></p>
<p>with :</p>
<ul>
<li><code>&lt;float-y&gt; = top | bottom</code></li>
<li><code>&lt;float-x&gt; = left | right | inside | outside</code></li>
<li><code>&lt;float-a&gt; = block-start | block-end | inline-start | inline-end | snap-block(&lt;length&gt; [, start | end | near ]?) | snap-inline(&lt;length&gt; [, start | end | near ]?)</code></li>
<li><code>&lt;float-b&gt; = before | after</code></li>
</ul>
<p>I have made a little demonstrator to show all the possibilities of this proposal with the application of these additional different kinds of floats: <a href="http://demos.pagedmedia.org/page-floats/">http://demos.pagedmedia.org/page-floats/</a></p>
<img class="alignnone wp-image-696 " src="/images/Capture-d’écran-2018-04-07-à-14.29.04-1.png" alt="" srcset="Capture-d’écran-2018-04-07-à-14.29.04-1.png 2428w, Capture-d’écran-2018-04-07-à-14.29.04-1-300x208.png 300w, Capture-d’écran-2018-04-07-à-14.29.04-1-768x532.png 768w, Capture-d’écran-2018-04-07-à-14.29.04-1-1024x709.png 1024w, Capture-d’écran-2018-04-07-à-14.29.04-1-1200x831.png 1200w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 1362px) 62vw, 840px" />
<h1 id="multicolumn-layout" tabindex="-1">Multicolumn layout</h1>
<p>In multicolumn layouts, the float-reference property <code>float-reference: column</code> can be used. The floated elements will be placed according to the column which contains the float anchor, e.g. the point in the flow where the floated element would have appeared had it not been a float and instead had been an empty inline element with no margins, borders or padding.</p>
<p>It’s still possible to use <code>float-reference: page</code> in multicolumn layouts. In this case, the same element with the same float value will be placed differently according to its float reference.</p>
<figure> <img src="/images/article-figure-10.png" /></figure>
<h2 id="column-span" tabindex="-1">Column span</h2>
<p>The <code>column-span</code> property allows an element to span all columns when the value of the property is <code>all</code>. An element that spans more than one column is called a spanning element. This is useful for titles which break the flow of the columns and span several columns.</p>
<p>Generally, in the tools explored for this article, an integer value is added for specifying how many columns an element should span across. This possibility is not available for now in the current draft of W3C but it’s very useful in combination with float properties for creating layouts such as those used in newspaper formats.</p>
<pre class="language-css"><code class="language-css">    <span class="token selector">body</span> <span class="token punctuation">{</span><br>        <span class="token property">column-count</span><span class="token punctuation">:</span> 3<br>    <span class="token punctuation">}</span><br>    <span class="token selector">img</span> <span class="token punctuation">{</span><br>        <span class="token property">column-span</span><span class="token punctuation">:</span> 2<br>        <span class="token property">float-reference</span><span class="token punctuation">:</span> column<br>        <span class="token property">float</span><span class="token punctuation">:</span> top<br>    <span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/article-figure-11.png" /></figure>
<h1 id="clear-property" tabindex="-1">Clear property</h1>
<p>The clear property can be used to prevent stacking of floats. The possible values are the same as the float property, only the <code>snap-block()</code> and <code>snap-inline()</code> values are not available.</p>
<p>The clear property indicates whether an element can be located next to floating elements that precede it (according to the direction indicated by the clear value) or if it needs to be moved in the next float reference container.</p>
<p>With the code that follows, a figure can’t have another figure below it the same page. If another figure has its float anchor in the same page, this figure will appear in the next page when rendering.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">figure</span> <span class="token punctuation">{</span><br>  <span class="token property">float-refrence</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> bottom left<span class="token punctuation">;</span><br>  <span class="token property">clear</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/article-figure-12.png" /></figure>
<h1 id="float-defer-property" tabindex="-1">float-defer property</h1>
<p>With the <code>float-defer</code> property, a floated element can be deferred to a subsequent fragmentation container. This property works with an integer value or with the keyword <code>last</code>: <em>“This property specifies whether the initial float reference of a page float is the fragmentation container in which the</em> float <em>anchor is placed after previous page floats have been placed, or in another one.”</em> (<a href="https://www.w3.org/TR/css-page-floats-3/#float-defer-property">W3C specifications</a>)</p>
<p>An “n” positive integer value indicates that the element is deferring to the Nth fragmentation container of the “fragmentation flow” after the float anchor is initially placed (after all previous page floats have been placed within the given fragmentation context).</p>
<p>An “n” negative integer value indicates that the element is deferring to the Nth fragmentation container of the “fragmentation flow” counting backward from the end. If the float reference of the deferring element is the page, the count starts on the last page of the flow section of the named page where the initial float anchor appeared. If the float reference of the deferring element is the column, the count starts on the last page column of the page where the initial float anchor appeared.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">figure</span> <span class="token punctuation">{</span><br>  <span class="token property">float-reference</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span><br>  <span class="token property">float-defer</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/article-figures-13.png" /></figure>
<pre class="language-css"><code class="language-css"><span class="token selector">figure</span> <span class="token punctuation">{</span><br>  <span class="token property">float-reference</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span><br>  <span class="token property">float-defer</span><span class="token punctuation">:</span> -2<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/article-figures-14.png" /></figure>
<p>These properties don’t work on any of the tools tested. However, in Prince and Antenna House, the <code>next</code> value is added to the <code>float</code> property: the floated element is placed on the next fragmentation container from its source location.</p>
<h1 id="in-conclusion" tabindex="-1">In conclusion</h1>
<p>The large number of values proposed by the W3C Working Draft <a href="https://www.w3.org/TR/css-page-floats-3/">CSS Page Floats</a> makes it possible, through the combination of properties, to imagine a large number of use cases and therefore to start expressing rich layouts.</p>
<p>The implementation of this specification depends on the tool, but overall they are rather limited.</p>
<ul>
<li><strong>Browsers</strong> haven’t implemented anything.</li>
<li><strong>Prince</strong> and <strong>Antenna House</strong> have their own proprietary values for the <code>float</code> properties, including some that run across those of the W3C specifications.</li>
<li><strong>Vivliostyle</strong> have implemented <code>float-reference</code> and <code>float</code> properties very well. Johannes Wilm, the specification’s editor, is a member of the Vivliostyle Project Community</li>
<li><code>clear</code> and <code>float-defer</code> are yet not implemented anywhere.</li>
</ul>
<p>The <a href="https://www.w3.org/TR/css-page-floats-3/">CSS Page Floats</a> specifications and the extensions proposed in this post are good candidates for increasing opportunities for the PagedMedia initiative. This would be interesting not only for the placement figures but also for augmented uses such as the two following examples on which I end this post.</p>
<h2 id="full-page-image" tabindex="-1">Full page image</h2>
<pre class="language-css"><code class="language-css"><span class="token selector">figure .full-page</span> <span class="token punctuation">{</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> 8in<span class="token punctuation">;</span> <span class="token comment">/* height of the page */</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span><br>  <span class="token property">float-reference</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><br>  <span class="token property">top</span><span class="token punctuation">:</span> -0.8in<span class="token punctuation">;</span> <span class="token comment">/* margin top of the page */</span><br>  <span class="token property">left</span><span class="token punctuation">:</span> -0.8in<span class="token punctuation">;</span> <span class="token comment">/* left margin of the page */</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/article-figures15.png" /></figure>
<h2 id="inserts-in-margins" tabindex="-1">Inserts in margins</h2>
<pre class="language-css"><code class="language-css"><span class="token selector">.inserts</span> <span class="token punctuation">{</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 30mm<span class="token punctuation">;</span><br>  <span class="token property">margin-outside</span><span class="token punctuation">:</span> -38mm<span class="token punctuation">;</span><br>  <span class="token property">float-reference</span><span class="token punctuation">:</span> page<span class="token punctuation">;</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> top outside<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<figure> <img src="/images/article-figures16.png"  /></figure>

      </section>
      
      <section class="data" id="build-a-table-of-contents-from-your-html">
        <h1></h1>
        <p>In this part of the doc, we'll show you how to build a table of contents using a custom script and the css function <code>target-counter()</code> for the <code>content</code> property.</p>
<h2 id="build-the-table-of-contents-from-your-html" tabindex="-1">Build the table of contents from your html</h2>
<p>In HTML, a table of contents is a <code>&lt;nav&gt;</code> elements that contain a list of the reveleant titles of your document with a link to the unique identifier of each. This part can be done with your own tool/generator but here is an exemple of a script to generate a table of contents in vanilla javascript:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">createToc</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> content <span class="token operator">=</span> config<span class="token punctuation">.</span>content<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> tocElement <span class="token operator">=</span> config<span class="token punctuation">.</span>tocElement<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> titleElements <span class="token operator">=</span> config<span class="token punctuation">.</span>titleElements<span class="token punctuation">;</span><br><br>  <span class="token keyword">let</span> tocElementDiv <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>tocElement<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> tocUl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"ul"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  tocUl<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"list-toc-generated"</span><span class="token punctuation">;</span><br>  tocElementDiv<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tocUl<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// add class to all title elements</span><br>  <span class="token keyword">let</span> tocElementNbr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> titleElements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> titleHierarchy <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> titleElement <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>titleElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    titleElement<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// add classes to the element</span><br>      element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"title-element"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"data-title-level"</span><span class="token punctuation">,</span> titleHierarchy<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>      <span class="token comment">// add id if doesn't exist</span><br>      tocElementNbr<span class="token operator">++</span><span class="token punctuation">;</span><br>      idElement <span class="token operator">=</span> element<span class="token punctuation">.</span>id<span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>idElement <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        element<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"title-element-"</span> <span class="token operator">+</span> tocElementNbr<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token keyword">let</span> newIdElement <span class="token operator">=</span> element<span class="token punctuation">.</span>id<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// create toc list</span><br>  <span class="token keyword">let</span> tocElements <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".title-element"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tocElements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> tocElement <span class="token operator">=</span> tocElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">let</span> tocNewLi <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Add class for the hierarcy of toc</span><br>    tocNewLi<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"toc-element"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    tocNewLi<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><br>      <span class="token string">"toc-element-level-"</span> <span class="token operator">+</span> tocElement<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>titleLevel<br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Keep class of title elements</span><br>    <span class="token keyword">let</span> classTocElement <span class="token operator">=</span> tocElement<span class="token punctuation">.</span>classList<span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> classTocElement<span class="token punctuation">.</span>length<span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>classTocElement<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">"title-element"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        tocNewLi<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>classTocElement<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// Create the element</span><br>    tocNewLi<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span><br>      <span class="token string">'&lt;a href="#'</span> <span class="token operator">+</span> tocElement<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">'">'</span> <span class="token operator">+</span> tocElement<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span> <span class="token string">"&lt;/a>"</span><span class="token punctuation">;</span><br>    tocUl<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tocNewLi<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Copy this script to a <code>.js</code> and link this file to your document.</p>
<p>The table of contents need to be generated before paged.js fragment the content into pages. Therefore, you need to register the handler <code>beforeParsed()</code> and call the table of contents script inside.</p>
<p>Add this code in the <code>head</code> of you html document after the call for paged.js script:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>  <span class="token keyword">class</span> <span class="token class-name">handlers</span> <span class="token keyword">extends</span> <span class="token class-name">Paged<span class="token punctuation">.</span>Handler</span> <span class="token punctuation">{</span><br>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">super</span><span class="token punctuation">(</span>chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token function">beforeParsed</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token function">createToc</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>        <span class="token literal-property property">content</span><span class="token operator">:</span> content<span class="token punctuation">,</span><br>        <span class="token literal-property property">tocElement</span><span class="token operator">:</span> <span class="token string">"#my-toc-content"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">titleElements</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">".mw-content-ltr h2"</span><span class="token punctuation">,</span> <span class="token string">"h3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  Paged<span class="token punctuation">.</span><span class="token function">registerHandlers</span><span class="token punctuation">(</span>handlers<span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<h3 id="configuring-the-script" tabindex="-1">Configuring the script</h3>
<p><code>tocElement</code>: define the id element where the toc list will be created</p>
<p><code>titleElements</code>: array of the title element you want in the your table of contents. You can add as many as you want and the elements can be selected like any css, for example: <code>.title-1</code> or <code>.my-content h1</code></p>
<h2 id="generate-page-numbers" tabindex="-1">Generate page numbers</h2>
<p>Thanks to the previous script, your content is now structured using <code>id</code> for the heading, and the table of contents we created use hyperlinks to those <code>#id</code>:</p>
<pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- the headings in the text--></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pre-digital_era<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title-element<span class="token punctuation">"</span></span> <span class="token attr-name">data-title-level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>h1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  Pre-digital era<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Content...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>digital_era<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title-element<span class="token punctuation">"</span></span> <span class="token attr-name">data-title-level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>h1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  Digital era<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Content...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- the table of contents--></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#pre-digital_era<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Pre-digital era<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#digital_era<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Digital era<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<p>In the CSS, the <code>target-counter</code> property is used within <code>::before</code> and <code>::after</code> pseudo-elements, using the <code>content</code> property. It can be translated as: find the counter named <code>page</code> that appears where you find the element we’re targetting with the attribute <code>href</code>:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">#toc li a::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">target-counter</span><span class="token punctuation">(</span><span class="token function">attr</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="add-styles-to-the-table-of-contents" tabindex="-1">Add styles to the table of contents</h2>
<p>If you need to add counters or leaders to your table of contents generated above, here is an exemple of CSS you can use:</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* set the style for the list numbering to none */</span><br><span class="token selector">#list-toc-generated</span> <span class="token punctuation">{</span><br>  <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element</span> <span class="token punctuation">{</span><br>  <span class="token property">break-inside</span><span class="token punctuation">:</span> avoid<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element a::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">" p. "</span> <span class="token function">target-counter</span><span class="token punctuation">(</span><span class="token function">attr</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element-level-1</span> <span class="token punctuation">{</span><br>  <span class="token property">margin-top</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span><br>  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element-level-2</span> <span class="token punctuation">{</span><br>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* counters */</span><br><br><span class="token selector">#list-toc-generated</span> <span class="token punctuation">{</span><br>  <span class="token property">counter-reset</span><span class="token punctuation">:</span> counterTocLevel1<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element-level-1</span> <span class="token punctuation">{</span><br>  <span class="token property">counter-increment</span><span class="token punctuation">:</span> counterTocLevel1<span class="token punctuation">;</span><br>  <span class="token property">counter-reset</span><span class="token punctuation">:</span> counterTocLevel2<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element-level-1::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>counterTocLevel1<span class="token punctuation">)</span> <span class="token string">". "</span><span class="token punctuation">;</span><br>  <span class="token property">padding-right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element-level-2</span> <span class="token punctuation">{</span><br>  <span class="token property">counter-increment</span><span class="token punctuation">:</span> counterTocLevel2<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element-level-2::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>counterTocLevel1<span class="token punctuation">)</span> <span class="token string">". "</span> <span class="token function">counter</span><span class="token punctuation">(</span>counterTocLevel2<span class="token punctuation">)</span> <span class="token string">". "</span><span class="token punctuation">;</span><br>  <span class="token property">padding-right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* hack for leaders */</span><br><br><span class="token selector">#list-toc-generated</span> <span class="token punctuation">{</span><br>  <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* fake leading */</span><br><span class="token selector">#list-toc-generated .toc-element::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">".............................................."</span><br>    <span class="token string">".............................................."</span><br>    <span class="token string">".............................................."</span> <span class="token string">"........"</span><span class="token punctuation">;</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">padding-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><br>  <span class="token property">letter-spacing</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element a::after</span> <span class="token punctuation">{</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><br>  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span><br>  <span class="token property">padding-left</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#list-toc-generated .toc-element a</span> <span class="token punctuation">{</span><br>  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>And <em>voilà</em>!<br>
All the files (scripts, CSS, HTML exemples) to create a table of contents are available on gitlab: <a href="https://gitlab.coko.foundation/pagedjs/experiments/tree/master/table-of-content">https://gitlab.coko.foundation/pagedjs/experiments/tree/master/table-of-content</a>.</p>

      </section>
      
  </template>


  <section class="results">
    <p>Please fill the input to search</p>
  </section>

    </main>

</article>

        
            <footer>
    <p class="foot-content"></p>
</footer>

        
        
<script src="/js/text-annotator.min.js"></script>
<script src="/js/search.js"></script>

        
        <script>
        if (document.querySelector('.toc .title')) {
        document.querySelector('.toc .title').addEventListener("click", function() {
        document.querySelector('.toc').classList.toggle("show");
        })
        }

        document.querySelector(".menu-call").addEventListener("click", function() {document.querySelector(".menu").classList.toggle("hide")});

        </script>
    </body>
</html>
