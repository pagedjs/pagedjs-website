<!DOCTYPE html>

<html lang=" dir="ltr class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <title>Paged.js — Avoid whitespaces on pages</title>
        <script type="module">
        document.documentElement.classList.remove('no-js'); 
        document.documentElement.classList.add('js'); 
        </script>
        <meta name="description" content="">
        <meta property="og:title" content="Avoid whitespaces on pages — ">
        <meta property="og:description" content="">
        <meta property="og:image" content="">
        <meta property="og:image:alt" content="Image description">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta name="twitter:card" content="summary_large_image">
        <meta property="og:url" content="site.url">
        <link rel="canonical" href="https://www.mywebsite.com/page">
        <link rel="icon" href="/favicon.ico">
        <link rel="icon" href="/favicon.svg" type="image/svg+xml">
        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
        <link rel="manifest" href="/my.webmanifest">
        <meta name="theme-color" content="NaN">
        
        <meta name="twitter:dnt" content="on">
        
        <link rel="stylesheet" href="/css/main.css">
        <link href="https://unpkg.com/prismjs@1.20.0/themes/prism.css"
              rel="stylesheet">
        <script>
        // if there is a dark mode in the storage, use that
        if (localStorage.getItem('Nightmode') == "true") {
        document
        .documentElement
        .classList
        .add('nightmode')
        }
        </script>
        
            <script>

  if (window.location.href.includes("?night")) {
    document.documentElement.classList.add("nightmode");
  }

function start() {

    document.querySelectorAll("a").forEach((a) => {
      if (a.href.includes(`?day`)) {
        // add the infor mation in the url of each link
        a.href = `${a.href.replace("?day", "?night")}`;
      } else if (a.href.includes("#")) {
        a.href = a.href.replace("#", "index.html?night#");
      } else {
        a.href = `${a.href}?night`;
      }
    });
};

start()
</script>
        
    </head>
    <body class="cookbook "
          style="">
        <div class="crop-marks">
    <div class="crop-mark vertical"></div>
    <div class="crop-mark horizontal"></div>
    <div class="paper"></div>
</div>
        
        
            
<div class="running-head">
    
        
            <a class="back-home" href="/">
    <svg id="paged-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 213 52" fill="none" id="paged-logo"><path fill="var(--color-body)" d="M69.1 34.7c0 1.3-.5 2.7-1.6 2.7s-1.6-1.1-1.6-4.6v-7.1c0-7.3-1.5-13.5-12.1-13.5-6.5.0-13.4 2.2-13.4 8.4.0 4.7 6.9 6.1 9.9 2.6-1-1.3-1.7-3-1.7-4.5.0-2.9 2.2-3.5 4.4-3.5 2.4.0 3.9 1.4 3.9 8.6v1.3l-4.1 1.1c-7.9 2.2-12.9 4.9-12.9 9.1.0 3.9 2.2 6 7.1 6 4.6.0 8.7-2.4 11-7.7h.5c.9 5 2.4 7.7 6.8 7.7 3.1.0 6.6-1.5 6.1-6.7h-2.3v.1zm-17.8 1.8c-1.7.0-2.6-.9-2.6-2.1.0-3.2 2.3-4.7 8.2-6.5.1 4-2.5 8.6-5.6 8.6zM24.8 12.3c-3.6.0-9.6 1.2-10.6 9.1h-.9v-9.1L.9 15.2v2.4h6v31l-5.4.4v2.4h20.2V49l-6.2-.5V37.3c1.3 1.9 4 4.2 8.7 4.2 5.1.0 12.3-4.4 12.3-14.2.0-9.2-5.1-15-11.7-15zm-2.4 25.2c-2.8.0-5.3-1.5-6.5-5.7v-8.9c.1-1.3 1.5-5.4 5-5.4 4.4.0 7 5.1 7 10.5-.1 4.7-2 9.5-5.5 9.5zm155-21.6h5.8v32c0 3.4-4.3.4-5.1-3.1H177c-1.3 3.5-.2 6.9 3.1 6.9 3.2.0 7.4-1.7 7.4-8.9l.1-30.6-10.2 1.4v2.3zm-6 17.9c-2.4.0-3.7 1.3-3.7 3.7.0 2.4 1.3 3.7 3.7 3.7 2.4.0 3.7-1.3 3.7-3.7.0-2.4-1.4-3.7-3.7-3.7zM95.8 37.4c-4.9-1.1-12.3-1.1-15.9-1.6l1.2-2.4c1.4.4 3.1.6 5 .6 8.6.0 13.3-4.9 13.3-11.3.0-4.4-3-8-7.8-9.6l.2-.6c1.9.4 3.9.7 5.4.7 2.3.0 4-.8 4-3.4.0-1.8-1.3-4.1-3.3-6.2-3.3 3.6-6.2 7.3-10.7 8.7-.2-.1-.4-.1-.6-.1-8.6.0-13 4.8-13 11.3.0 4 1.8 7.4 5.7 9.2l-5.5 4.6c.4.8 1.7 2.9 6.5 4.4v.7c-4.4.6-7 1.9-7 3.7.0 3.8 7 5.7 12.3 5.7 9.1.0 16.6-2.3 16.9-7.9.0-3.6-1.6-5.4-6.7-6.5zm-10-22.2c3.3.0 4.8 2.4 4.8 7.4.0 5.7-1.1 8.5-4 8.5-3.4.0-4.8-2.9-4.8-8.4.1-5.3 1.2-7.5 4-7.5zm5.1 32.5c-6.2.0-10.5-1.5-10.5-3.2.0-.6.6-1.3 1.8-2.2l.9.2c9.4 1.8 14.8 1.3 14.8 3 .1 1.4-2.5 2.2-7 2.2zM199 21.5c-2.3-1.4-3.3-2.6-3.3-4 0-1.6 1.1-3.3 4-3.3 4.3.0 8.1 3.6 10.6 8.9h1.1v-8.4c-3-1.6-6.4-2.4-9.5-2.4-5.3.0-9.8 2.4-9.8 7.3.0 3.9 3.1 6.7 6.2 8.4 5.8 3.2 11 4.4 11 7.8.0 2.3-2.2 3.6-4.7 3.6-5.2.0-8.9-2.7-10.9-10.2h-1.1v9.4c2.7 1.8 6.5 2.8 10.1 2.8 5.4.0 10.2-2.2 10.2-7.7.1-6.5-7.5-8.3-13.9-12.2zM185.7 1.8c-2 0-2.9 1.1-2.9 2.9.0 1.9 1 2.9 2.9 2.9 1.8.0 2.9-1 2.9-2.9s-1.1-2.9-2.9-2.9zM126.1 29.1c.1.4.1.7.1 1.1.0 3.9-2.8 6.1-6.8 6.1-3.9.0-6.7-2.8-7.7-8.5l17.2-4.3c-.2-7.7-4.7-11.3-12.9-11.3-6.2.0-13 4.5-13 14.4.0 7.5 4.9 14.6 13.9 14.6 8 0 12.3-5.3 12.3-11.2.0-.5-.1-1-.1-1.5l-3 .6zm-14.7-5.8c0-5.2 2.2-8 5.3-8 2.9.0 3.8 3.2 3.8 5.6.0 1.5-1.9 1.8-5.1 2.9l-4 1.3v-1.8zM147 4.7l6.2.5v10.6c-1.5-2.1-4-3.6-8.4-3.6-5.1.0-12.3 4.4-12.3 14.2.0 9.1 5.1 14.9 11.7 14.9 3.6.0 9.6-1.2 10.6-9.1h1l1.9 8.3h4V.8l-14.8 1.5v2.4h.1zm6.2 26c-.1 1.2-1.1 5.4-5.9 5.4-4 0-6-4.9-6-10.5.0-4.7 1.9-9.5 5.4-9.5 2.8.0 5.3 1.5 6.5 5.7v8.9z"></path></svg>    
</a>
        
    
    <button class="menu-call">MENU</button>
    <nav class="menu hide" role="main">
        <ul>
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
                    
                    
                        <li class="">
                            <a href="/en/about/">about</a>
                        </li>
                        
                    
                
            
                
                    
                    
                        <li class="">
                            <a href="/en/faq/">FAQ</a>
                        </li>
                        
                    
                
            
                
                    
                    
                        
                        
                        
                        
                            
                                
                            
                        
                        
                    
                
            
                
            
                
                    
                    
                        <li class="">
                            <a href="/en/undefined/">documentation</a>
                        </li>
                        
                    
                
            
                
                    
                    
                        <li class="">
                            <a href="/en/examples/">examples</a>
                        </li>
                        
                    
                
            
                
            
                
            
                
                    
                    
                        <li class="">
                            <a href="/en/journal/">Journal</a>
                        </li>
                        
                    
                
            
                
                    
                    
                        
                        
                        
                        
                            
                                
                            
                        
                        
                    
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            <li>
                <a class=github-link"
                href="https://github.com/pagedjs/pagedjs/">github</a>
            </li>
        </ul>
    </nav>
</div>

        
        
    

        
    
    <header>
        <h1 id="title">
            
            Avoid whitespaces on pages
        </h1>
        
            <p class="meta">
                written
                by <span class="author">Julie Blanc</span>
                on <time class="date">9/21/2020</time>
            </p>
        
        

    </header>
    <article>
        
        
        

    <p class="help-wanted">
        This page is only available in English. If you want to help us translate, you can open an issue on <a href="github.com/pagedjs/pagedjs-website/issues/">Github</a> and we’ll guide you through the process. Thank you!
    </p>


        
        
            <p class="intro">
                
                
                    
                        <br>
                        <span class="tags">
                            <a class=  "tag" href="/tags/page-floats/">page-floats</a><a class=  "tag" href="/tags/guide/">guide</a>
                        </span>
                    
                
            
            <p>A long time ago, I wrote an article about <a href="https://www.pagedjs.org/page-floats/">page floats</a>. Since then, we've had a lot of feedback about these CSS features that are crucial for paginated layout. We haven't yet implemented them in paged.js – because it's difficult and we need to take the time to ponder how to do. However, we are facing a recurring and urgent request regarding a specific aspect of page floats. I'm writing today to answer it :)</p>
<p>I'm sure you already know what I'm talking about. You know, this figure or this table that didn't fit at the end of your page? Because of how pagined medias works, if an element ends up at the bottom of a page but is too big to fit within the page height, the element is automatically pushed to the next page with a forced page break. This produces a gap, a white space, at the end of the previous page. It’s unsightly and, moreover, the reader might think that it means the end of a section.</p>
<p>The float properties can fix this problem, just by adding <code>float: top</code> and <code> float-reference: page</code> on the problematic element. The following figure illustrates what this should look like:<br>
<img src="/images/whitespace-script.png"></p>
<p>However, we can't use it today. I personally encounter this problem in some book design I make. So, based on a script made by <a href="https://gitlab.coko.foundation/julientaq">Julien</a> I share with you a little script to make floating-like elements in paged.js to avoid large chunks of whitespace at the end of pages. For this, we add a custom module to Paged.js using <a href="https://www.pagedjs.org/documentation/11-hooks/">handlers and hooks</a>.</p>
<p>As you can see, the script is not very long. You just have to add it in your HTML document (after the paged.js script), add the class <code>elem-float-top</code> to the elements where you want it to apply, and watch the magic happen.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> classElemFloat <span class="token operator">=</span> <span class="token string">"elem-float-top"</span><span class="token punctuation">;</span> <span class="token comment">// ← class of floated elements</span><br><br><span class="token keyword">class</span> <span class="token class-name">elemFloatTop</span> <span class="token keyword">extends</span> <span class="token class-name">Paged<span class="token punctuation">.</span>Handler</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span>chunker<span class="token punctuation">,</span> polisher<span class="token punctuation">,</span> caller<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>token<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">layoutNode</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// If you find a float page element, move it in the array,</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>classElemFloat<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">let</span> clone <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// Remove the element from the flow by hiding it.</span><br>      node<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">beforePageLayout</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> content<span class="token punctuation">,</span> breakToken</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// If there is an element in the floatPageEls array,</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls<span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// Put the first element on the page.</span><br>      page<span class="token punctuation">.</span>element<br>        <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".pagedjs_page_content"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">insertAdjacentElement</span><span class="token punctuation">(</span><span class="token string">"afterbegin"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>floatPageEls<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br>Paged<span class="token punctuation">.</span><span class="token function">registerHandlers</span><span class="token punctuation">(</span>elemFloatTop<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>Note</strong>: It's not exactly how the float page specifications work, but it's currently the easiest way to do it with Paged.js. A real <code>float: top</code> on an element should move the element to the top of the page where it is anchored. However, this would mean that the text already rendered in the page by paged.js (which is before the element) would have to be pushed to the next page, causing the text to be split again. There is currently no simple way in paged.js to re-render the page if an element in the layout is moved. For the moment, this script is the easiest way to do it.</p>

        </article>
    
      
      
      
      <aside class="paginator  both ">
        <a class="previous" href="/posts/2021-03-hackathon/">A paged.js hackathon at EnsadLab</a>
        <a class="next" href="/posts/welcome-pagedjs-0.1.42/">Welcome Pagedjs 0.1.42</a>
      </aside>


        
            <footer>
    <p class="foot-content"></p>
</footer>

        
        
        
        <script>
        if (document.querySelector('.toc .title')) {
        document.querySelector('.toc .title').addEventListener("click", function() {
        document.querySelector('.toc').classList.toggle("show");
        })
        }

        document.querySelector(".menu-call").addEventListener("click", function() {document.querySelector(".menu").classList.toggle("hide")});

        </script>
    </body>
</html>
